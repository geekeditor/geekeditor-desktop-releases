(this.webpackJsonpmain=this.webpackJsonpmain||[]).push([[5],{107:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var o=n(1),a=n(8),i=n(7),r=n(10),s=n(9),c=n(0),d=(n(359),function(e){Object(r.a)(n,e);var t=Object(s.a)(n);function n(e){var o;return Object(a.a)(this,n),(o=t.call(this,e)).textInput=void 0,o.onKeyDown=function(e){"Enter"===e.key&&o.textInput&&o.textInput.blur()},o.onEnd=function(){(0,o.props.onFinishing)(o.state.inputText.replace(/\s/g,"").trim())},o.onChange=function(e){o.setState({inputText:e.target.value})},o.state={inputText:"Untitled"},o}return Object(i.a)(n,[{key:"componentDidMount",value:function(){this.setState({inputText:this.props.text}),this.textInput&&(this.textInput.focus(),this.textInput.select())}},{key:"render",value:function(){var e=this,t=this.state.inputText;return Object(o.jsx)("div",{className:"text-edit",children:Object(o.jsx)("input",{type:"text",value:t,ref:function(t){e.textInput=t},onClick:function(e){e.stopPropagation()},onChange:this.onChange,onBlur:this.onEnd,onKeyDown:this.onKeyDown})})}}]),n}(c.Component))},115:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(8),a=n(7),i={components:{paragraph:"\u6bb5\u843d",header:"\u6807\u9898",h1:"\u6807\u9898\u4e00",image:"\u56fe\u7247",delimiter:"\u5206\u5272\u7ebf",todolist:"\u5f85\u529e",list:"\u5217\u8868",table:"\u8868\u683c",code:"\u4ee3\u7801\u5757",math:"Tex \u6570\u5b66\u516c\u5f0f",diagram:"Mermaid \u56fe\u8868",draw:"\u753b\u677f",drawio:"Drawio \u5236\u56fe"},toolbar:{converter:{convertTo:"\u8f6c\u6362\u4e3a",conversion:"\u5185\u5bb9\u8f6c\u6362"},settings:{toggler:"\u64cd\u4f5c\u5185\u5bb9\u5757",moveUp:"\u4e0a\u79fb",moveDown:"\u4e0b\u79fb",delete:"\u5220\u9664",quote:"\u5f15\u7528"},toolbox:{insert:"\u63d2\u5165\u5185\u5bb9\u5757"},insert:{math:"\u6570\u5b66\u516c\u5f0f"},inline:{bold:"\u52a0\u7c97",italic:"\u659c\u4f53",underline:"\u4e0b\u5212\u7ebf",strikethrough:"\u5220\u9664\u7ebf",link:"\u8d85\u94fe\u63a5",linkPlaceholder:"\u6dfb\u52a0\u8d85\u94fe\u63a5",mark:"\u6807\u8bb0",inlinecode:"\u5185\u8054\u4ee3\u7801",superscript:"\u4e0a\u6807",subscript:"\u4e0b\u6807"},edit:{undo:"\u56de\u64a4",redo:"\u91cd\u505a",search:"\u641c\u7d22 & \u66ff\u6362",layout:"\u7248\u5f0f"}},label:{format:"\u683c\u5f0f",insert:"\u63d2\u5165",edit:"\u7f16\u8f91"}},r=function(){function e(){Object(o.a)(this,e)}return Object(a.a)(e,null,[{key:"register",value:function(e,t){this._langs[e]=t}},{key:"getLang",value:function(e){var t=this.currentDictionary;if(!t)throw Error("not import language file");for(var n,o=(e||"").split("."),a=t,i=0;(n=o[i++])&&"string"!==typeof a&&(a=a[n]););return a}},{key:"currentDictionary",get:function(){return this._langs[this._localLang]||this._langs[Object.keys(this._langs)[0]||""]}}]),e}();r._langs={"zh-cn":i},r._localLang=(navigator.language||"zh-cn").toLowerCase()},168:function(e,t,n){"use strict";var o=n(46),a=n(8),i=n(7),r=function(){function e(t){var n=this;Object(a.a)(this,e),this.commands=void 0,this.keys=void 0,this.name=void 0,this.element=void 0,this.callback=void 0,this.executeShortcut=void 0,this.commands={},this.keys={},this.name=t.name,this.parseShortcutName(t.name),this.element=t.on,this.callback=t.callback,this.executeShortcut=function(e){n.execute(e)},this.element.addEventListener("keydown",this.executeShortcut,!1)}return Object(i.a)(e,null,[{key:"supportedCommands",get:function(){return{SHIFT:["SHIFT"],CMD:["CMD","CONTROL","COMMAND","WINDOWS","CTRL"],ALT:["ALT","OPTION"]}}},{key:"keyCodes",get:function(){return{0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46}}}]),Object(i.a)(e,[{key:"parseShortcutName",value:function(t){for(var n=t.split("+"),o=0;o<n.length;o++){n[o]=n[o].toUpperCase();var a=!1;for(var i in e.supportedCommands)if(e.supportedCommands[i].includes(n[o])){this.commands[i]=!0,a=!0;break}a||(this.keys[n[o]]=!0)}for(var r in e.supportedCommands)this.commands[r]||(this.commands[r]=!1)}},{key:"execute",value:function(t){var n,o={CMD:t.ctrlKey||t.metaKey,SHIFT:t.shiftKey,ALT:t.altKey},a=!0;for(n in this.commands)this.commands[n]!==o[n]&&(a=!1);var i,r=!0;for(i in this.keys)r=r&&t.keyCode===e.keyCodes["".concat(i)];a&&r&&this.callback(t)}},{key:"remove",value:function(){this.element.removeEventListener("keydown",this.executeShortcut)}}]),e}(),s=function(){function e(){Object(a.a)(this,e),this.registeredShortcuts=new Map}return Object(i.a)(e,[{key:"add",value:function(e){if(this.findShortcut(e.on,e.name))throw Error("Shortcut ".concat(e.name," is already registered for ").concat(e.on,". Please remove it before add a new handler."));var t=new r({name:e.name,on:e.on,callback:e.handler}),n=this.registeredShortcuts.get(e.on)||[];this.registeredShortcuts.set(e.on,[].concat(Object(o.a)(n),[t]))}},{key:"remove",value:function(e,t){var n=this.findShortcut(e,t);if(n){n.remove();var o=this.registeredShortcuts.get(e);o&&this.registeredShortcuts.set(e,o.filter((function(e){return e!==n})))}}},{key:"findShortcut",value:function(e,t){return(this.registeredShortcuts.get(e)||[]).find((function(e){return e.name===t}))}}]),e}();t.a=new s},263:function(e,t,n){},264:function(e,t,n){},265:function(e,t,n){},266:function(e,t,n){},267:function(e,t,n){},269:function(e,t,n){},28:function(e,t,n){"use strict";var o=n(11),a=n(8),i=n(7),r=n(10),s=n(9),c=n(72),d=n(19),l=n.n(d),u=n(33),h=function(e,t,n){if(e.set){var o={};o[t]=n,e.set(o,(function(){}))}else e[t]=n},p=function(e,t){return e.get?new Promise((function(n){e.get([t],(function(e){n(e[t])}))})):Promise.resolve(e[t])},f=function(e,t){e.remove?e.remove([t,"".concat(t,"__expires__")],(function(){})):(delete e[t],delete e["".concat(t,"__expires__")])},v=function(){function e(t){Object(a.a)(this,e),this.props=void 0,this.source=void 0,this.props=t||{},this.source=this.props.source||("undefined"!==typeof chrome&&"undefined"!==typeof chrome.storage?chrome.storage.local:"undefined"!==typeof localStorage?localStorage:{}),this.initRun()}return Object(i.a)(e,[{key:"initRun",value:function(){var e=this,t=new RegExp("__expires__"),n=this.source,o=Object.keys(n);o.length>0&&o.map((function(o,a){t.test(o)||Date.now()>=(n["".concat(o,"__expires__")]||Date.now()+1)&&e.remove(o);return o}))}},{key:"set",value:function(e,t,n){var o=this.source;return h(o,e,t),n&&h(o,"".concat(e,"__expires__"),Date.now()+6e4*n),t}},{key:"get",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.source,e.next=3,p(n,"".concat(t,"__expires__"));case 3:if(e.t0=e.sent,e.t0){e.next=6;break}e.t0=Date.now()+1;case 6:if(o=e.t0,!(Date.now()>=o)){e.next=11;break}return this.remove(t),e.abrupt("return");case 11:return e.abrupt("return",p(n,t));case 12:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"remove",value:function(){var e=Object(u.a)(l.a.mark((function e(t){var n,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.source,e.next=3,p(n,t);case 3:return o=e.sent,f(n,t),e.abrupt("return",o);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),m=new(function(e){Object(r.a)(n,e);var t=Object(s.a)(n);function n(e){var i;return Object(a.a)(this,n),(i=t.call(this))._storage=void 0,i._sharedPreferences=void 0,i._sharedPreferencesKey=void 0,i._isReady=void 0,i._settings=void 0,i._settingsKey=void 0,e=e||{name:"default"},i._sharedPreferencesKey="__shared_preferences_".concat(e.name,"__"),i._settingsKey="__settings__",i._settings={},i._sharedPreferences={},i._storage=new v,i._storage.get(i._sharedPreferencesKey).then((function(e){try{e=JSON.parse(e)}catch(a){e={}}var t=e||{},n=t[i._settingsKey]||{};i._settings=Object(o.a)(Object(o.a)({},n),i._settings),i._sharedPreferences=Object(o.a)(Object(o.a)({},t),i._sharedPreferences),i._sharedPreferences[i._settingsKey]=i._settings,i._isReady=!0,i.trigger("__ready__")})),i}return Object(i.a)(n,[{key:"syncToStorage",value:function(){var e=this;return new Promise((function(t){e._storage.set(e._sharedPreferencesKey,JSON.stringify(e._sharedPreferences)),t(!0)}))}},{key:"isReady",value:function(){return this._isReady}},{key:"ready",value:function(e){this._isReady?e():this.on("__ready__",e)}},{key:"setSetting",value:function(e,t){var n=this;return!!e&&(this._settings[e]=t,this.syncToStorage().then((function(){n.trigger(e,t)})),!0)}},{key:"getSetting",value:function(e){return this._settings[e]}},{key:"set",value:function(e,t){var n=this;return this._settingsKey!==e&&(this._sharedPreferences[e]=t,this.syncToStorage().then((function(){n.trigger(e,t)})),!0)}},{key:"get",value:function(e){return this._sharedPreferences[e]}}]),n}(c.a));t.a=m},29:function(e,t,n){"use strict";n.d(t,"d",(function(){return l})),n.d(t,"j",(function(){return u})),n.d(t,"c",(function(){return p})),n.d(t,"f",(function(){return f})),n.d(t,"a",(function(){return v})),n.d(t,"e",(function(){return m})),n.d(t,"b",(function(){return b})),n.d(t,"n",(function(){return j})),n.d(t,"i",(function(){return g})),n.d(t,"m",(function(){return y})),n.d(t,"k",(function(){return O})),n.d(t,"l",(function(){return _})),n.d(t,"g",(function(){return k})),n.d(t,"h",(function(){return x}));var o=n(19),a=n.n(o),i=n(33),r=n(25),s=n(137),c=n.n(s),d=n(35),l=function(e,t){return new Promise((function(n){document.addEventListener("copy",(function o(a){a=a||window.event,"string"!==typeof e&&Object.keys(e).length?Object.entries(e).forEach((function(e,t){a.clipboardData.setData(e,t)})):t&&t.forEach((function(t){a.clipboardData.setData(t,e.toString())})),a.preventDefault(),document.removeEventListener("copy",o),n(!0)})),document.execCommand("copy")}))};function u(){return h.apply(this,arguments)}function h(){return(h=Object(i.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.LOCAL,e.abrupt("return",t?t.selectDirectory():void 0);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var p=function(e){return e?e.replace(new RegExp("[\\r\\t\\n ]*</?(\\w+)\\s*(?:[^>]*)>[\\r\\t\\n ]*","g"),(function(e,t){return t&&"br"===t.toLowerCase()?e.replace(/(^[\n\r]+)|([\n\r]+$)/g,""):e.replace(new RegExp("^[\\r\\t\\n ]+"),"").replace(new RegExp("[\\r\\t\\n ]+$"),"")})):e},f=function(e,t,n){return n=n||{inlinePseudoElements:!0,preserveImportant:!0},c.a.inlineContent(e,t,n)};function v(e,t){var n=e.split("#"),o=n[0],a=n[1],i=[];for(var r in t){var s=t[r];null!=s&&i.push(r+"="+encodeURIComponent(s.toString()))}return o.indexOf("?")>-1?o+="&"+i.join("&"):o+="?"+i.join("&"),a?o+"#"+a:o}function m(e){void 0===e&&(e=window.location.href);var t=e.split("#")[0].split("?")[1];if(!t)return{};for(var n={},o=0,a=t.split("&");o<a.length;o++){var i=a[o],r=i.indexOf("=");if(!(r<0)){var s=i.substr(0,r),c=i.substr(r+1);if(!n[s]){var d=void 0;try{d=decodeURIComponent(c)}catch(l){d=c}n[s]=d}}}return n}function b(e,t,n,o){if(!e)return!1;e.addEventListener(t,n,o)}function j(e,t,n){if(!e)return!1;e.removeEventListener(t,n)}function g(e){for(var t=[],n=0;n<e.length;n++)t.push("(".concat(e.charAt(n),")"));return new RegExp("(.*)".concat(t.join("(.*)"),"(.*)"))}function y(){var e=window.LOCAL;if(e&&e.toggleFullscreen)e.toggleFullscreen();else{var t=document;t.webkitIsFullScreen||t.mozFullScreen?function(){var e=document;!(!e.webkitIsFullScreen&&!e.mozFullScreen)&&(e.exitFullscreen?e.exitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.webkitCancelFullScreen?e.webkitCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen())}():function(){var e=document;if(e.webkitIsFullScreen||e.mozFullScreen)return!1;var t=document.documentElement;t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullScreen?t.webkitRequestFullScreen():t.msRequestFullscreen&&t.msRequestFullscreen()}()}}function O(e){var t=window.LOCAL;return t&&t.toggleFullscreen?t.setAlwaysOnTop(e):Promise.resolve(!1)}function _(e){return new Promise((function(t){var n=new Image,o=document.createElement("canvas"),a=o.getContext("2d");n.src="data:image/svg+xml;base64,".concat(r.a.encode(e)),n.onload=function(){o.width=n.width,o.height=n.height,null===a||void 0===a||a.drawImage(n,0,0),o.toBlob((function(e){t(e)}),"image/png")},n.onerror=function(){t(null)}}))}var k=Object(d.b)(),x=/macintosh|mac os x/i.test(navigator.userAgent)},35:function(e,t,n){"use strict";n.d(t,"b",(function(){return s}));var o=n(19),a=n.n(o),i=n(33),r=window.LOCAL;function s(){return!!r&&r.local}t.a={get:function(e){return Object(i.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",s()?r.get(e):{status:-1});case 1:case"end":return t.stop()}}),t)})))()},put:function(e,t){return Object(i.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",s()?r.put(e):{status:-1});case 1:case"end":return t.stop()}}),t)})))()},del:function(e){return Object(i.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",s()?r.del(e):{status:-1});case 1:case"end":return t.stop()}}),t)})))()},rename:function(e){return Object(i.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",s()?r.rename(e):{status:-1});case 1:case"end":return t.stop()}}),t)})))()}}},356:function(e,t,n){},357:function(e,t,n){},358:function(e,t,n){},359:function(e,t,n){},360:function(e,t,n){},361:function(e,t,n){},37:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var o=n(1),a=n(8),i=n(7),r=n(10),s=n(9),c=n(0),d=(n(267),n(64)),l=function(e){Object(r.a)(n,e);var t=Object(s.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(i.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.icon,a=t.tip,i=t.placement,r=t.id,s=this.props.label,c=this.props.wrapClassName||"",l=this.props.selected?"selected":"",u=this.props.disabled?"disabled":"",h=this.props.onClick;return Object(o.jsxs)(o.Fragment,{children:[!!a&&Object(o.jsx)(d.a,{placement:i||"bottom",title:a,children:Object(o.jsxs)("div",{className:["bar-item",c,l,u].join(" "),onClick:function(t){h&&!e.props.disabled&&(h(t),t.stopPropagation())},children:[n,s&&Object(o.jsx)("span",{className:"bar-item__label",children:s})]})}),!a&&Object(o.jsxs)("div",{id:r,className:["bar-item",c,l,u].join(" "),onClick:function(t){h&&!e.props.disabled&&(h(t),t.stopPropagation())},children:[n,s&&Object(o.jsx)("span",{className:"bar-item__label",children:s})]})]})}}]),n}(c.Component)},429:function(e,t,n){},430:function(e,t,n){},431:function(e,t,n){},432:function(e,t,n){},433:function(e,t,n){},434:function(e,t,n){},436:function(e,t,n){},437:function(e,t,n){},438:function(e,t,n){},441:function(e,t,n){},442:function(e,t,n){},443:function(e,t,n){},444:function(e,t,n){},445:function(e,t,n){},446:function(e,t,n){},447:function(e,t,n){},448:function(e,t,n){},449:function(e,t,n){},454:function(e,t,n){"use strict";n.r(t);var o,a,i,r,s=n(1),c=n(0),d=n.n(c),l=n(30),u=n.n(l),h=(n(263),n(264),n(265),n(8)),p=n(7),f=n(10),v=n(9),m=(n(266),n(37)),b=n(476),j=n(477),g=n(475),y=(n(269),n(46)),O=n(11);!function(e){e[e.EDocsNodeTypeFile=0]="EDocsNodeTypeFile",e[e.EDocsNodeTypeFolder=1]="EDocsNodeTypeFolder"}(o||(o={})),function(e){e[e.EDocsProviderTypeMemory=0]="EDocsProviderTypeMemory",e[e.EDocsProviderTypeBrowser=1]="EDocsProviderTypeBrowser",e[e.EDocsProviderTypeLocal=2]="EDocsProviderTypeLocal",e[e.EDocsProviderTypeGitHub=3]="EDocsProviderTypeGitHub",e[e.EDocsProviderTypeGitee=4]="EDocsProviderTypeGitee"}(a||(a={})),function(e){e[e.EDocsNodeChangeTypeTitle=0]="EDocsNodeChangeTypeTitle",e[e.EDocsNodeChangeTypeContent=1]="EDocsNodeChangeTypeContent",e[e.EDocsNodeChangeTypeChildren=2]="EDocsNodeChangeTypeChildren",e[e.EDocsNodeChangeTypeRemoved=3]="EDocsNodeChangeTypeRemoved",e[e.EDocsNodeChangeTypeSaving=4]="EDocsNodeChangeTypeSaving",e[e.EDocsNodeChangeTypeLoading=5]="EDocsNodeChangeTypeLoading",e[e.EDocsNodeChangeTypeRemoving=6]="EDocsNodeChangeTypeRemoving",e[e.EDocsNodeChangeTypeChanging=7]="EDocsNodeChangeTypeChanging"}(i||(i={})),function(e){e[e.EInitResultStatusSuccess=0]="EInitResultStatusSuccess",e[e.EInitResultStatusNoBranch=1]="EInitResultStatusNoBranch",e[e.EInitResultStatusFail=2]="EInitResultStatusFail"}(r||(r={}));var _=n(19),k=n.n(_),x=n(33),N=n(118),S=n(72),T=n(54),C=n(95),D="ACTION_SET",E={content:"",title:"",cover:"",changed:!1};function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D:return Object(O.a)(Object(O.a)({},e),t.payload);default:return e}}var P,R=function(){function e(t){Object(h.a)(this,e),this._store=void 0,this._saver=void 0,this._editable=void 0,t=t||{};var n=Object(O.a)(Object(O.a)({},E),t.data);this._store=Object(T.d)(w,n,Object(T.a)(C.a)),this._saver=t.saver}return Object(p.a)(e,[{key:"setContent",value:function(e){this._store.dispatch({type:D,payload:{content:e}})}},{key:"getContent",value:function(){return this._store.getState().content}},{key:"setTitle",value:function(e){this._store.dispatch({type:D,payload:{title:e}})}},{key:"getTitle",value:function(){return this._store.getState().title}},{key:"saved",value:function(){return!1}},{key:"setSaver",value:function(e){this._saver=e}},{key:"save",value:function(){return this._saver?this._saver.save():Promise.resolve(!1)}},{key:"subscribe",value:function(e){return this._store.subscribe(e)}},{key:"setEditable",value:function(e){this._editable=e,e.setContent(this.getContent()),e.on("contentchange",(function(){}))}}]),e}();!function(e){e[e.EPlatformTypeNone=-1]="EPlatformTypeNone",e[e.EPlatformTypeBuiltin=0]="EPlatformTypeBuiltin",e[e.EPlatformTypeBrowser=1]="EPlatformTypeBrowser",e[e.EPlatformTypeLocal=2]="EPlatformTypeLocal",e[e.EPlatformTypeGeekEditor=3]="EPlatformTypeGeekEditor",e[e.EPlatformTypeGithub=4]="EPlatformTypeGithub",e[e.EPlatformTypeGitee=5]="EPlatformTypeGitee"}(P||(P={}));var I=n(116),F=n.n(I);function A(e,t,n,o){return new Promise((function(a,i){F.a.get(e,Object(O.a)({params:t,headers:Object(O.a)({},n)},o)).then((function(e){a(e)})).catch((function(e){console.log(e),a({error:e})}))}))}function M(e,t,n,o){return new Promise((function(a,i){F.a.put(e,t,Object(O.a)({headers:Object(O.a)({},n)},o)).then((function(e){a(e)})).catch((function(e){console.log(e),a({error:e})}))}))}function L(e,t,n,o){return new Promise((function(a,i){F.a.delete(e,Object(O.a)({params:Object(O.a)({},t),headers:Object(O.a)({},n)},o)).then((function(e){a(e)})).catch((function(e){console.log(e),a({error:e})}))}))}var B=function(e,t){return A("".concat("https://api.github.com","/user/repos"),{page:1,per_page:200,visibility:t||"all"},{authorization:"token ".concat(e)})},U=function(e,t){return A(e,{},{authorization:"token ".concat(t)})},H=function(e,t,n,o){return M(e,n,{authorization:"token ".concat(t)},o?{onUploadProgress:o}:{})},G=function(e,t,n){return L(e,n,{authorization:"token ".concat(t)})},W=n(25),q=n(136),z=n.n(q),K="$$_$$",V=function(){function e(t){Object(h.a)(this,e),this._repo=void 0,this._cache=void 0,this._cacheDir=void 0,this._docRootUrl=void 0,this._docsUrl=void 0,this._repo=Object(O.a)({},t.repo),this._docRootUrl="https://api.github.com/repos/".concat(this._repo.owner.login,"/").concat(this._repo.name,"/contents"),this._docsUrl="https://api.github.com/repos/".concat(this._repo.owner.login,"/").concat(this._repo.name,"/contents/geekeditor_docs"),this._cache={geekeditor_docs:{url:this._docsUrl,type:"dir",name:"geekeditor_docs",sha:"",size:0,path:"geekeditor_docs"}},this._cacheDir={}}return Object(p.a)(e,[{key:"rootID",value:function(){return"geekeditor_docs"}},{key:"init",value:function(){var e=this;return U(this._docRootUrl,this._repo.token).then((function(t){if(t.error)return e.createDir(e._docRootUrl,e._repo.token,"","geekeditor_docs",!0).then((function(e){return e?{status:r.EInitResultStatusSuccess}:{status:r.EInitResultStatusFail}}));if(t.status>=200&&t.status<=400){var n=t.data||[],o=n.findIndex((function(e){return"geekeditor_docs"===e.path}));if(-1===o||"dir"!==n[o].type)return e.createDir(e._docRootUrl,e._repo.token,"","geekeditor_docs",!0).then((function(e){return e?{status:r.EInitResultStatusSuccess}:{status:r.EInitResultStatusFail}}))}return{status:r.EInitResultStatusSuccess}}))}},{key:"queryDocs",value:function(e,t){return-1===e&&(e="geekeditor_docs"),t===o.EDocsNodeTypeFile?this.getFile(this._docRootUrl,this._repo.token,e,!0):this.getDir(this._docRootUrl,this._repo.token,e,!0)}},{key:"addDoc",value:function(e){return e.pid?e.type===o.EDocsNodeTypeFile?this.createDoc(this._docRootUrl,this._repo.token,e.pid,this.addSubfix(this.trim(e.title)),e.content||"",!0).then((function(e){return e?e.id:void 0})):this.createDir(this._docRootUrl,this._repo.token,e.pid,this.trim(e.title),!0).then((function(e){return e?e.id:void 0})):Promise.resolve(void 0)}},{key:"updateDoc",value:function(e,t){var n=this,a=e,i=e.split("/");if(t.type===o.EDocsNodeTypeFile){var r=i[i.length-1],s=this.addSubfix(this.trim(t.title));return r===s?this.updateFile(this._docRootUrl,this._repo.token,a,t.content||"",!0).then((function(e){return e?e.path:U("".concat(n._docRootUrl,"/").concat(a),n._repo.token).then((function(e){if(e.status>=200&&e.status<=400){var t=e.data;if(t)return n._cache[t.path]=t,t}})).then((function(e){if(e)return n.updateFile(n._docRootUrl,n._repo.token,a,t.content||"",!0).then((function(e){if(e)return e.path}))}))})):t.pid?this.createDoc(this._docRootUrl,this._repo.token,t.pid,s,t.content||"",!0).then((function(e){if(e)return n.deleteDoc(a,o.EDocsNodeTypeFile).then((function(){return e.id}))})):Promise.resolve(void 0)}var c=i[i.length-1],d=this._cacheDir[e],l=d?d.name.replace(/\.gedir$/,""):"",u=this.addDirSubfix("".concat(this.trim(t.title)).concat(K).concat(c));return u===l?this.updateFile(this._docRootUrl,this._repo.token,d.path,t.content||JSON.stringify({name:t.title,target:c}),!0).then((function(o){return o?e:U("".concat(n._docRootUrl,"/").concat(d.path),n._repo.token).then((function(e){if(e.status>=200&&e.status<=400){var t=e.data;if(t)return n._cache[t.path]=t,t}})).then((function(o){if(o)return n.updateFile(n._docRootUrl,n._repo.token,d.path,t.content||JSON.stringify({name:t.title,target:c}),!0).then((function(t){if(t)return e}))}))})):t.pid?this.createDoc(this._docRootUrl,this._repo.token,t.pid,u,t.content||"",!0).then((function(t){if(t&&d)return n._cacheDir[e]=t,n.deleteDoc(d.path,o.EDocsNodeTypeFile).then((function(){return e}))})):Promise.resolve(void 0)}},{key:"deleteDoc",value:function(e,t){var n=this;if(t===o.EDocsNodeTypeFile)return this.deleteFile(this._docRootUrl,this._repo.token,e).then((function(t){return t||U("".concat(n._docRootUrl,"/").concat(e),n._repo.token).then((function(e){if(e.status>=200&&e.status<=400){var t=e.data;if(t)return n._cache[t.path]=t,t}})).then((function(t){return!!t&&n.deleteFile(n._docRootUrl,n._repo.token,e).then((function(e){return e}))}))}));var a=this._cacheDir[e];return a?this.deleteDoc(a.path,o.EDocsNodeTypeFile):Promise.resolve(!1)}},{key:"trim",value:function(e){return e?e=e.replace(/\s/g,"").trim():e}},{key:"addSubfix",value:function(e){return/\.ge$/.test(e)?e:"".concat(e,".ge")}},{key:"deleteFile",value:function(e,t,n){var o=this,a=this._cache[n];return G("".concat(e,"/").concat(n),t,{message:"delete from GeekEditor",sha:a.sha}).then((function(e){return e.status>=200&&e.status<=400&&(delete o._cache[n],!0)}))}},{key:"updateFile",value:function(e,t,n,o,a){var i=this,r=this._cache[n];return H("".concat(e,"/").concat(n),t,{message:"update from GeekEditor",sha:r.sha,content:W.a.encode(o)}).then((function(e){if(e.status>=200&&e.status<=400){var t=e.data.content;if(t)return a&&(i._cache[n]=t),t}}))}},{key:"addDirSubfix",value:function(e){return/\.gedir$/.test(e)?e:"".concat(e,".gedir")}},{key:"createDir",value:function(e,t,n,a,i){var r=this,s="".concat(Date.now()).concat(z()(a)),c=this.addDirSubfix("".concat(a).concat(K).concat(s)),d=n?"".concat(n,"/").concat(c):c,l=n?"".concat(n,"/").concat(s):s;return H("".concat(e,"/").concat(l,"/__index__"),t,{message:"create from GeekEditor",content:W.a.encode("geekeditor")}).then((function(n){return n.status>=200&&n.status<=400?H("".concat(e,"/").concat(d),t,{message:"create from GeekEditor",content:W.a.encode(JSON.stringify({name:a,target:s}))}):n})).then((function(o){return o.status>=200&&o.status<=400&&i?U("".concat(e,"/").concat(n),t):o})).then((function(e){if(e.status>=200&&e.status<=400){if(i)e.data.forEach((function(e){e.path!==l&&e.path!==d||(r._cache[e.path]=e,e.path===d&&(r._cacheDir[l]=e))}));return{id:l,pid:n,title:a,type:o.EDocsNodeTypeFolder}}}))}},{key:"createDoc",value:function(e,t,n,a,i,r,s){var c=this,d="".concat(n,"/").concat(a);return H("".concat(e,"/").concat(d),t,{message:"create from GeekEditor",content:W.a.encode(i)}).then((function(e){if(e.status>=200&&e.status<=400){var t=e.data.content;if(t)return r&&(c._cache[d]=t),s?t:{id:d,pid:n,title:a,content:i,type:o.EDocsNodeTypeFile}}}))}},{key:"getFile",value:function(e,t,n,a){var i=this;return U("".concat(e,"/").concat(n),t).then((function(e){if(e.status>=200&&e.status<=400){var t=e.data;if(t){a&&(i._cache[t.path]=t);var r=n.split("/");return r.pop(),[{id:t.path,pid:r.join("/"),title:t.name.replace(/\.ge$/,""),content:W.a.decode(t.content||""),type:o.EDocsNodeTypeFile}]}}return[]}))}},{key:"getDir",value:function(e,t,n,a){var i=this;return U("".concat(e,"/").concat(n),t).then((function(e){if(e.status>=200&&e.status<=400){var t=e.data;if(t){var n=[],r=t.reduce((function(e,t){return"file"!==t.type&&(e[t.name]=t),e}),{});return t.forEach((function(e){if("__index__"!==e.name){a&&(i._cache[e.path]=e);var t=e.path.split("/");t.pop();var s=e.name;if(/\.ge$/.test(s)){var c={id:e.path,pid:t.join("/"),title:s.replace(/\.ge$/,""),type:o.EDocsNodeTypeFile};n.push(c)}else if(/\.gedir/.test(s)){var d=s.replace(/\.gedir$/,"").split(K);if(d.length>=2){var l=d[0],u=r[d[1]];if(u){var h={id:u.path,pid:t.join("/"),title:l,type:o.EDocsNodeTypeFolder};n.push(h),i._cacheDir[u.path]=e}}}}})),n.sort((function(e,t){return t.type-e.type}))}}return[]}))}},{key:"title",get:function(){return"GitHub[".concat(this._repo.name,"]")}}]),e}(),$=n(29),J="https://gitee.com/api/v5",Y=function(e,t){return A("".concat(J,"/user/repos"),{page:1,per_page:200,visibility:t||"all",access_token:e},{authorization:"token ".concat(e)})},X=function(e,t){return A(e,{access_token:t},{authorization:"token ".concat(t)})},Z=function(e,t,n,o){return n.sha?M(e,Object(O.a)(Object(O.a)({},n),{},{access_token:t}),{authorization:"token ".concat(t)},o?{onUploadProgress:o}:{}):function(e,t,n,o){return new Promise((function(a,i){F.a.post(e,t,Object(O.a)({headers:Object(O.a)({},n)},o)).then((function(e){a(e)})).catch((function(e){console.log(e),a({error:e})}))}))}(e,Object(O.a)(Object(O.a)({},n),{},{access_token:t}),{authorization:"token ".concat(t)},o?{onUploadProgress:o}:{})},Q=function(e,t,n){return L(Object($.a)(e,{access_token:t}),Object(O.a)({},n),{authorization:"token ".concat(t)})},ee="$$_$$",te=function(){function e(t){Object(h.a)(this,e),this._repo=void 0,this._cache=void 0,this._cacheDir=void 0,this._docRootUrl=void 0,this._docRootBranches=void 0,this._docsUrl=void 0,this._repo=Object(O.a)({},t.repo),this._docRootBranches="".concat(J,"/repos/").concat(this._repo.owner.login,"/").concat(this._repo.path,"/branches"),this._docRootUrl="".concat(J,"/repos/").concat(this._repo.owner.login,"/").concat(this._repo.path,"/contents"),this._docsUrl="".concat(J,"/repos/").concat(this._repo.owner.login,"/").concat(this._repo.path,"/contents/geekeditor_docs"),this._cache={geekeditor_docs:{url:this._docsUrl,type:"dir",name:"geekeditor_docs",sha:"",size:0,path:"geekeditor_docs"}},this._cacheDir={}}return Object(p.a)(e,[{key:"rootID",value:function(){return"geekeditor_docs"}},{key:"init",value:function(){var e=this;return X(this._docRootUrl,this._repo.token).then((function(t){if(t.error)return t.data&&"Branch"===t.data.message?{status:r.EInitResultStatusNoBranch}:e.createDir(e._docRootUrl,e._repo.token,"","geekeditor_docs",!0).then((function(e){return e?{status:r.EInitResultStatusSuccess}:{status:r.EInitResultStatusFail}}));if(t.status>=200&&t.status<=400){var n=t.data||[],o=n.findIndex((function(e){return"geekeditor_docs"===e.path}));if(-1===o||"dir"!==n[o].type)return e.createDir(e._docRootUrl,e._repo.token,"","geekeditor_docs",!0).then((function(e){return e?{status:r.EInitResultStatusSuccess}:{status:r.EInitResultStatusFail}}))}return{status:r.EInitResultStatusSuccess}}))}},{key:"queryDocs",value:function(e,t){return-1===e&&(e="geekeditor_docs"),t===o.EDocsNodeTypeFile?this.getFile(this._docRootUrl,this._repo.token,e,!0):this.getDir(this._docRootUrl,this._repo.token,e,!0)}},{key:"addDoc",value:function(e){return e.pid?e.type===o.EDocsNodeTypeFile?this.createDoc(this._docRootUrl,this._repo.token,e.pid,this.addSubfix(this.trim(e.title)),e.content||" ",!0).then((function(e){return e?e.id:void 0})):this.createDir(this._docRootUrl,this._repo.token,e.pid,this.trim(e.title),!0).then((function(e){return e?e.id:void 0})):Promise.resolve(void 0)}},{key:"updateDoc",value:function(e,t){var n=this,a=e,i=e.split("/");if(t.type===o.EDocsNodeTypeFile){var r=i[i.length-1],s=this.addSubfix(this.trim(t.title));return r===s?this.updateFile(this._docRootUrl,this._repo.token,a,t.content||"",!0).then((function(e){return e?e.path:X("".concat(n._docRootUrl,"/").concat(a),n._repo.token).then((function(e){if(e.status>=200&&e.status<=400){var t=e.data;if(t)return n._cache[t.path]=t,t}})).then((function(e){if(e)return n.updateFile(n._docRootUrl,n._repo.token,a,t.content||"",!0).then((function(e){if(e)return e.path}))}))})):t.pid?this.createDoc(this._docRootUrl,this._repo.token,t.pid,s,t.content||"",!0).then((function(e){if(e)return n.deleteDoc(a,o.EDocsNodeTypeFile).then((function(){return e.id}))})):Promise.resolve(void 0)}var c=i[i.length-1],d=this._cacheDir[e],l=d?d.name.replace(/\.gedir$/,""):"",u=this.addDirSubfix("".concat(this.trim(t.title)).concat(ee).concat(c));return u===l?this.updateFile(this._docRootUrl,this._repo.token,d.path,t.content||JSON.stringify({name:t.title,target:c}),!0).then((function(o){return o?e:X("".concat(n._docRootUrl,"/").concat(d.path),n._repo.token).then((function(e){if(e.status>=200&&e.status<=400){var t=e.data;if(t)return n._cache[t.path]=t,t}})).then((function(o){if(o)return n.updateFile(n._docRootUrl,n._repo.token,d.path,t.content||JSON.stringify({name:t.title,target:c}),!0).then((function(t){if(t)return e}))}))})):t.pid?this.createDoc(this._docRootUrl,this._repo.token,t.pid,u,t.content||"",!0).then((function(t){if(t&&d)return n._cacheDir[e]=t,n.deleteDoc(d.path,o.EDocsNodeTypeFile).then((function(){return e}))})):Promise.resolve(void 0)}},{key:"deleteDoc",value:function(e,t){var n=this;if(t===o.EDocsNodeTypeFile)return this.deleteFile(this._docRootUrl,this._repo.token,e).then((function(t){return t||X("".concat(n._docRootUrl,"/").concat(e),n._repo.token).then((function(e){if(e.status>=200&&e.status<=400){var t=e.data;if(t)return n._cache[t.path]=t,t}})).then((function(t){return!!t&&n.deleteFile(n._docRootUrl,n._repo.token,e).then((function(e){return e}))}))}));var a=this._cacheDir[e];return a?this.deleteDoc(a.path,o.EDocsNodeTypeFile):Promise.resolve(!1)}},{key:"trim",value:function(e){return e?e=e.replace(/\s/g,"").trim():e}},{key:"addSubfix",value:function(e){return/\.ge$/.test(e)?e:"".concat(e,".ge")}},{key:"deleteFile",value:function(e,t,n){var o=this,a=this._cache[n];return Q("".concat(e,"/").concat(n),t,{message:"delete from GeekEditor",sha:a.sha}).then((function(e){return e.status>=200&&e.status<=400&&(delete o._cache[n],!0)}))}},{key:"updateFile",value:function(e,t,n,o,a){var i=this,r=this._cache[n];return Z("".concat(e,"/").concat(n),t,{message:"update from GeekEditor",sha:r.sha,content:W.a.encode(o)}).then((function(e){if(e.status>=200&&e.status<=400){var t=e.data.content;if(t)return a&&(i._cache[n]=t),t}}))}},{key:"addDirSubfix",value:function(e){return/\.gedir$/.test(e)?e:"".concat(e,".gedir")}},{key:"createDir",value:function(e,t,n,a,i){var r=this,s="".concat(Date.now()).concat(z()(a)),c=this.addDirSubfix("".concat(a).concat(ee).concat(s)),d=n?"".concat(n,"/").concat(c):c,l=n?"".concat(n,"/").concat(s):s;return Z("".concat(e,"/").concat(l,"/__index__"),t,{message:"create from GeekEditor",content:W.a.encode("geekeditor")}).then((function(n){return n.status>=200&&n.status<=400?Z("".concat(e,"/").concat(d),t,{message:"create from GeekEditor",content:W.a.encode(JSON.stringify({name:a,target:s}))}):n})).then((function(o){return o.status>=200&&o.status<=400&&i?X("".concat(e,"/").concat(n),t):o})).then((function(e){if(e.status>=200&&e.status<=400){if(i)e.data.forEach((function(e){e.path!==l&&e.path!==d||(r._cache[e.path]=e,e.path===d&&(r._cacheDir[l]=e))}));return{id:l,pid:n,title:a,type:o.EDocsNodeTypeFolder}}}))}},{key:"createDoc",value:function(e,t,n,a,i,r,s){var c=this,d="".concat(n,"/").concat(a);return Z("".concat(e,"/").concat(d),t,{message:"create from GeekEditor",content:W.a.encode(i)}).then((function(e){if(e.status>=200&&e.status<=400){var t=e.data.content;if(t)return r&&(c._cache[d]=t),s?t:{id:d,pid:n,title:a,content:i,type:o.EDocsNodeTypeFile}}}))}},{key:"getFile",value:function(e,t,n,a){var i=this;return X("".concat(e,"/").concat(n),t).then((function(e){if(e.status>=200&&e.status<=400){var t=e.data;if(t){a&&(i._cache[t.path]=t);var r=n.split("/");return r.pop(),[{id:t.path,pid:r.join("/"),title:t.name.replace(/\.ge$/,""),content:W.a.decode(t.content||""),type:o.EDocsNodeTypeFile}]}}return[]}))}},{key:"getDir",value:function(e,t,n,a){var i=this;return X("".concat(e,"/").concat(n),t).then((function(e){if(e.status>=200&&e.status<=400){var t=e.data;if(t){var n=[],r=t.reduce((function(e,t){return"file"!==t.type&&(e[t.name]=t),e}),{});return t.forEach((function(e){if("__index__"!==e.name){a&&(i._cache[e.path]=e);var t=e.path.split("/");t.pop();var s=e.name;if(/\.ge$/.test(s)){var c={id:e.path,pid:t.join("/"),title:s.replace(/\.ge$/,""),type:o.EDocsNodeTypeFile};n.push(c)}else if(/\.gedir/.test(s)){var d=s.replace(/\.gedir$/,"").split(ee);if(d.length>=2){var l=d[0],u=r[d[1]];if(u){var h={id:u.path,pid:t.join("/"),title:l,type:o.EDocsNodeTypeFolder};n.push(h),i._cacheDir[u.path]=e}}}}})),n.sort((function(e,t){return t.type-e.type}))}}return[]}))}},{key:"title",get:function(){return"Gitee[".concat(this._repo.name,"]")}}]),e}(),ne=n(80),oe=function(){function e(t){Object(h.a)(this,e),this._options=void 0,this._database=void 0,this._dbName=void 0,this._version=void 0,this._onUpgrade=void 0,this._dbName=t.dbName,this._version=t.version,this._onUpgrade=t.onUpgrade}return Object(p.a)(e,[{key:"open",value:function(){var e=this;return new Promise((function(t,n){if(e._database)t(e._database);else{var o=indexedDB.open(e._dbName,e._version);o.onsuccess=function(){e._database=o.result,t(e._database)},o.onerror=function(){n(o.error)},o.onupgradeneeded=function(){e._onUpgrade(o.result,e._version)}}}))}},{key:"close",value:function(){this._database&&this._database.close()}},{key:"doAction",value:function(e){var t=this;return new Promise((function(n,o){t.open().then((function(t){e(t,n,o)})).catch((function(e){o(e)}))}))}},{key:"queryAll",value:function(e,t){return this.doAction((function(n,o,a){var i=n.transaction([e],"readonly").objectStore(e).openCursor(),r=[];i.onerror=function(){a(i.error)},i.onsuccess=function(e){var n=e.target.result;n?(t?t(n.value)&&r.push(n.value):r.push(n.value),n.continue()):o(r)}}))}},{key:"query",value:function(e,t){return this.doAction((function(n,o,a){var i=n.transaction([t],"readonly").objectStore(t).get(e);i.onerror=function(){a(i.error)},i.onsuccess=function(e){var t=e.target.result;o(t)}}))}},{key:"add",value:function(e,t){return this.doAction((function(n,o,a){var i=n.transaction([t],"readwrite").objectStore(t).add(e);i.onsuccess=function(e){o(e.target.result)},i.onerror=function(){a(i.error)}}))}},{key:"del",value:function(e,t){return this.doAction((function(n,o,a){var i=n.transaction([t],"readwrite").objectStore(t).delete(e);i.onsuccess=function(e){o(e.target.result)},i.onerror=function(){a(i.error)}}))}},{key:"update",value:function(e,t,n){return this.doAction((function(n,o,a){var i=n.transaction([t],"readwrite").objectStore(t).put(e);i.onsuccess=function(e){o(e.target.result)},i.onerror=function(){a(i.error)}}))}}]),e}(),ae=function(){function e(t){var n=this;Object(h.a)(this,e),this._db=void 0,this._docsStoreName=void 0,this._contentsStoreName=void 0,this._token=void 0,this._db=new oe({dbName:"GeekEditorBuiltinDB",version:1,onUpgrade:function(e,t){n.upgradeDatabase(e,t)}}),this._docsStoreName="BuiltinDocs",this._contentsStoreName="BuiltinContents",this._token=t.token||"",this._db.open().then((function(e){n.setDefaultDocs()})).catch((function(e){}))}return Object(p.a)(e,[{key:"upgradeDatabase",value:function(e,t){var n;e.objectStoreNames.contains(this._docsStoreName)||((n=e.createObjectStore(this._docsStoreName,{keyPath:"id",autoIncrement:!0})).createIndex("idIndex","id",{unique:!0}),n.createIndex("titleIndex","title"));e.objectStoreNames.contains(this._contentsStoreName)||(n=e.createObjectStore(this._contentsStoreName,{keyPath:"doc_id"})).createIndex("docIdIndex","doc_id",{unique:!0})}},{key:"init",value:function(){return Promise.resolve({status:r.EInitResultStatusSuccess})}},{key:"rootID",value:function(){return-1}},{key:"queryDocs",value:function(e,t){var n=this;return t===o.EDocsNodeTypeFile?Promise.all([this._db.query(e,this._docsStoreName),this._db.query(e,this._contentsStoreName)]).then((function(e){var t={};return Object.assign(t,e[0],{content:W.a.decode(e[1]&&e[1].content||"")}),[t]})):this._db.queryAll(this._docsStoreName,(function(t){return t.pid===e&&n._token===t.token})).then((function(e){return e.reverse()}))}},{key:"addDoc",value:function(e){var t=this,n=e.content,a=Object(ne.a)(e,["content"]);return this._db.add(Object(O.a)(Object(O.a)({},a),{},{token:this._token}),this._docsStoreName).then((function(a){return e.type===o.EDocsNodeTypeFile?t._db.update({doc_id:a,content:W.a.encode(n||"")},t._contentsStoreName):a})).then((function(e){return e}))}},{key:"updateDoc",value:function(e,t){var n=this,a=t.content,i=Object(ne.a)(t,["content"]);return this._db.update(Object(O.a)(Object(O.a)({},i),{},{token:this._token}),this._docsStoreName,e).then((function(i){return t.type===o.EDocsNodeTypeFile?!!i&&n._db.update({doc_id:e,content:W.a.encode(a||"")},n._contentsStoreName):!!i})).then((function(t){return t?e:void 0}))}},{key:"deleteDoc",value:function(e,t){var n=this;return t===o.EDocsNodeTypeFolder&&this.queryDocs(e,o.EDocsNodeTypeFolder).then((function(e){e.forEach((function(e){n._db.del(e.id,n._docsStoreName).then((function(){return n._db.del(e.id,n._contentsStoreName)})).then((function(){return!0}))}))})),this._db.del(e,this._docsStoreName).then((function(){return n._db.del(e,n._contentsStoreName)})).then((function(){return!0}))}},{key:"setDefaultDocs",value:function(){var e=Object(x.a)(k.a.mark((function e(){var t,n=this;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=function(e,t){return{token:n._token,id:e,pid:-1,title:t,type:0}},this._db.update(t(1,"\u81f4\u5199\u4f5c\u8005"),this._docsStoreName,1),this._db.update({doc_id:1,content:W.a.encode(this.letter)},this._contentsStoreName),this._db.update(t(2,"\u65b0\u624b\u6559\u7a0b"),this._docsStoreName,2),this._db.update({doc_id:2,content:W.a.encode(this.instructions)},this._contentsStoreName),this._db.update(t(3,"$$"),this._docsStoreName,3),this._db.update({doc_id:3,content:W.a.encode(this.instructions)},this._contentsStoreName),this.deleteDoc(3,o.EDocsNodeTypeFile);case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"title",get:function(){return"\u793a\u4f8b\u6587\u6863"}},{key:"instructions",get:function(){return'{"content":[{"key":"header","data":{"level":1,"content":"\u6781\u5ba2\u7f16\u8f91\u5668 GeekEditor \u65b0\u624b\u6559\u7a0b"},"common":{}},{"key":"paragraph","data":{"content":"<strong>\u6781\u5ba2\u7f16\u8f91\u5668</strong>\u662f\u4e00\u4e2a\u6240\u89c1\u5373\u6240\u5f97\uff08WYSIWYG\uff09\u5bcc\u6587\u672c\u6c89\u6d78\u5f0f\u6548\u7387\u5199\u4f5c\u7f16\u8f91\u5668\uff0c\u5b83\u6ce8\u91cd\u9ad8\u6548\u521b\u4f5c\uff0c\u53ef\u591a\u5f00\u6587\u6863\u7f16\u8f91\uff0c\u540c\u65f6\u652f\u6301Markdown\u8bed\u6cd5\u8f93\u5165\u3002\u5b83\u91cd\u89c6\u5199\u4f5c\u8005\u5185\u5bb9\u9690\u79c1\u53ca\u6570\u636e\u5b89\u5168\uff0c\u76ee\u524d\u5df2\u652f\u6301\u6d4f\u89c8\u5668\u672c\u5730\u3001Github\u53caGitee\u4ed3\u5e93\u6587\u6863\u5b58\u50a8\uff0c\u652f\u6301Github\u3001Gitee\u4ed3\u5e93\u56fe\u7247\u8d44\u6e90\u5b58\u50a8\u3002"},"common":{"quote":true}},{"key":"paragraph","data":{"content":"\u5f53\u524d\uff0c\u7f16\u8f91\u5668\u9664\u4e86\u652f\u6301\u5e38\u7528\u5185\u5bb9\u5757\u5916\uff0c\u5e76\u652f\u6301\u4e86\u4ee3\u7801\u5757\u3001LaTex\u6570\u5b66\u516c\u5f0f\u3001Mermaid\u56fe\u8868\u3001Drawio\u5236\u56fe\uff0c\u53ef\u4ee5<strong>\u4e00\u952e\u590d\u5236/\u540c\u6b65\u5230\u5fae\u4fe1\u516c\u4f17\u53f7\u3001\u77e5\u4e4e\u53ca\u6398\u91d1</strong>\u7b49\u5e73\u53f0\u53d1\u5e03\u3002\u6b64\u5916\uff0c\u7f16\u8f91\u5668\u652f\u6301\u4e86\u622a\u56fe\u7c98\u8d34\u4ee5\u53ca\u672c\u5730\u56fe\u7247\u6587\u4ef6\u62d6\u62fd\u81f3\u7f16\u8f91\u533a\u4efb\u610f\u4f4d\u7f6e\u7b49\u4fbf\u6377\u529f\u80fd\u3002"},"common":{"quote":true}},{"key":"paragraph","data":{"content":"<strong>\u5728\u7ebf\u7248</strong>\uff1a<a href=\\"https://www.geekeditor.com/\\">https://www.geekeditor.com</a>"},"common":{"quote":true}},{"key":"paragraph","data":{"content":"<strong>\u684c\u9762\u8f6f\u4ef6\u4e0b\u8f7d</strong>\uff1a<a href=\\"https://github.com/geekeditor/geekeditor-releases/releases\\">https://github.com/geekeditor/geekeditor-releases/releases</a>"},"common":{"quote":true}},{"key":"paragraph","data":{"content":"<strong>\u6d4f\u89c8\u5668\u63d2\u4ef6</strong>\uff1a\u5f00\u53d1\u4e2d"},"common":{"quote":true}},{"key":"paragraph","data":{"content":"\u5386\u53f2\u7248\u672c\u8bb0\u5f55\uff1a<a href=\\"https://github.com/geekeditor/geekeditor-releases/blob/main/versions.md\\">https://github.com/geekeditor/geekeditor-releases/blob/main/versions.md</a>"},"common":{}},{"key":"paragraph","data":{"content":"Issues\uff1a<a href=\\"https://github.com/geekeditor/geekeditor-releases/issues\\">https://github.com/geekeditor/geekeditor-releases/issues</a>"},"common":{}},{"key":"header","data":{"level":2,"content":"\u529f\u80fd\u7279\u5f81"},"common":{}},{"key":"todolist","data":{"items":[{"content":"<strong>\u884c\u5185\u683c\u5f0f</strong>\uff1a<strong>\u52a0\u7c97</strong>\u3001\u659c\u4f53\u3001<u>\u4e0b\u5212\u7ebf</u>\u3001<s>\u5220\u9664\u7ebf</s>\u3001<a href=\\"https://www.geekeditor.com\\">\u8d85\u94fe\u63a5</a>\u3001<mark>\u6807\u8bb0</mark>\u3001<code>\u884c\u5185\u4ee3\u7801</code>\u3001<sup>\u4e0a\u6807</sup>\u3001<sub>\u4e0b\u6807</sub>\uff0c\u5747\u652f\u6301\u5feb\u6377\u952e\u64cd\u4f5c","checked":true},{"content":"<strong>\u6807\u9898</strong>\uff1a1~6\u7ea7\u6807\u9898","checked":true},{"content":"<strong>\u56fe\u7247</strong>\uff1a\u4e0a\u4f20\u81f3Github/Gitee\u4ed3\u5e93\uff0c\u652f\u6301\u8bbe\u7f6e\u6807\u9898\uff0c\u652f\u6301\u56fe\u7247\u7f16\u8f91\u7f8e\u5316\uff0c\u652f\u6301\u62d6\u62fd\u672c\u5730\u56fe\u7247\u6587\u4ef6\u5230\u7f16\u8f91\u533a\uff08\u53ef\u81ea\u7531\u9009\u62e9\u4f4d\u7f6e\uff09\uff0c\u652f\u6301\u7c98\u8d34\u5176\u5b83\u8f6f\u4ef6\u622a\u56fe","checked":true},{"content":"<strong>\u6709\u5e8f\u5217\u8868/\u65e0\u5e8f\u5217\u8868</strong>\uff1a\u652f\u6301\u4e24\u8005\u4e4b\u95f4\u7684\u5feb\u6377\u8f6c\u6362","checked":true},{"content":"<strong>\u5f85\u529e\u4e8b\u9879</strong>\uff1a\u652f\u6301\u4e0e\u6709\u5e8f\u5217\u8868/\u65e0\u5e8f\u5217\u8868\u4e4b\u95f4\u8f6c\u6362","checked":true},{"content":"<strong>\u8868\u683c</strong>\uff1a\u652f\u6301\u8868\u683c\u884c\u5217\u5feb\u6377\u65b0\u589e\u53ca\u5220\u9664","checked":true},{"content":"<strong>\u4ee3\u7801\u5757</strong>\uff1a\u652f\u6301\u5e38\u89c1\u4ee3\u7801\u8bed\u8a00\u81ea\u52a8\u8bc6\u522b\u53ca\u9ad8\u4eae\u663e\u793a","checked":true},{"content":"<strong>\u5206\u5272\u7ebf</strong>","checked":true},{"content":"<strong>\u6570\u5b66\u516c\u5f0f</strong>\uff1a\u652f\u6301Tex\u884c\u5185\u516c\u5f0f\u53ca\u5757\u516c\u5f0f\u5feb\u6377\u7f16\u5199","checked":true},{"content":"<strong>Mermaid \u56fe\u8868</strong>\uff1a\u652f\u6301Mermaid\u8bed\u6cd5\u7f16\u5199","checked":true},{"content":"<strong>Drawio \u5236\u56fe</strong>\uff1a\u5185\u7f6e\u4e86Drawio\u5236\u56fe\u5de5\u5177\uff0c\u652f\u6301\u6d41\u7a0b\u56fe\u3001UML\u7b49\u5236\u56fe","checked":true},{"content":"<strong>\u4e3b\u9898\u6392\u7248</strong>\uff1a\u5185\u7f6e5\u4e2a\u4e3b\u9898\uff0c\u5e76\u652f\u6301\u81ea\u5b9a\u4e49\u7f16\u5199\u4e3b\u9898\u98ce\u683c","checked":true},{"content":"<strong>\u53d1\u5e03</strong>\uff1a\u652f\u6301\u590d\u5236\u53d1\u5e03\u5230\u5fae\u4fe1\u516c\u4f17\u53f7\u3001\u77e5\u4e4e\u3001\u6398\u91d1\u5e73\u53f0\uff0c\u652f\u6301\u590d\u5236\u4e3aHTML\u3001Markdown\u53ca\u7eaf\u6587\u672c","checked":true}]},"common":{}},{"key":"header","data":{"level":2,"content":"\u57fa\u672c\u64cd\u4f5c"},"common":{}},{"key":"list","data":{"style":"unordered","items":[{"content":"<strong>\u63d2\u5165\u5185\u5bb9\u5757</strong>","style":"unordered","closed":false,"items":[{"content":"\u65b0\u589e\u7a7a\u884c","style":"unordered","closed":false,"items":[{"content":"\u5728\u6587\u5b57\u6bb5\u843d\u540e\u65b0\u589e\uff1a\u6309Enter\u952e","style":"unordered","closed":false,"items":[]},{"content":"\u5728\u56fe\u7247/\u516c\u5f0f/\u56fe\u8868\u540e\u65b0\u589e\uff1a\u6309Command/Ctrl + Enter\u952e","style":"unordered","closed":false,"items":[]}]},{"content":"\u65b0\u589e\u5176\u5b83\u5185\u5bb9\u5757","style":"unordered","closed":false,"items":[{"content":"\u5728\u7a7a\u884c\uff0c\u6309Tab\u952e\u5f39\u51fa\u5de5\u5177\u680f\uff0c\u6309\u5de6\u3001\u53f3\u65b9\u5411\u952e(\u2190/\u2192\u952e)\u9009\u62e9\u8981\u65b0\u589e\u7c7b\u578b\uff0c\u6309Enter\u952e(\u6216\u9f20\u6807\u70b9\u51fb\u64cd\u4f5c)\u65b0\u5efa","style":"unordered","closed":false,"items":[]},{"content":"\u5728\u7a7a\u884c\uff0c\u8f93\u5165Markdown\u8bed\u6cd5\uff0c\u6309Enter(\u6216Option/Alt)\u952e\u65b0\u5efa","style":"unordered","closed":false,"items":[]}]}]},{"content":"<strong>\u63d2\u5165\u884c\u5185\u6570\u5b66\u516c\u5f0f</strong><strong>\uff1a</strong>\u5728\u5149\u6807\u5904\uff0c\u6309Insert\u952e\u5f39\u51fa\u6570\u5b66\u516c\u5f0f\u7f16\u5199\u6846","style":"unordered","closed":false,"items":[]},{"content":"<strong>\u884c\u5185\u6587\u5b57\u683c\u5f0f\u5316</strong>\uff1a","style":"unordered","closed":false,"items":[{"content":"\u9009\u4e2d\u6587\u5b57\uff0c\u5c06\u5f39\u51fa\u5de5\u5177\u680f\uff0c\u6309\u5de6\u3001\u53f3\u65b9\u5411\u952e(\u2190/\u2192\u952e)\u9009\u62e9\u8981\u683c\u5f0f\u5316\u7684\u7c7b\u578b\uff0c\u6309Enter\u952e(\u6216\u9f20\u6807\u70b9\u51fb\u64cd\u4f5c)\u786e\u8ba4","style":"unordered","closed":false,"items":[]},{"content":"\u6309\u4e0a\u3001\u4e0b\u65b9\u5411\u952e(\u2191\u2193)\u6216Esc\u952e\uff0c\u53d6\u6d88\u6587\u5b57\u9009\u4e2d\u53ca\u9690\u85cf\u5de5\u5177\u680f","style":"unordered","closed":false,"items":[]},{"content":"\u5feb\u6377\u952e\u64cd\u4f5c\uff0c\u8bf7\u70b9\u51fb\u7f16\u8f91\u5668\u53f3\u4e0a\u89d2\u2022\u2022\u2022\u6309\u94ae\u67e5\u770b","style":"unordered","closed":false,"items":[]}]}]},"common":{}},{"key":"header","data":{"level":2,"content":"Markdown\u8bed\u6cd5"},"common":{}},{"key":"list","data":{"style":"ordered","items":[{"content":"<strong>\u6807\u9898</strong>\uff08<code>#~#######</code>\uff1a\u4e00\u7ea7~\u516d\u7ea7\u6807\u9898\uff09","style":"unordered","closed":false,"items":[{"content":"\u7a7a\u4e8c\u7ea7\u6807\u9898\uff1a<code>##</code>","style":"unordered","closed":false,"items":[]},{"content":"\u5e26\u5185\u5bb9\u4e8c\u7ea7\u6807\u9898\uff1a<code>##\u6807\u9898</code>","style":"unordered","closed":false,"items":[]}]},{"content":"<strong>\u56fe\u7247</strong>","style":"unordered","closed":false,"items":[{"content":"\u7a7a\u56fe\u7247\u5185\u5bb9\u5757\uff1a<code>\uff01</code>","style":"unordered","closed":false,"items":[]},{"content":"\u6807\u9898\u4e0d\u4e3a\u7a7a\u7684\u56fe\u7247\u5185\u5bb9\u5757\uff1a<code>!(\u6807\u9898)</code>","style":"unordered","closed":false,"items":[]},{"content":"\u6807\u9898\u53ca\u56fe\u7247\u90fd\u4e0d\u4e3a\u7a7a\u7684\u56fe\u7247\u5185\u5bb9\u5757\uff1a<code>!(\u6807\u9898)[https://cdn.jsdelivr.net/gh/montisan/imagehosting/geekeditor_images/2021-7-12/1626067390603-qrcode_for_geekeditor.jpg]</code>","style":"unordered","closed":false,"items":[]}]},{"content":"<strong>\u5217\u8868</strong>","style":"unordered","closed":false,"items":[{"content":"\u6709\u5e8f\u5217\u8868\uff1a<code>1.</code>","style":"unordered","closed":false,"items":[]},{"content":"\u65e0\u5e8f\u5217\u8868\uff1a<code>-</code>","style":"unordered","closed":false,"items":[]}]},{"content":"<strong>\u5f85\u529e\u4e8b\u9879</strong>\uff1a<code>-[]</code>","style":"unordered","closed":false,"items":[]},{"content":"<strong>\u5206\u5272\u7ebf</strong>\uff1a<code>---</code>","style":"unordered","closed":false,"items":[]},{"content":"<strong>\u8868\u683c</strong>\uff1a<code>||</code>","style":"unordered","closed":false,"items":[]},{"content":"<strong>\u6570\u5b66\u516c\u5f0f</strong>\uff1a<code>$$</code>","style":"unordered","closed":false,"items":[]},{"content":"<strong>\u4ee3\u7801\u5757</strong>\uff1a<code>```</code>","style":"unordered","closed":false,"items":[]},{"content":"<strong>Mermaid\u56fe\u8868</strong>\uff1a<code>`mermaid</code>","style":"unordered","closed":false,"items":[]},{"content":"<strong>Drawio\u5236\u56fe</strong>\uff1a<code>`drawio</code>","style":"unordered","closed":false,"items":[]}]},"common":{}},{"key":"header","data":{"level":2,"content":"\u4e2a\u4eba\u6570\u636e"},"common":{}},{"key":"list","data":{"style":"unordered","items":[{"content":"\u6240\u6709\u7684\u6587\u6863\u6570\u636e\u90fd\u4fdd\u5b58\u5728\u672c\u5730\u6216\u8005\u4e2a\u4eba\u4ed3\u5e93(Github/Gitee\u7b49)\uff0c\u5f53\u524d\u7f16\u8f91\u5668\u4e0d\u4e91\u5b58\u50a8\u4efb\u4f55\u6570\u636e\u3002","style":"unordered","closed":false,"items":[]}]},"common":{}},{"key":"list","data":{"style":"unordered","items":[{"content":"\u6570\u636e\u5b58\u50a8\u4f7f\u7528\u4e86JSON\u7eaf\u6587\u672c\u683c\u5f0f\uff0c\u672a\u6765\u5c06\u5f00\u6e90\u6838\u5fc3\u4ee3\u7801\uff0c\u63d0\u6d4f\u89c8\u89e3\u6790\u4ed3\u5e93\u91cc\u9762\u7684\u6587\u6863\uff0c\u652f\u6301\u590d\u5236\u3001\u5bfc\u51faHTML\u3001Markdown\u7b49\u683c\u5f0f\u6587\u672c\u3002","style":"unordered","closed":false,"items":[]}]},"common":{}},{"key":"header","data":{"level":2,"content":"\u4ed3\u5e93\u5b58\u50a8"},"common":{}},{"key":"paragraph","data":{"content":"<strong>\u793a\u4f8b\u6587\u6863</strong>"},"common":{}},{"key":"paragraph","data":{"content":"\u5982\u60a8\u6240\u89c1\uff0c\u521d\u6b21\u6253\u5f00\u7f16\u8f91\u5668\u65f6\uff0c\u5c31\u6709\u4e86\u4e00\u4e2a\u9ed8\u8ba4\u793a\u4f8b\u6587\u6863\u3002\u793a\u4f8b\u6587\u6863\uff08\u56fe\u5e8a\u914d\u7f6e\u4e86Github\u4ed3\u5e93\uff09\u7684\u76ee\u7684\u662f\u4e3a\u4e86\u8ba9\u5199\u4f5c\u8005\u521d\u6b21\u8fdb\u5165\u65f6\uff0c\u5c31\u53ef\u4ee5\u4f53\u9a8c\u7f16\u8f91\u5668\u5199\u4f5c\u3002<mark>\u5207\u8bb0</mark>\uff1a\u5982\u679c\u60a8\u5728\u4f53\u9a8c\u4e4b\u540e\uff0c\u51b3\u5b9a\u6b63\u5f0f\u4f7f\u7528\u7f16\u8f91\u5668\u6765\u8fdb\u884c\u5199\u4f5c\uff0c\u90a3\u4e48\uff0c\u8bf7\u60a8\u914d\u7f6e\u72ec\u7acb\u7684\u6587\u6863\u4ed3\u5e93\u53ca\u56fe\u5e8a\u540e\u518d\u8fdb\u884c\u5199\u4f5c\u3002\u793a\u4f8b\u6587\u6863\u53ef\u4ee5\u5728\u8bbe\u7f6e\u4e2d\u5173\u95ed\u663e\u793a\u3002"},"common":{}},{"key":"paragraph","data":{"content":"\u6e29\u99a8\u63d0\u793a\uff1a\u5728\u793a\u4f8b\u6587\u6863\u91cc\u7f16\u8f91\u7684\u6587\u6863\uff0c<code>\u5982\u679c\u4e0a\u4f20\u4e86\u56fe\u7247\uff0c\u56fe\u7247\u53ef\u80fd\u968f\u65f6\u4f1a\u88ab\u6e05\u9664</code>\uff1b\u793a\u4f8b\u6587\u6863\u4e2d\u9ed8\u8ba4\u5185\u7f6e\u7684\u4e09\u4e2a\u6587\u6863\uff0c\u5982\u88ab\u4fee\u6539\uff0c\u5c06\u5728\u9875\u9762\u5237\u65b0\u540e\u88ab\u91cd\u7f6e\u3002"},"common":{}},{"key":"paragraph","data":{"content":"<strong>\u914d\u7f6e\u4ed3\u5e93</strong>"},"common":{}},{"key":"paragraph","data":{"content":"\u5728\u5de6\u4e0b\u89d2\u201c\u8bbe\u7f6e\u201d\u4e2d\u53ef\u4ee5\u914d\u7f6e\u5b58\u50a8\u4ed3\u5e93\uff0c\u65b0\u6dfb\u52a0\u65f6\uff0c\u9700\u8981\u914d\u7f6e\u4e24\u4e2a\u4ed3\u5e93\uff1a\u4e00\u4e2a\u6587\u6863\u5b58\u50a8\u4ed3\u5e93\uff0c\u4e00\u4e2a\u6587\u6863\u5bf9\u5e94\u7684\u56fe\u5e8a\u4ed3\u5e93\u3002\u76ee\u524d\uff0c\u6587\u6863\u652f\u6301\u5b58\u50a8\u5728\u6d4f\u89c8\u5668\u672c\u5730\u3001Github\u53caGitee\uff0c\u56fe\u7247\u652f\u6301\u5b58\u50a8\u5728Github\u53caGitee\uff08\u56fd\u5185\u63a8\u8350\uff09\u3002<code>\u6587\u6863\u4ed3\u5e93\u53ef\u8bbe\u7f6e\u516c\u5f00\u6216\u79c1\u6709\u4ed3\u5e93\uff0c\u5efa\u8bae\u4f7f\u7528\u79c1\u6709\u4ed3\u5e93\uff1b\u56fe\u5e8a\u5fc5\u987b\u4f7f\u7528\u516c\u5f00\u4ed3\u5e93</code>\u3002Github\u548cGitee\u5747\u4f7f\u7528Access Token\u7684\u65b9\u5f0f\u5b58\u53d6\uff0c\u56e0\u6b64\uff0c\u9700\u8981\u60a8\u6ce8\u518c\u597dGithub\u8d26\u6237\u6216Gitee\u8d26\u6237\uff0c\u5e76\u5728\u5e73\u53f0\u8bbe\u7f6e\u91cc\u521b\u5efa\u597d\u53ef\u4ee5\u8bbf\u95ee\u4ed3\u5e93\u7684AccessToken\u3002"},"common":{}},{"key":"paragraph","data":{"content":"<strong>\u5982\u4f55\u83b7\u53d6Github Access Token?</strong>"},"common":{}},{"key":"paragraph","data":{"content":"\u524d\u5f80<code>https://github.com/</code>\u6ce8\u518c\u8d26\u53f7\u5e76\u767b\u5f55\uff0c\u7136\u540e\u6253\u5f00<code>https://github.com/settings/tokens</code>\u70b9\u51fb\u5de6\u4e0a\u89d2\u201c\u751f\u6210\u65b0\u4ee4\u724c(Generate new token)\u201d\u521b\u5efa\u3002"},"common":{}},{"key":"paragraph","data":{"content":"<strong>\u5982\u4f55\u83b7\u53d6Gitee Access Token?</strong>"},"common":{}},{"key":"paragraph","data":{"content":"\u524d\u5f80<code>https://gitee.com/</code>\u6ce8\u518c\u8d26\u53f7\u5e76\u767b\u5f55\uff0c\u7136\u540e\u6253\u5f00<code>https://gitee.com/profile/personal_access_tokens</code>\u70b9\u51fb\u5de6\u4e0a\u89d2\u201c\u751f\u6210\u65b0\u4ee4\u724c\u201d\u521b\u5efa\u3002"},"common":{}},{"key":"paragraph","data":{"content":"<strong>\u6ce8\u610f\u4e8b\u9879</strong>"},"common":{}},{"key":"paragraph","data":{"content":"\u914d\u7f6eGithub\u548cGitee\u4ed3\u5e93\u65f6\uff0c<code>\u8bf7\u786e\u4fdd\u4ed3\u5e93\u5df2\u521d\u59cb\u5316</code>\u3002Gitee\u65b0\u521b\u5efa\u4ed3\u5e93\u65f6\uff0c\u521d\u59cb\u5316\u9009\u9879\u9ed8\u8ba4\u662f\u975e\u9009\u4e2d\u72b6\u6001\uff0c\u8bf7\u5728\u521b\u5efa\u4ed3\u5e93\u7684\u65f6\u5019\u9009\u4e2d\u521d\u59cb\u5316\u4ed3\u5e93\u3002"},"common":{}},{"key":"paragraph","data":{"content":""},"common":{}}],"typeset":"default","layout":"print","basic":{"title":"","cover":"","summary":""}}'}},{key:"letter",get:function(){return'{"content":[{"key":"header","data":{"content":"\u81f4\u5199\u4f5c\u8005\uff1a","level":1},"common":{}},{"key":"paragraph","data":{"content":"<mark>\u6c89\u6d78\u5f0f\u6df1\u5ea6(\u6548\u7387)\u5199\u4f5c</mark>\uff0c\u662f\u8fd9\u6b3e\u7f16\u8f91\u5668\u7684\u957f\u671f\u76ee\u6807\u3002\u5982\u679c\u60a8\u70ed\u7231\u5199\u4e1c\u897f\uff0c\u751a\u81f3\u4e50\u4e8e\u5199\u957f\u6587\uff0c\u5e72\u8d27\u5206\u4eab\u6216\u8005\u6df1\u5ea6\u603b\u7ed3\u7b49\uff0c\u90a3\u4e48\uff0c\u8fd9\u6b3e\u7f16\u8f91\u5668\u7684\u5b58\u5728\u5c31\u662f\u4e3a\u60a8\u800c\u751f\u3002"},"common":{}},{"key":"paragraph","data":{"content":"\u8fd9\u6b3e\u7f16\u8f91\u5668\uff0c\u5c06\u4e0d\u4ec5\u4e3a\u5199\u4f5c\u8005\u63d0\u9ad8\u5199\u4f5c\u6548\u7387\uff0c\u540c\u65f6\u5c06\u63d0\u4f9b\u5f88\u591a\u6548\u7387\u521b\u4f5c\u5c0f\u5de5\u5177\uff0c\u6700\u7ec8\u6ee1\u8db3\u5199\u4f5c\u8005\u6700\u5927\u5316\u81ea\u7531\u8868\u8fbe\u3002"},"common":{}},{"key":"paragraph","data":{"content":"\u4ee5\u4e0b\uff0c\u662f\u7f16\u8f91\u5668\u9636\u6bb5\u6027\u76ee\u6807\u3002"},"common":{}},{"key":"header","data":{"content":"\u9636\u6bb5\u76ee\u6807","level":2},"common":{}},{"key":"paragraph","data":{"content":"1\uff09\u63d0\u4f9b<code>\u5c3d\u91cf\u591a\u7684\u5feb\u6377\u952e\u64cd\u4f5c</code>\uff0c\u5c3d\u91cf\u51cf\u5c11\u9f20\u6807\u4f7f\u7528\u3002"},"common":{}},{"key":"paragraph","data":{"content":"2\uff09\u63d0\u4f9b<code>\u5c3d\u91cf\u591a\u7684\u521b\u4f5c\u5c0f\u5de5\u5177</code>\uff0c\u8ba9\u5199\u4f5c\u8005\u6c89\u6d78\u5728\u4e00\u4e2a\u7f16\u8f91\u5668\u5c31\u80fd\u987a\u5229\u5b8c\u6210\u4e30\u5bcc\u7684\u5185\u5bb9\u3002"},"common":{}},{"key":"paragraph","data":{"content":"3\uff09<code>\u4e00\u952e\u6392\u7248</code>\uff0c\u652f\u6301\u4e2a\u6027\u5316\u4ee3\u7801\u6392\u7248\uff0c\u8ba9\u5199\u4f5c\u8005\u4e0d\u5fc5\u5728\u6392\u7248\u4e0a\u8017\u8d39\u7cbe\u529b\u65f6\u95f4\u3002"},"common":{}},{"key":"paragraph","data":{"content":"4\uff09\u4e13\u6ce8\u5728\u7f16\u8f91\u5668\u5de5\u5177\u4e0a\uff0c\u5c06\u652f\u6301<code>\u5c3d\u53ef\u80fd\u591a\u7684\u7b2c\u4e09\u65b9\u4e91\u5e73\u53f0\u6765\u4f9b\u5199\u4f5c\u8005\u9009\u62e9\u5b58\u50a8\u5185\u5bb9\u53ca\u56fe\u7247\u7b49\u5a92\u4f53\u8d44\u6e90</code>\u3002"},"common":{}},{"key":"paragraph","data":{"content":"5\uff09\u5bf9\u63a5\u517c\u5bb9\u5c3d\u53ef\u80fd\u591a\u7684\u53d1\u5e03\u5e73\u53f0\uff0c\u8ba9\u5199\u4f5c\u8005<code>\u4e00\u5904\u521b\u4f5c\uff0c\u591a\u5904\u4f4e\u6210\u672c\u53d1\u5e03</code>\u3002"},"common":{}},{"key":"paragraph","data":{"content":"<strong>\u8bf7\u5173\u6ce8\u4ee5\u4e0b\u516c\u4f17\u53f7\u8054\u7cfb\u5f00\u53d1\u8005\uff0c\u53cd\u9988\u5e76\u4e86\u89e3\u540e\u7eed\u7248\u672c\u8fed\u4ee3\u7b49</strong>\u3002"},"common":{}},{"key":"image","data":{"image":{"url":"https://cdn.jsdelivr.net/gh/montisan/imagehosting/geekeditor_images/2021-7-12/1626067390603-qrcode_for_geekeditor.jpg"},"caption":"\u6781\u5ba2\u7f16\u8f91\u5668\u516c\u4f17\u53f7","withCaption":true},"common":{}},{"key":"paragraph","data":{"content":""},"common":{}}],"typeset":"default","layout":"print"}'}}]),e}(),ie=function(){function e(t){var n=this;Object(h.a)(this,e),this._db=void 0,this._docsStoreName=void 0,this._contentsStoreName=void 0,this._token=void 0,this._db=new oe({dbName:"GeekEditorDB",version:1,onUpgrade:function(e,t){n.upgradeDatabase(e,t)}}),this._docsStoreName="Docs",this._contentsStoreName="Contents",this._token=t.token||""}return Object(p.a)(e,[{key:"upgradeDatabase",value:function(e,t){var n;e.objectStoreNames.contains(this._docsStoreName)||((n=e.createObjectStore(this._docsStoreName,{keyPath:"id",autoIncrement:!0})).createIndex("idIndex","id",{unique:!0}),n.createIndex("titleIndex","title"));e.objectStoreNames.contains(this._contentsStoreName)||(n=e.createObjectStore(this._contentsStoreName,{keyPath:"doc_id"})).createIndex("docIdIndex","doc_id",{unique:!0})}},{key:"init",value:function(){return Promise.resolve({status:r.EInitResultStatusSuccess})}},{key:"rootID",value:function(){return-1}},{key:"queryDocs",value:function(e,t){var n=this;return t===o.EDocsNodeTypeFile?Promise.all([this._db.query(e,this._docsStoreName),this._db.query(e,this._contentsStoreName)]).then((function(e){var t={};return Object.assign(t,e[0],{content:W.a.decode(e[1]&&e[1].content||"")}),[t]})):this._db.queryAll(this._docsStoreName,(function(t){return t.pid===e&&n._token===t.token})).then((function(e){return e.reverse()}))}},{key:"addDoc",value:function(e){var t=this,n=e.content,a=Object(ne.a)(e,["content"]);return this._db.add(Object(O.a)(Object(O.a)({},a),{},{token:this._token}),this._docsStoreName).then((function(a){return e.type===o.EDocsNodeTypeFile?t._db.update({doc_id:a,content:W.a.encode(n||"")},t._contentsStoreName):a})).then((function(e){return e}))}},{key:"updateDoc",value:function(e,t){var n=this,a=t.content,i=Object(ne.a)(t,["content"]);return this._db.update(Object(O.a)(Object(O.a)({},i),{},{token:this._token}),this._docsStoreName,e).then((function(i){return t.type===o.EDocsNodeTypeFile?!!i&&n._db.update({doc_id:e,content:W.a.encode(a||"")},n._contentsStoreName):!!i})).then((function(t){return t?e:void 0}))}},{key:"deleteDoc",value:function(e,t){var n=this;return t===o.EDocsNodeTypeFolder&&this.queryDocs(e,o.EDocsNodeTypeFolder).then((function(e){e.forEach((function(e){n._db.del(e.id,n._docsStoreName).then((function(){return n._db.del(e.id,n._contentsStoreName)})).then((function(){return!0}))}))})),this._db.del(e,this._docsStoreName).then((function(){return n._db.del(e,n._contentsStoreName)})).then((function(){return!0}))}},{key:"title",get:function(){return"\u6d4f\u89c8\u5668[".concat(this._token.substr(0,1),"***").concat(this._token.substr(this._token.length-1),"]")}}]),e}(),re=n(35),se="Win32"==navigator.platform||"Windows"==navigator.platform,ce=function(){function e(t){Object(h.a)(this,e),this._rootPath=void 0,this._rootPath=t.rootPath}return Object(p.a)(e,[{key:"init",value:function(){var e=this;return re.a.get({path:this._rootPath,type:"dir"}).then((function(t){return t.status>=200&&t.status<=400?{status:r.EInitResultStatusSuccess}:e.createDir(e._rootPath,"","").then((function(e){return e?{status:r.EInitResultStatusSuccess}:{status:r.EInitResultStatusFail}}))}))}},{key:"rootID",value:function(){return-1}},{key:"queryDocs",value:function(e,t){return-1===e&&(e=""),t===o.EDocsNodeTypeFile?this.getFile(this._rootPath,e):this.getDir(this._rootPath,e)}},{key:"addDoc",value:function(e){return e.pid?e.type===o.EDocsNodeTypeFile?this.createDoc(this._rootPath,e.pid,this.addSubfix(this.trim(e.title)),e.content||"").then((function(e){return e?e.id:void 0})):this.createDir(this._rootPath,e.pid,this.trim(e.title)).then((function(e){return e?e.id:void 0})):Promise.resolve(void 0)}},{key:"updateDoc",value:function(e,t){var n=this,a=e;if(!t.pid)return Promise.resolve(void 0);if(t.type===o.EDocsNodeTypeFile){var i=e.split("/").pop(),r=this.addSubfix(this.trim(t.title));return i===r?this.updateFile(this._rootPath,a,t.content||"").then((function(e){if(e)return e})):t.pid?this.createDoc(this._rootPath,t.pid,r,t.content||"").then((function(e){if(e)return n.deleteDoc(a,o.EDocsNodeTypeFile).then((function(){return e.id}))})):Promise.resolve(void 0)}var s="".concat(this._rootPath).concat(se?"\\":"/").concat(a),c="".concat(t.pid).concat(se?"\\":"/").concat(t.title),d="".concat(this._rootPath).concat(se?"\\":"/").concat(c);return c!==a?this.renameDoc(s,d,t.type).then((function(e){if(e.status>=200&&e.status<=400)return n.deletePath(n._rootPath,a,t.type).then((function(){return c}))})):Promise.resolve(void 0)}},{key:"deleteDoc",value:function(e,t){return this.deletePath(this._rootPath,e,t).then((function(e){return e}))}},{key:"renameDoc",value:function(e,t,n){return re.a.rename({path:e,newPath:t,type:n===o.EDocsNodeTypeFile?"file":"dir"})}},{key:"trim",value:function(e){return e?e=e.replace(/\s/g,"").trim():e}},{key:"addSubfix",value:function(e){return/\.ge$/.test(e)?e:"".concat(e,".ge")}},{key:"deletePath",value:function(e,t,n){return re.a.del({path:"".concat(e,"/").concat(t),type:n===o.EDocsNodeTypeFile?"file":"dir"}).then((function(e){return e.status>=200&&e.status<=400}))}},{key:"updateFile",value:function(e,t,n){return re.a.put({path:"".concat(e,"/").concat(t),type:"file",content:W.a.encode(n)}).then((function(e){if(e.status>=200&&e.status<=400)return t}))}},{key:"createDir",value:function(e,t,n){var a=[t&&"-1"!=t?"".concat(t,"/"):"",n||""].join("");return re.a.put({path:"".concat(e,"/").concat(a),type:"dir"}).then((function(e){if(e.status>=200&&e.status<=400)return{id:a,pid:t,title:n,type:o.EDocsNodeTypeFolder}}))}},{key:"createDoc",value:function(e,t,n,a){var i="-1"==t?n:"".concat(t,"/").concat(n);return re.a.put({path:"".concat(e,"/").concat(i),type:"file",content:W.a.encode(a)}).then((function(e){if(e.status>=200&&e.status<=400&&e.data)return{id:i,pid:t,title:n.replace(/\.ge$/,""),content:a,type:o.EDocsNodeTypeFile}}))}},{key:"getFile",value:function(e,t){return re.a.get({path:"".concat(e,"/").concat(t),type:"file"}).then((function(e){if(e.status>=200&&e.status<=400){var n=e.data;if(n){var a=t.split("/");return a.pop(),[{id:t,pid:a.join("/"),title:n.name.replace(/\.ge$/,""),content:W.a.decode(n.content||""),type:o.EDocsNodeTypeFile}]}}return[]}))}},{key:"getDir",value:function(e,t){return re.a.get({path:t.length?"".concat(e,"/").concat(t):e,type:"dir"}).then((function(t){if(t.status>=200&&t.status<=400){var n=t.data;if(n){var a=[];return n.forEach((function(t){if(/\.ge$/.test(t.name)||"file"!==t.type){var n=t.fullpath.substr(e.length+1),i=n.split("/");i.pop();var r={id:n,pid:i.length?i.join("/"):-1,title:t.name.replace(/\.ge$/,""),type:"file"===t.type?o.EDocsNodeTypeFile:o.EDocsNodeTypeFolder};a.push(r)}})),a.sort((function(e,t){return t.type-e.type}))}}return[]}))}},{key:"title",get:function(){var e=this._rootPath.split("/").pop()||"";return"\u78c1\u76d8[".concat(e.split("\\").pop()||"","]")}}]),e}(),de=function(){function e(t){Object(h.a)(this,e),this._repo=void 0,this._imageJsdelivrUrl=void 0,this._imagesUrl=void 0,this._imageRootUrl=void 0,this._repo=Object(O.a)({},t.repo),this._imageJsdelivrUrl="https://cdn.jsdelivr.net/gh/".concat(this._repo.owner.login,"/").concat(this._repo.name,"/geekeditor_images"),this._imageRootUrl="https://api.github.com/repos/".concat(this._repo.owner.login,"/").concat(this._repo.name,"/contents"),this._imagesUrl="https://api.github.com/repos/".concat(this._repo.owner.login,"/").concat(this._repo.name,"/contents/geekeditor_images")}return Object(p.a)(e,[{key:"init",value:function(){return U(this._imageRootUrl,this._repo.token).then((function(e){return e.error?{status:r.EInitResultStatusFail}:{status:r.EInitResultStatusSuccess}}))}},{key:"uploadImage",value:function(e,t){var n=this;return new Promise((function(o){var a=new Date,i=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate(),r=new FileReader;r.readAsDataURL(e);var s=e.type.match(/image\/(.*)/),c=s?s[1]:"jpg";r.onload=function(r){if(r.target&&r.target.result&&"string"===typeof r.target.result){var s=r.target.result.split(",").pop()||"",d="".concat(a.getTime(),"-").concat(e.name||"image"),l=new RegExp(".".concat(c,"$"));c&&!l.test(d)&&(d="".concat(d,".").concat(c)),n.uploadFile(n._imagesUrl,n._repo.token,i,d,s,t).then((function(e){if(e){var t={filename:e.name,url:encodeURI("".concat(n._imageJsdelivrUrl,"/").concat(i,"/").concat(d))};o(t)}else o(void 0)}))}else o(void 0)}}))}},{key:"uploadSVG",value:function(e,t){var n=this;return new Promise((function(o){var a=new Date,i=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate(),r="".concat(a.getTime(),"-svg.svg"),s=W.a.encode(e);n.uploadFile(n._imagesUrl,n._repo.token,i,r,s,t).then((function(e){if(e){var t={filename:e.name,url:encodeURI("".concat(n._imageJsdelivrUrl,"/").concat(i,"/").concat(r))};o(t)}else o(void 0)}))}))}},{key:"uploadFile",value:function(e,t,n,o,a,i){var r="".concat(n,"/").concat(o);return H("".concat(e,"/").concat(r),t,{message:"upload from GeekEditor",content:a},i).then((function(e){if(e.status>=200&&e.status<=400)return e.data.content}))}}]),e}(),le=function(){function e(t){Object(h.a)(this,e),this._repo=void 0,this._imageRootUrl=void 0,this._imagesUrl=void 0,this._repo=Object(O.a)({},t.repo),this._imageRootUrl="".concat(J,"/repos/").concat(this._repo.owner.login,"/").concat(this._repo.path,"/contents"),this._imagesUrl="".concat(J,"/repos/").concat(this._repo.owner.login,"/").concat(this._repo.path,"/contents/geekeditor_images")}return Object(p.a)(e,[{key:"init",value:function(){return X(this._imageRootUrl,this._repo.token).then((function(e){return e.error?e.data&&"Branch"===e.data.message?{status:r.EInitResultStatusNoBranch}:{status:r.EInitResultStatusFail}:{status:r.EInitResultStatusSuccess}}))}},{key:"uploadImage",value:function(e,t){var n=this;return new Promise((function(o){var a=new Date,i=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate(),r=new FileReader;r.readAsDataURL(e);var s=e.type.match(/image\/(.*)/),c=s?s[1]:"jpg";r.onload=function(r){if(r.target&&r.target.result&&"string"===typeof r.target.result){var s=r.target.result.split(",").pop()||"",d="".concat(a.getTime(),"-").concat(e.name||"image"),l=new RegExp(".".concat(c,"$"));c&&!l.test(d)&&(d="".concat(d,".").concat(c)),n.uploadFile(n._imagesUrl,n._repo.token,i,d,s,t).then((function(e){if(e){var t={filename:e.name,url:e.download_url||""};o(t)}else o(void 0)}))}else o(void 0)}}))}},{key:"uploadSVG",value:function(e,t){var n=this;return new Promise((function(o){var a=new Date,i=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate(),r="".concat(a.getTime(),"-svg.svg"),s=W.a.encode(e);n.uploadFile(n._imagesUrl,n._repo.token,i,r,s,t).then((function(e){if(e){var t={filename:e.name,url:e.download_url||""};o(t)}else o(void 0)}))}))}},{key:"uploadFile",value:function(e,t,n,o,a,i){var r="".concat(n,"/").concat(o);return Z("".concat(e,"/").concat(r),t,{message:"upload from GeekEditor",content:a},i).then((function(e){if(e.status>=200&&e.status<=400)return e.data.content}))}}]),e}(),ue=function(){function e(t){Object(h.a)(this,e),this._rootPath=void 0,this._rootPath=t.rootPath}return Object(p.a)(e,[{key:"init",value:function(){var e=Object(x.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{status:r.EInitResultStatusSuccess});case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"uploadImage",value:function(e,t){var n=this;return new Promise((function(o){var a=new Date,i=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate(),r=new FileReader;r.readAsDataURL(e);var s=e.type.match(/image\/(.*)/),c=s?s[1]:"jpg";r.onload=function(r){if(r.target&&r.target.result&&"string"===typeof r.target.result){var s=e.path||"",d="".concat(a.getTime(),"-").concat(e.name||"image"),l=new RegExp(".".concat(c,"$"));c&&!l.test(d)&&(d="".concat(d,".").concat(c)),n.uploadFile(n._rootPath,i,d,void 0,s,t).then((function(e){if(e){var t={filename:e.name,url:"file://".concat(e.fullpath)};o(t)}else o(void 0)}))}else o(void 0)}}))}},{key:"uploadSVG",value:function(e,t){var n=this;return new Promise((function(o){var a=new Date,i=a.getFullYear()+"-"+(a.getMonth()+1)+"-"+a.getDate(),r="".concat(a.getTime(),"-svg.svg");n.uploadFile(n._rootPath,i,r,e,void 0,t).then((function(e){if(e){var t={filename:e.name,url:"file://".concat(e.fullpath)};o(t)}else o(void 0)}))}))}},{key:"uploadFile",value:function(e,t,n,o,a,i){var r="".concat(t,"/").concat(n);return re.a.put({path:"".concat(e,"/").concat(r),type:"file",content:o,source:a},i).then((function(e){if(e.status>=200&&e.status<=400)return e.data}))}}]),e}(),he=0,pe=Date.now();function fe(){return"".concat(pe).concat(++he)}function ve(e,t,n){var o=[];return e.forEach((function(e){var a=new Oe({parentNode:t,nodeType:e.type,data:{title:e.title,content:e.content,cover:e.cover},dao:n.createDAO({type:e.type,parentNode:t,id:e.id})});o.push(a)})),o}function me(e,t){var n=e.children();if(n&&n.length)for(var o,a=0;o=n[a];)me(o,t),o.parentNode()&&(o.children()&&o.children().length&&t(o),o.parentNode()&&a++);else t(e)}function be(e){var t=[];t.push(e);for(var n=e.parentNode();n&&n.parentNode();)t.push(n),n=n.parentNode();return t.reverse()}function je(e){var t;if(e.platform===P.EPlatformTypeBuiltin)t=new ae({token:e.token});else if(e.platform===P.EPlatformTypeBrowser)t=new ie({token:e.token});else if(e.platform===P.EPlatformTypeLocal)t=new ce({rootPath:e.repo});else if(e.platform===P.EPlatformTypeGithub)try{var n=JSON.parse(e.repo);t=new V({repo:n})}catch(a){console.log(a)}else if(e.platform===P.EPlatformTypeGitee)try{var o=JSON.parse(e.repo);t=new te({repo:o})}catch(a){console.log(a)}return t}function ge(e){var t;if(e.platform===P.EPlatformTypeGithub)try{var n=JSON.parse(e.repo);t=new de({repo:n})}catch(a){console.log(a)}else if(e.platform===P.EPlatformTypeGitee)try{var o=JSON.parse(e.repo);t=new le({repo:o})}catch(a){console.log(a)}else e.platform===P.EPlatformTypeLocal&&(t=new ue({rootPath:e.repo}));return t}var ye=n(58),Oe=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var o;Object(h.a)(this,n),(o=t.call(this))._tempID=void 0,o._nodeType=void 0,o._dao=void 0,o._store=void 0,o._children=void 0,o._isChanged=void 0,o._isLoaded=void 0,o._isRemoved=void 0,o._unsubcribe=void 0,o._lastTitle=void 0,o._isSaving=void 0,o._isLoading=void 0,o._isRemoving=void 0,o._editable=void 0,o._autoSaveFn=void 0,o._changeTimestamp=void 0,o._bakArress=void 0;var a=e.nodeType;return o._tempID=fe(),o._nodeType=a,o._dao=e.dao,e.store?o._store=e.store:o._store=new R({data:e.data}),o._lastTitle=o._store.getTitle(),o._unsubcribe=o._store.subscribe((function(){var e=o._store.getTitle();e!==o._lastTitle&&(o.notifyChangedHandlers(i.EDocsNodeChangeTypeTitle),o._lastTitle=e)})),o._store.setSaver(Object(N.a)(o)),e.data&&(o._store.setTitle(e.data.title||""),o._store.setContent(e.data.content||"")),o._children=[],o._isChanged=!1,o._changeTimestamp=0,o._isLoaded=!o.id(),o._isRemoved=!o.parentNode(),o._isSaving=!1,o._isRemoving=!1,o._autoSaveFn=Object(ye.a)((function(){o._isChanged&&o.save()}),3e3),o}return Object(p.a)(n,[{key:"store",value:function(){return this._store}},{key:"setDAO",value:function(e){this._dao=e}},{key:"onRemoved",value:function(){}},{key:"offRemoved",value:function(){}},{key:"save",value:function(){var e=Object(x.a)(k.a.mark((function e(){var t,n,a,r=this;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._dao||this._isSaving){e.next=9;break}return t=Date.now(),this._editable&&(n=this._editable.getContent(!0),this._store.setContent(n)),a=this._nodeType===o.EDocsNodeTypeFile?{content:this._store.getContent(),title:this._store.getTitle()}:{title:this._store.getTitle()},this._isSaving=!0,this.notifyChangedHandlers(i.EDocsNodeChangeTypeSaving),e.abrupt("return",this._dao.save(a).then((function(e){return r._isSaving=!1,e&&r._isChanged&&t>=r._changeTimestamp&&(r._isChanged=!1,r.notifyChangedHandlers(i.EDocsNodeChangeTypeChanging)),r.notifyChangedHandlers(i.EDocsNodeChangeTypeSaving),e})));case 9:return e.abrupt("return",Promise.resolve(!1));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"notifyChangedHandlers",value:function(e){this.trigger("change",e)}},{key:"id",value:function(){if(this._dao)return this._dao.id()}},{key:"isRoot",value:function(){return!this.id()}},{key:"tempID",value:function(){return this._tempID}},{key:"title",value:function(){return this._store.getTitle()}},{key:"setTitle",value:function(e){this.title()!==e&&(this._store.setTitle(e),this.save())}},{key:"setEditable",value:function(e){var t=this;this._editable=e,this._editable.setOpt("uploadImage",function(){var e=Object(x.a)(k.a.mark((function e(n,o){var a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null===(a=t._dao)||void 0===a?void 0:a.uploadImage(n,o));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this._editable.setOpt("uploadSVG",function(){var e=Object(x.a)(k.a.mark((function e(n,o){var a;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null===(a=t._dao)||void 0===a?void 0:a.uploadSVG(n,o));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),this._isLoaded&&e.setContent(this._store.getContent()),e.on("contentchange",(function(){t._isChanged||(t._isChanged=!0,t._changeTimestamp=Date.now(),t.notifyChangedHandlers(i.EDocsNodeChangeTypeChanging)),t._autoSaveFn()})),this._editable.on("save",(function(){t.save()}))}},{key:"nodeType",value:function(){return this._nodeType}},{key:"providerType",value:function(){var e=this.parentNode();return e?e.providerType():a.EDocsProviderTypeMemory}},{key:"isChanged",value:function(){return this._isChanged}},{key:"isLoaded",value:function(){return this._isLoaded}},{key:"isSaving",value:function(){return this._isSaving}},{key:"isLoading",value:function(){return this._isLoading}},{key:"isRemoving",value:function(){return this._isRemoving}},{key:"load",value:function(){var e=this;return this._dao&&!this._isLoading?(this._isLoading=!0,this.notifyChangedHandlers(i.EDocsNodeChangeTypeLoading),this._dao.load().then((function(t){if(e._isLoading=!1,e._nodeType===o.EDocsNodeTypeFolder&&e._dao){var n=ve(t,e,e._dao.provider()).map((function(t){var n=e._children.findIndex((function(e){return e.id()===t.id()&&e.nodeType()===t.nodeType()}));if(-1!==n){var o=e._children[n];return e._children.splice(n,1),o}return t}));e._children.forEach((function(e){e.nodeType()===o.EDocsNodeTypeFolder?me(e,(function(e){e.notifyChangedHandlers(i.EDocsNodeChangeTypeRemoved)})):e.notifyChangedHandlers(i.EDocsNodeChangeTypeRemoved)})),e._children=n,e._isLoaded=!0}else{var a=t[0];a&&(e._store.setContent(a.content||""),e._editable&&e._editable.setContent(a.content||""),e._store.setTitle(a.title||""),e._isLoaded=!0)}return e.notifyChangedHandlers(i.EDocsNodeChangeTypeLoading),e._isLoaded}))):Promise.resolve(!0)}},{key:"createNode",value:function(e){var t=this;return e.parentNode=this,this._dao?this._dao.createNode(e).then((function(e){return e&&t.notifyChangedHandlers(i.EDocsNodeChangeTypeChildren),e})):Promise.resolve(void 0)}},{key:"suportCreateNode",value:function(e){return this._nodeType===o.EDocsNodeTypeFolder}},{key:"suportReloadNode",value:function(){return!0}},{key:"children",value:function(){return this._children}},{key:"parentNode",value:function(){if(this._dao)return this._dao.parentNode()}},{key:"mount",value:function(e){var t=this,n=this.parentNode();if(n){var o=n.children();if(-1===o.findIndex((function(e){return e.tempID()===t.tempID()}))){if(e)o.unshift(this);else{var a=o.findIndex((function(e){return e.title()>t.title()&&e.nodeType()===t.nodeType()||e.nodeType()<t.nodeType()}));0===a?o.unshift(this):-1===a?o.push(this):o.splice(a,0,this)}n.notifyChangedHandlers(i.EDocsNodeChangeTypeChildren)}return this._isRemoved=!1,this.id()?Promise.resolve(!0):this.save().then((function(e){return e||t.remove(),e}))}return Promise.resolve(!1)}},{key:"remove",value:function(){var e=this,t=this.parentNode();return this._dao&&t&&!this._isRemoving?(this._isRemoving=!0,this.notifyChangedHandlers(i.EDocsNodeChangeTypeRemoving),this._dao.delete().then((function(n){if(e._isRemoving=!1,e.notifyChangedHandlers(i.EDocsNodeChangeTypeRemoving),n){var o=t.children(),a=o.findIndex((function(t){return t.tempID()===e.tempID()}));-1!==a&&o.splice(a,1),t.notifyChangedHandlers(i.EDocsNodeChangeTypeChildren),e.afterRemoved()}return n}))):(this.afterRemoved(),Promise.resolve(!0))}},{key:"onChanged",value:function(e){this.on("change",e)}},{key:"offChanged",value:function(e){this.off("change",e)}},{key:"destory",value:function(){this._unsubcribe&&this._unsubcribe()}},{key:"actived",value:function(){var e=this;setTimeout((function(){if(e._editable&&e._bakArress){var t=e._editable.selection.getRangeAt(0);t.moveToAddress(e._bakArress),t.select(!!t.startContainer),e._editable.actived=!0}}),0)}},{key:"deactived",value:function(){this._editable&&(this._bakArress=this._editable.selection.getRangeAt(0).createAddress(),this._editable.actived=!1)}},{key:"afterRemoved",value:function(){this._isRemoved=!0,this._nodeType===o.EDocsNodeTypeFolder?me(this,(function(e){e.notifyChangedHandlers(i.EDocsNodeChangeTypeRemoved)})):this.notifyChangedHandlers(i.EDocsNodeChangeTypeRemoved)}}]),n}(S.a),_e=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var o;return Object(h.a)(this,n),(o=t.call(this))._children=void 0,o._isLoaded=void 0,o._isLoading=void 0,o._tempID=void 0,o._parentNode=void 0,o._id=void 0,e=e||{},o._children=[],o._isLoaded=!0,o._tempID=fe(),o._parentNode=e.parentNode,o}return Object(p.a)(n,[{key:"title",value:function(){return"\u4e34\u65f6"}},{key:"setTitle",value:function(){}},{key:"setEditable",value:function(){}},{key:"providerType",value:function(){return a.EDocsProviderTypeMemory}},{key:"notifyChangedHandlers",value:function(e){this.trigger("change",e)}},{key:"id",value:function(){return this._id}},{key:"isRoot",value:function(){return!0}},{key:"tempID",value:function(){return this._tempID}},{key:"nodeType",value:function(){return o.EDocsNodeTypeFolder}},{key:"isChanged",value:function(){return!1}},{key:"isLoaded",value:function(){return this._isLoaded}},{key:"isSaving",value:function(){return!1}},{key:"isLoading",value:function(){return this._isLoading}},{key:"isRemoving",value:function(){return!1}},{key:"load",value:function(){return Promise.resolve(!0)}},{key:"save",value:function(){return Promise.resolve(!0)}},{key:"createNode",value:function(e){var t=this;return new Promise((function(n){n(new Oe(Object(O.a)(Object(O.a)({},e),{},{parentNode:t})))})).then((function(e){return e&&t.notifyChangedHandlers(i.EDocsNodeChangeTypeChildren),e}))}},{key:"suportCreateNode",value:function(e){return e===o.EDocsNodeTypeFile}},{key:"suportReloadNode",value:function(){return!1}},{key:"children",value:function(){return this._children}},{key:"parentNode",value:function(){return this._parentNode}},{key:"mount",value:function(e){return Promise.resolve(!0)}},{key:"remove",value:function(){return Promise.resolve(!1)}},{key:"onChanged",value:function(e){this.on("change",e)}},{key:"offChanged",value:function(e){this.off("change",e)}},{key:"destory",value:function(){}},{key:"actived",value:function(){}},{key:"deactived",value:function(){}}]),n}(S.a),ke=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var o;return Object(h.a)(this,n),(o=t.call(this,e))._data=void 0,o._imageHosting=void 0,o._type=void 0,o._title=void 0,o._isLoaded=!1,o._data=e.data,o._imageHosting=e.image,o._type=e.type,o._title=e.title,o._id=e.id,o}return Object(p.a)(n,[{key:"title",value:function(){return this._title}},{key:"providerType",value:function(){return this._type}},{key:"createDAO",value:function(e){var t=this,n=e.id,o=e.parentNode,a=e.type,i={title:"",pid:o.id(),type:a};return{id:function(){return n},parentNode:function(){return o},load:function(){return n?t._data.queryDocs(n,a):Promise.reject([])},save:function(e){var o={title:void 0===e.title?i.title||"":e.title,pid:i.pid,content:void 0===e.content?i.content||"":e.content,type:a,cover:void 0===e.cover?i.cover||"":e.cover};return n?(o.id=n,t._data.updateDoc(n,o).then((function(e){return e&&(n=e),!!e}))):i.pid?t._data.addDoc(o).then((function(e){return n=e,!0})):Promise.reject()},delete:function(){return n?t._data.deleteDoc(n,a).then((function(e){return e&&(o=void 0),e})):(o=void 0,Promise.resolve(!0))},uploadImage:function(e,n){return t._imageHosting?t._imageHosting.uploadImage(e,n):Promise.resolve(void 0)},uploadSVG:function(e,n){return t._imageHosting?t._imageHosting.uploadSVG(e,n):Promise.resolve(void 0)},createNode:function(e){return t.createNode(e)},provider:function(){return t}}}},{key:"id",value:function(){return this._id}},{key:"load",value:function(){var e=this;return this._isLoading=!0,this.notifyChangedHandlers(i.EDocsNodeChangeTypeLoading),this._data.queryDocs(this.id(),o.EDocsNodeTypeFolder).then((function(t){e._isLoading=!1;var n=ve(t,e,e).map((function(t){var n=e._children.findIndex((function(e){return e.id()===t.id()&&e.nodeType()===t.nodeType()}));if(-1!==n){var o=e._children[n];return e._children.splice(n,1),o}return t}));return e._children.forEach((function(e){e.nodeType()===o.EDocsNodeTypeFolder?me(e,(function(e){e.notifyChangedHandlers(i.EDocsNodeChangeTypeRemoved)})):e.notifyChangedHandlers(i.EDocsNodeChangeTypeRemoved)})),e._children=n,e._isLoaded=!0,e.notifyChangedHandlers(i.EDocsNodeChangeTypeLoading),!0}))}},{key:"createNode",value:function(e){var t=this,n=e.parentNode||this;return new Promise((function(o){var a=t.createDAO({type:e.nodeType,parentNode:n});o(new Oe(Object(O.a)(Object(O.a)({},e),{},{parentNode:n,dao:a})))})).then((function(e){return e&&n===t&&t.notifyChangedHandlers(i.EDocsNodeChangeTypeChildren),e}))}},{key:"suportCreateNode",value:function(e){return!0}},{key:"suportReloadNode",value:function(){return!0}}]),n}(_e),xe=n(28),Ne=new(function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var o;return Object(h.a)(this,n),(o=t.call(this,e))._providers=void 0,o.local=void 0,o._providers=[],xe.a.on(["doc_providers","hide_builtin_provider"],(function(){o.loadProvides()})),xe.a.ready((function(){o.loadProvides(),o.expand(Object(re.b)()?a.EDocsProviderTypeLocal:a.EDocsProviderTypeBrowser)})),o}return Object(p.a)(n,[{key:"title",value:function(){return""}},{key:"children",value:function(){return this._providers}},{key:"parentNode",value:function(){}},{key:"expand",value:function(e){(void 0!==e?this.getProviders(e):[this]).forEach((function(e){me(e,(function(e){e.trigger("expand",!0)}))}))}},{key:"collapse",value:function(e){(void 0!==e?this.getProviders(e):[this]).forEach((function(e){me(e,(function(e){e.trigger("expand",!1)}))}))}},{key:"getProviders",value:function(e){return this._providers.filter((function(t){return t.providerType()===e}))}},{key:"loadProvides",value:function(){var e=this;this._providers.forEach((function(e){me(e,(function(e){e.notifyChangedHandlers(i.EDocsNodeChangeTypeRemoved)}))}));var t=[],n=[];!!xe.a.getSetting("hide_builtin_provider")||n.push(this.builtinProvider),n.push.apply(n,Object(y.a)(xe.a.getSetting("doc_providers")||[])),n.map((function(n){var o,i=je(n.doc_repo),r=ge(n.image_repo);if(n.doc_repo.platform===P.EPlatformTypeGithub?o=a.EDocsProviderTypeGitHub:n.doc_repo.platform===P.EPlatformTypeBrowser||n.doc_repo.platform===P.EPlatformTypeBuiltin?o=a.EDocsProviderTypeBrowser:n.doc_repo.platform===P.EPlatformTypeLocal?o=a.EDocsProviderTypeLocal:n.doc_repo.platform===P.EPlatformTypeGitee&&(o=a.EDocsProviderTypeGitee),void 0!==o&&i&&r){var s=new ke({id:i.rootID(),title:i.title,type:o,data:i,image:r,parentNode:e});t.push(s)}})),this._providers=t.sort((function(e,t){return e.providerType()-t.providerType()})),this.notifyChangedHandlers(i.EDocsNodeChangeTypeChildren)}},{key:"builtinProvider",get:function(){return{id:"builtin",doc_repo:{platform:P.EPlatformTypeBuiltin,token:"builtin",repo:""},title:"",image_repo:{platform:P.EPlatformTypeGithub,token:"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",repo:JSON.stringify({jsDelivr:!0,token:"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",id:385421357,name:"GeekEditorImages",owner:{login:"geekeditorcom",id:87345372,avatar_url:"https://avatars.githubusercontent.com/u/87345372?v=4"},private:!1,permissions:{admin:!0,push:!0,pull:!0}})}}}}]),n}(_e)),Se=(n(356),n(65)),Te=n(243),Ce=n(467),De=n(468),Ee=n(469),we=n(470),Pe=n(471),Re=n(472),Ie=n(473),Fe=n(114),Ae=n(461),Me=n(465),Le=n(49),Be=n(462),Ue=(n(357),function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var o;return Object(h.a)(this,n),(o=t.call(this,e)).state={visible:!1,showTransition:!1},o}return Object(p.a)(n,[{key:"showTransition",value:function(){var e=this;this.setState({visible:!0},(function(){setTimeout((function(){e.setState({showTransition:!0})}),0)}))}},{key:"hideTransition",value:function(){var e=this;this.setState({showTransition:!1},(function(){setTimeout((function(){e.setState({visible:!1})}),300)}))}},{key:"render",value:function(){var e=this.state,t=e.visible,n=e.showTransition,o=this.props,a=o.top,i=Object(ne.a)(o,["top"]),r=Object(O.a)(Object(O.a)({},i),{},{style:Object(O.a)(Object(O.a)({},this.props.style),{},{top:a,marginTop:"0px"}),visible:t,wrapClassName:[this.props.wrapClassName||""," transition-modal",n?" transition-modal--show":""].join("")});return Object(s.jsx)(Be.a,Object(O.a)(Object(O.a)({},r),{},{children:this.props.children}))}}]),n}(c.Component)),He=(n(358),n(107)),Ge=n(236),We=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).addNodeType=void 0,a.transitionModal=void 0,a.onExpand=function(e){var t=a.props.node;(e=void 0===e?!a.state.expand:e)&&t.nodeType()===o.EDocsNodeTypeFolder&&!t.isLoaded()&&a.onReload(),a.setState({expand:e})},a.onActive=function(e){var t=a.props;(0,t.onActiveNode)(t.node),0===e.button&&(a.onExpand(),a.onOpenDoc())},a.onOpenDoc=function(){var e=a.props,t=e.node,n=e.onOpen;t.nodeType()===o.EDocsNodeTypeFile&&n(t)},a.onCreateNode=function(e){a.setState({addNodeEditing:!0,expand:!0}),a.addNodeType=e},a.onReload=function(){a.props.node.load().then((function(e){}))},a.onAddNoteEditing=function(e){if(e.length){var t=a.props,n=t.node,i=t.onOpen,r=a.addNodeType||o.EDocsNodeTypeFile;if(-1!==n.children().findIndex((function(t){return t.title()===e&&t.nodeType()===r})))return void Ge.b.warn("\u4e0d\u80fd\u521b\u5efa\u91cd\u540d".concat(r===o.EDocsNodeTypeFile?"\u6587\u6863":"\u6587\u4ef6\u5939"));n.createNode({nodeType:r,parentNode:n,data:{title:e,content:""}}).then((function(e){return e?e.mount().then((function(t){t?((0,a.props.onActiveNode)(e),e.nodeType()===o.EDocsNodeTypeFile&&i(e)):Ge.b.error("\u521b\u5efa\u4fdd\u5b58\u5931\u8d25")})):Ge.b.error("\u521b\u5efa\u4fdd\u5b58\u5931\u8d25"),a.setState({addNodeEditing:!1}),e}))}else a.setState({addNodeEditing:!1})},a.onTitleEditing=function(e){e.length?(a.props.node.setTitle(e),a.setState({titleEditing:!1})):a.setState({titleEditing:!1})},a.onNodeChanged=function(e){e!==i.EDocsNodeChangeTypeTitle&&e!==i.EDocsNodeChangeTypeChildren&&e!==i.EDocsNodeChangeTypeSaving&&e!==i.EDocsNodeChangeTypeLoading&&e!==i.EDocsNodeChangeTypeRemoving||a.forceUpdate()},a.onContextMenuClick=function(e){if("rename"===e.key)a.setState({titleEditing:!0});else if("delete"===e.key)a.onShowConfirmModal();else if("refresh"===e.key){a.props.node.load().then((function(e){}))}e.domEvent.stopPropagation()},a.onConfirmDelete=function(){var e=a.props.node;return a.setState({confirmLoading:!0}),e.remove().then((function(e){a.setState({confirmLoading:!1}),e&&a.onHideConfirmModal()}))},a.onShowConfirmModal=function(){a.transitionModal&&a.transitionModal.showTransition()},a.onHideConfirmModal=function(){a.transitionModal&&a.transitionModal.hideTransition()},a.state={expand:!1,addNodeEditing:!1,deleteConfirmVisible:!1,titleEditing:!1,confirmLoading:!1},a.addNodeType=o.EDocsNodeTypeFile,a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.node;e.onChanged(this.onNodeChanged),e.on("expand",this.onExpand)}},{key:"componentWillUnmount",value:function(){var e=this.props.node;e.offChanged(this.onNodeChanged),e.off("expand",this.onExpand)}},{key:"render",value:function(){var e=this,t=this.props,i=t.node,r=t.activeNode,c=t.onActiveNode,d=t.onOpen,l=this.props.hideOps,u=this.props.onlyFolder,h=this.state,p=h.expand,f=h.addNodeEditing,v=h.titleEditing,b=h.confirmLoading,j=i.isSaving()||i.isLoading()||i.isRemoving(),g=i.title(),y=u?i.children().filter((function(e){return e.nodeType()===o.EDocsNodeTypeFolder})):i.children(),O=!u&&i.suportCreateNode(o.EDocsNodeTypeFile),_=i.suportCreateNode(o.EDocsNodeTypeFolder),k=i.suportReloadNode(),x=i.nodeType()===o.EDocsNodeTypeFolder,N=i===r,S=y.map((function(e){return Object(s.jsx)(n,{hideOps:l,onOpen:d,node:e,activeNode:r,onActiveNode:c},e.tempID())})),T=i.isRoot(),C=i.providerType()<=a.EDocsProviderTypeLocal?"\u6587\u4ef6\u5939\u5c06\u4ece\u4ed3\u5e93\u5220\u9664\uff0c\u5220\u9664\u540e\u4e0d\u80fd\u627e\u56de":"\u6587\u4ef6\u5939\u5c06\u4ece\u5217\u8868\u5220\u9664\uff0c\u4f46\u6587\u4ef6\u5939\u4e0b\u6240\u6709\u6587\u6863\u6254\u4fdd\u7559\u5728\u4ed3\u5e93\u4e2d",D=Object(s.jsxs)(Ae.a,{onClick:this.onContextMenuClick,children:[Object(s.jsx)(Ae.a.Item,{children:"\u91cd\u547d\u540d"},"rename"),Object(s.jsx)(Ae.a.Item,{children:"\u5220\u9664"},"delete")]});return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("div",{className:["docs-node",x?" docs-node__folder":"",N?" active":""].join(""),onContextMenu:function(t){e.onActive(t),t.preventDefault(),t.stopPropagation()},children:[Object(s.jsx)(Me.a,{transitionName:"",overlay:D,trigger:["contextMenu"],children:Object(s.jsx)("div",{children:!v&&Object(s.jsxs)("div",{className:"docs-node__nav",onClick:this.onActive,children:[Object(s.jsxs)("div",{className:"docs-node__info",children:[j&&Object(s.jsx)(Se.a,{}),!j&&x&&(p?T?Object(s.jsx)(Te.a,{}):Object(s.jsx)(Ce.a,{}):T?Object(s.jsx)(De.a,{}):Object(s.jsx)(Ee.a,{})),!j&&!x&&Object(s.jsx)(we.a,{}),Object(s.jsx)("span",{className:"docs-node__name",children:g})]}),!l&&!j&&Object(s.jsxs)("div",{className:"docs-node__ops",children:[O&&Object(s.jsx)(m.a,{wrapClassName:"app-guide-newfile",disabled:j,onClick:function(){e.onCreateNode(o.EDocsNodeTypeFile)},icon:Object(s.jsx)(Pe.a,{})}),_&&Object(s.jsx)(m.a,{wrapClassName:"app-guide-newfolder",disabled:j,onClick:function(){e.onCreateNode(o.EDocsNodeTypeFolder)},icon:Object(s.jsx)(Re.a,{})}),k&&Object(s.jsx)(m.a,{wrapClassName:"app-guide-refresh",disabled:j,onClick:this.onReload,icon:Object(s.jsx)(Ie.a,{})})]})]})})}),v&&Object(s.jsx)("div",{className:"docs-node__title-editing",children:Object(s.jsx)(He.a,{text:g,onFinishing:this.onTitleEditing})}),x&&Object(s.jsxs)("div",{className:["docs-node__content",f||S.length?" padding":""].join(""),style:{display:p?"block":"none"},children:[f&&Object(s.jsx)("div",{className:"docs-node__adding",children:Object(s.jsx)(He.a,{text:"",onFinishing:this.onAddNoteEditing})}),S]})]}),Object(s.jsx)(Ue,{ref:function(t){e.transitionModal=t},title:null,footer:Object(s.jsx)("div",{className:"alert-modal__footer",children:Object(s.jsxs)("div",{className:"alert-modal__footer-right",children:[Object(s.jsx)(Le.a,{onClick:this.onHideConfirmModal,children:"\u53d6\u6d88"}),Object(s.jsx)(Le.a,{type:"primary",danger:!0,onClick:this.onConfirmDelete,loading:b,children:"\u5220\u9664"})]})}),closable:!1,width:300,top:"-300px",maskStyle:{backgroundColor:"transparent"},destroyOnClose:!0,transitionName:"",maskTransitionName:"",wrapClassName:"alert-modal",children:Object(s.jsxs)("div",{className:"alert-modal__content",children:[Object(s.jsxs)("div",{className:"alert-modal__title",children:[Object(s.jsx)(Fe.a,{className:"alert-modal__icon"}),Object(s.jsxs)("span",{children:[x?"\u786e\u5b9a\u5220\u9664\u6587\u4ef6\u5939":"\u786e\u5b9a\u5220\u9664\u6587\u6863"," ",g,"? "]})]}),Object(s.jsx)("div",{className:"alert-modal__info",children:Object(s.jsx)("span",{children:x?"".concat(C):"\u6587\u6863\u5c06\u4ece\u4ed3\u5e93\u5220\u9664\uff0c\u5220\u9664\u540e\u4e0d\u80fd\u627e\u56de"})})]})})]})}}]),n}(c.Component),qe=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var o;return Object(h.a)(this,n),(o=t.call(this,e)).onActiveNode=function(e){o.setState({activeNode:e}),o.props.onActiveNode&&o.props.onActiveNode(e)},o.onNodeChanged=function(e){(e===i.EDocsNodeChangeTypeTitle||e===i.EDocsNodeChangeTypeChildren)&&o.forceUpdate()},o.state={activeNode:e.defaultActiveNode||void 0},o}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.root;e.onChanged(this.onNodeChanged),e.children().length&&!this.state.activeNode&&this.setState({activeNode:e.children()[0]})}},{key:"componentWillUnmount",value:function(){this.props.root.offChanged(this.onNodeChanged)}},{key:"render",value:function(){var e=this,t=this.props,n=t.onOpen,o=t.root,a=this.props.hideOps,i=this.props.onlyFolder,r=o.children(),c=this.state.activeNode,d=this.props.wrapClassName||"",l=r.map((function(t){return Object(s.jsx)(We,{onlyFolder:!!i,hideOps:!!a,node:t,activeNode:c,onActiveNode:e.onActiveNode,onOpen:n},t.tempID())}));return Object(s.jsx)("div",{className:["docs-nodes-bar",d].join(" "),children:l})}}]),n}(c.Component),ze=n(104),Ke=(n(360),n(361),n(460)),Ve=n(459),$e=n(456),Je=n(474),Ye=n(244),Xe=n(463),Ze=Ke.a.Option,Qe=Ke.a.OptGroup,et=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var o;return Object(h.a)(this,n),(o=t.call(this,e)).onTokenChecking=function(){var e=o.state.token;o.setState({tokenChecking:!0}),B(e).then((function(t){if(200===t.status){var n=t.data.map((function(t){return{jsDelivr:!0,token:e,id:t.id,name:t.name,owner:{login:t.owner.login,id:t.owner.id,avatar_url:t.owner.avatar_url},private:t.private,permissions:t.permissions}}));o.setState({repos:n,tokenChecked:200===t.status})}o.setState({tokenChecking:!1})}))},o.onTokenChange=function(e){o.setState({token:e.target.value,tokenChecked:!1,repos:[],selRepo:void 0})},o.onSelectRepo=function(e){o.setState({selRepo:e})},o.state={tokenChecking:!1,tokenChecked:!1,token:"",repos:[],selRepo:void 0},o}return Object(p.a)(n,[{key:"render",value:function(){var e=this,t=this.props.type,n=this.state,o=n.tokenChecking,a=n.token,i=n.tokenChecked,r=n.repos,c=n.selRepo,d=[],l=[],u=[];r.forEach((function(e){e.private?d.push(Object(s.jsx)(Ze,{value:JSON.stringify(e),children:e.name},e.id)):(l.push(Object(s.jsx)(Ze,{value:JSON.stringify(e),children:e.name},e.id)),u.push(Object(s.jsx)(Ze,{value:JSON.stringify(e),children:e.name},e.id)))}));var h=[],p=[];return d.length&&h.push(Object(s.jsx)(Qe,{label:"\u79c1\u6709\u4ed3\u5e93",children:d},"private")),l.length&&(h.push(Object(s.jsx)(Qe,{label:"\u516c\u5f00\u4ed3\u5e93",children:l},"public")),p.push(Object(s.jsx)(Qe,{label:"\u516c\u5f00\u4ed3\u5e93",children:u},"public"))),Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(Ve.a.Item,{extra:Object(s.jsx)("a",{style:{fontSize:"12px"},href:"https://github.com/settings/tokens",target:"_blank",children:"\u83b7\u53d6AccessToken"}),name:"".concat(t,"_token"),label:"AccessToken",rules:[{required:!0,message:"\u8bf7\u586b\u5199AccessToken"}],validateStatus:i?"success":"error",children:Object(s.jsx)(Xe.a,{value:a,onChange:this.onTokenChange,addonAfter:i?Object(s.jsx)("span",{style:{color:"green"},children:"\u5df2\u6210\u529f\u6821\u9a8c"}):Object(s.jsx)(Le.a,{disabled:!a,loading:o,size:"small",type:"text",onClick:this.onTokenChecking,children:"\u6821\u9a8c"})})}),Object(s.jsx)(Ve.a.Item,{name:"".concat(t,"_repo"),extra:"image"===t&&Object(s.jsx)("span",{style:{fontSize:"12px"},children:"\u56fe\u5e8a\u53ea\u80fd\u9009\u62e9\u516c\u5f00\u4ed3\u5e93\uff0c\u56fe\u5e8a\u548c\u6587\u6863\u53ef\u5171\u7528\u4e00\u4e2a\u516c\u5f00\u4ed3\u5e93\u3002\u5df2\u5f00\u542fjsDelivr\u4ee3\u7801\u52a0\u901f\u3002"}),label:"\u4ed3\u5e93",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5b58\u50a8\u4ed3\u5e93"}],children:Object(s.jsx)(Ke.a,{showSearch:!0,allowClear:!0,style:{width:"100%"},placeholder:"\u9009\u62e9\u4e00\u4e2a\u4ed3\u5e93",value:c,onChange:this.onSelectRepo,notFoundContent:Object(s.jsx)(ze.a,{image:ze.a.PRESENTED_IMAGE_SIMPLE,description:i?Object(s.jsx)("span",{children:"\u6682\u65e0\u4ed3\u5e93"}):Object(s.jsxs)("span",{children:["\u672a\u6821\u9a8c\uff0c\u8bf7",Object(s.jsx)("span",{children:"\u6821\u9a8cToken"}),"\u83b7\u53d6\u4ed3\u5e93\u5217\u8868"]})}),dropdownRender:function(t){return Object(s.jsxs)("div",{children:[t,Object(s.jsx)($e.a,{style:{margin:"4px 0"}}),Object(s.jsxs)("div",{style:{display:"flex",flexWrap:"nowrap",padding:8,alignItems:"center"},children:[Object(s.jsx)(Le.a,{disabled:!a,onClick:e.onTokenChecking,loading:o,icon:Object(s.jsx)(Ie.a,{}),children:"\u5237\u65b0"}),Object(s.jsxs)("a",{style:{flex:"none",padding:"8px",display:"block",cursor:"pointer"},href:"https://github.com/new",target:"_blank",children:[Object(s.jsx)(Je.a,{})," \u65b0\u5efa\u4ed3\u5e93"]})]})]})},children:"image"===t?p:h})})]})}}]),n}(c.Component);var tt=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){return Object(h.a)(this,n),t.call(this,e)}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props,t=e.info,n=e.type,o=function(e){var t="";try{t=JSON.parse(e.repo).name||""}catch(n){}return{token:e.token,repo:t}}(t);return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(Ve.a.Item,{shouldUpdate:function(){return!0},preserve:!1,name:"".concat(n,"_token"),label:"AccessToken",rules:[{required:!0}],initialValue:o.token,children:Object(s.jsx)(Xe.a,{disabled:!0,value:o.token})}),Object(s.jsx)(Ve.a.Item,{shouldUpdate:function(){return!0},preserve:!1,name:"".concat(n,"_repo"),label:"\u4ed3\u5e93",rules:[{required:!0}],initialValue:o.repo,children:Object(s.jsx)(Xe.a,{disabled:!0,value:o.repo})})]})}}]),n}(c.Component),nt=Ke.a.Option,ot=Ke.a.OptGroup,at=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var o;return Object(h.a)(this,n),(o=t.call(this,e)).onTokenChecking=function(){var e=o.state.token;o.setState({tokenChecking:!0}),Y(e).then((function(t){if(200===t.status){var n=t.data.map((function(t){return{jsDelivr:!0,token:e,id:t.id,path:t.path,name:t.name,owner:{login:t.owner.login,id:t.owner.id,avatar_url:t.owner.avatar_url},private:t.private,permission:t.permission}}));o.setState({repos:n,tokenChecked:200===t.status})}o.setState({tokenChecking:!1})}))},o.onTokenChange=function(e){o.setState({token:e.target.value,tokenChecked:!1,repos:[],selRepo:void 0})},o.onSelectRepo=function(e){o.setState({selRepo:e})},o.state={tokenChecking:!1,tokenChecked:!1,token:"",repos:[],selRepo:void 0},o}return Object(p.a)(n,[{key:"render",value:function(){var e=this,t=this.props.type,n=this.state,o=n.tokenChecking,a=n.token,i=n.tokenChecked,r=n.repos,c=n.selRepo,d=[],l=[],u=[];r.forEach((function(e){e.private?d.push(Object(s.jsx)(nt,{value:JSON.stringify(e),children:e.name},e.id)):(l.push(Object(s.jsx)(nt,{value:JSON.stringify(e),children:e.name},e.id)),u.push(Object(s.jsx)(nt,{value:JSON.stringify(e),children:e.name},e.id)))}));var h=[],p=[];return d.length&&h.push(Object(s.jsx)(ot,{label:"\u79c1\u6709\u4ed3\u5e93",children:d},"private")),l.length&&(h.push(Object(s.jsx)(ot,{label:"\u516c\u5f00\u4ed3\u5e93",children:l},"public")),p.push(Object(s.jsx)(ot,{label:"\u516c\u5f00\u4ed3\u5e93",children:u},"public"))),Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(Ve.a.Item,{extra:Object(s.jsx)("a",{style:{fontSize:"12px"},href:"https://gitee.com/personal_access_tokens",target:"_blank",children:"\u83b7\u53d6AccessToken"}),name:"".concat(t,"_token"),label:"AccessToken",rules:[{required:!0,message:"\u8bf7\u586b\u5199AccessToken"}],validateStatus:i?"success":"error",children:Object(s.jsx)(Xe.a,{value:a,onChange:this.onTokenChange,addonAfter:i?Object(s.jsx)("span",{style:{color:"green"},children:"\u5df2\u6210\u529f\u6821\u9a8c"}):Object(s.jsx)(Le.a,{disabled:!a,loading:o,size:"small",type:"text",onClick:this.onTokenChecking,children:"\u6821\u9a8c"})})}),Object(s.jsx)(Ve.a.Item,{name:"".concat(t,"_repo"),extra:"image"===t&&Object(s.jsx)("span",{style:{fontSize:"12px"},children:"\u56fe\u5e8a\u53ea\u80fd\u9009\u62e9\u516c\u5f00\u4ed3\u5e93\uff0c\u56fe\u5e8a\u548c\u6587\u6863\u53ef\u5171\u7528\u4e00\u4e2a\u516c\u5f00\u4ed3\u5e93\u3002"}),label:"\u4ed3\u5e93",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5b58\u50a8\u4ed3\u5e93"}],children:Object(s.jsx)(Ke.a,{showSearch:!0,allowClear:!0,style:{width:"100%"},placeholder:"\u9009\u62e9\u4e00\u4e2a\u4ed3\u5e93",value:c,onChange:this.onSelectRepo,notFoundContent:Object(s.jsx)(ze.a,{image:ze.a.PRESENTED_IMAGE_SIMPLE,description:i?Object(s.jsx)("span",{children:"\u6682\u65e0\u4ed3\u5e93"}):Object(s.jsxs)("span",{children:["\u672a\u6821\u9a8c\uff0c\u8bf7",Object(s.jsx)("span",{children:"\u6821\u9a8cToken"}),"\u83b7\u53d6\u4ed3\u5e93\u5217\u8868"]})}),dropdownRender:function(t){return Object(s.jsxs)("div",{children:[t,Object(s.jsx)($e.a,{style:{margin:"4px 0"}}),Object(s.jsxs)("div",{style:{display:"flex",flexWrap:"nowrap",padding:8,alignItems:"center"},children:[Object(s.jsx)(Le.a,{disabled:!a,onClick:e.onTokenChecking,loading:o,icon:Object(s.jsx)(Ie.a,{}),children:"\u5237\u65b0"}),Object(s.jsxs)("a",{style:{flex:"none",padding:"8px",display:"block",cursor:"pointer"},href:"https://gitee.com/projects/new",target:"_blank",children:[Object(s.jsx)(Je.a,{})," \u65b0\u5efa\u4ed3\u5e93"]})]})]})},children:"image"===t?p:h})})]})}}]),n}(c.Component);var it=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){return Object(h.a)(this,n),t.call(this,e)}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props,t=e.info,n=e.type,o=function(e){var t="";try{t=JSON.parse(e.repo).name||""}catch(n){}return{token:e.token,repo:t}}(t);return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(Ve.a.Item,{shouldUpdate:function(){return!0},preserve:!1,name:"".concat(n,"_token"),label:"AccessToken",rules:[{required:!0}],initialValue:o.token,children:Object(s.jsx)(Xe.a,{disabled:!0,value:o.token})}),Object(s.jsx)(Ve.a.Item,{shouldUpdate:function(){return!0},preserve:!1,name:"".concat(n,"_repo"),label:"\u4ed3\u5e93",rules:[{required:!0}],initialValue:o.repo,children:Object(s.jsx)(Xe.a,{disabled:!0,value:o.repo})})]})}}]),n}(c.Component),rt=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props.type;return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(Ve.a.Item,{extra:Object(s.jsx)("span",{style:{fontSize:"12px"},children:"\u6587\u6863\u4e0e\u6b64\u5bc6\u7801\u8fdb\u884c\u7ed1\u5b9a\u3002\u5efa\u8bae\u4f7f\u7528\u82f1\u6587\u5b57\u6bcd\u3001\u6570\u5b57\u7ec4\u5408\u3002"}),name:"".concat(e,"_token"),label:"\u8bbf\u95ee\u5bc6\u7801",rules:[{required:!0,message:"\u8bf7\u586b\u5199\u6d4f\u89c8\u5668\u6570\u636e\u5e93\u552f\u4e00\u533a\u5206\u5bc6\u7801"}],children:Object(s.jsx)(Xe.a,{placeholder:"\u8bbe\u7f6e\u6d4f\u89c8\u5668\u6570\u636e\u5e93\u552f\u4e00\u533a\u5206\u5bc6\u7801"})})})}}]),n}(c.Component),st=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props,t=e.type,n=e.info;return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(Ve.a.Item,{extra:Object(s.jsx)("span",{style:{fontSize:"12px"},children:"\u6b64\u6807\u8bc6\u7528\u6765\u67e5\u8be2\u6d4f\u89c8\u5668\u6570\u636e\u5e93\u6587\u6863\uff0c\u8bf7\u8bb0\u4f4f\u6216\u4fdd\u5b58\u597d\u8fd9\u4e2a\u6807\u8bc6\u3002"}),name:"".concat(t,"_token"),label:"\u6807\u8bc6",rules:[{required:!0,message:"\u8bf7\u586b\u5199\u6d4f\u89c8\u5668\u6570\u636e\u5e93\u533a\u5206\u6807\u8bc6"}],initialValue:n.token,children:Object(s.jsx)(Xe.a,{placeholder:"\u6d4f\u89c8\u5668\u6570\u636e\u5e93\u533a\u5206\u6807\u8bc6",disabled:!0})})})}}]),n}(c.Component),ct=n(135),dt=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var o;return Object(h.a)(this,n),(o=t.call(this,e)).onSelectDirectory=function(){Object($.j)().then((function(e){if(e){var t=o.props,n=t.type;(0,t.setField)(Object(ct.a)({},"".concat(n,"_repo"),e)),o.setState({directory:e})}}))},o.state={directory:""},o}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props.type,t=this.state.directory;return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(Ve.a.Item,{name:"".concat(e,"_repo"),extra:"image"===e&&Object(s.jsx)("span",{style:{fontSize:"12px"},children:"\u6ce8\uff1a\u5bfc\u51fa\uff08\u590d\u5236\uff09\u5185\u5bb9\u53d1\u5e03\u5230\u7ebf\u4e0a\uff0c\u56fe\u7247\u8def\u5f84\u5c06\u4e0d\u80fd\u8bbf\u95ee\u3002\u53e6\u8bf7\u4e0d\u8981\u548c\u672c\u5730\u6587\u6863\u4ed3\u5e93\u4f7f\u7528\u540c\u4e00\u4e2a\u76ee\u5f55\u3002"}),label:"\u6839\u76ee\u5f55",initialValue:t,rules:[{required:!0,message:"\u8bf7\u8bbe\u7f6e\u5b58\u50a8\u6839\u76ee\u5f55\u8def\u5f84"}],children:Object(s.jsxs)("div",{style:{display:"flex"},children:[Object(s.jsx)(Xe.a,{placeholder:"\u5b58\u50a8\u6839\u76ee\u5f55\u8def\u5f84",readOnly:!0,value:t}),Object(s.jsx)(Le.a,{type:"primary",style:{marginLeft:"5px"},onClick:this.onSelectDirectory,children:"\u9009\u62e9"})]})})})}}]),n}(c.Component),lt=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props,t=e.type,n=e.info;return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(Ve.a.Item,{name:"".concat(t,"_repo"),label:"\u6839\u76ee\u5f55",rules:[{required:!0,message:"\u8bf7\u8bbe\u7f6e\u5b58\u50a8\u6839\u76ee\u5f55\u8def\u5f84"}],initialValue:n.repo,children:Object(s.jsx)(Xe.a,{placeholder:"\u5b58\u50a8\u6839\u76ee\u5f55\u8def\u5f84",disabled:!0})})})}}]),n}(c.Component),ut={};Object(re.b)()?ut[P.EPlatformTypeLocal]={type:P.EPlatformTypeLocal,name:"\u78c1\u76d8\uff08\u672c\u5730\uff09",edit:dt,info:lt}:ut[P.EPlatformTypeBrowser]={type:P.EPlatformTypeBrowser,name:"\u6d4f\u89c8\u5668\u6570\u636e\u5e93\uff08\u672c\u5730\uff09",edit:rt,info:st},ut[P.EPlatformTypeGithub]={type:P.EPlatformTypeGithub,name:"GitHub",edit:et,info:tt},ut[P.EPlatformTypeGitee]={type:P.EPlatformTypeGitee,name:"Gitee\uff08\u56fd\u5185\u63a8\u8350\uff09",edit:at,info:it};var ht={};Object(re.b)()&&(ht[P.EPlatformTypeLocal]={type:P.EPlatformTypeLocal,name:"\u78c1\u76d8\uff08\u672c\u5730\uff09",edit:dt,info:lt}),ht[P.EPlatformTypeGithub]={type:P.EPlatformTypeGithub,name:"GitHub",edit:et,info:tt},ht[P.EPlatformTypeGitee]={type:P.EPlatformTypeGitee,name:"Gitee\uff08\u56fd\u5185\u63a8\u8350\uff09",edit:at,info:it};var pt=navigator.userAgent.toLowerCase(),ft=/chrome\/(\d+\.\d)/i.test(pt)||/firefox/.test(pt)||/safari/.test(pt),vt=Ke.a.Option,mt={labelCol:{span:7},wrapperCol:{span:16}},bt={wrapperCol:{offset:7,span:16}},jt=0,gt=Date.now();var yt,Ot=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var o;return Object(h.a)(this,n),(o=t.call(this,e)).transitionModal=void 0,o.alertModal=void 0,o.form=void 0,o.onDocSelectPlatform=function(e){o.setState({docSelectPlatform:e})},o.onImageSelectPlatform=function(e){o.setState({imageSelectPlatform:e})},o.onHide=function(){o.alertModal&&o.alertModal.showTransition(),o.transitionModal&&o.transitionModal.hideTransition(),o.setState({docSelectPlatform:P.EPlatformTypeNone,imageSelectPlatform:P.EPlatformTypeNone})},o.onPlatformAdd=function(e){try{var t={id:"".concat(gt).concat(++jt),title:e.title,doc_repo:{platform:e.doc_platform,token:e.doc_token||"",repo:e.doc_repo||""},image_repo:{platform:e.image_platform,token:e.image_token||"",repo:e.image_repo||""}},n=je(t.doc_repo),a=ge(t.image_repo);n&&a&&(o.setState({initingRepo:!0}),Promise.all([n.init(),a.init()]).then((function(e){if(o.setState({initingRepo:!1}),e[0].status===r.EInitResultStatusSuccess)if(e[1].status===r.EInitResultStatusSuccess){var n=xe.a.getSetting("doc_providers")||[];n.push(t),xe.a.setSetting("doc_providers",n),o.onHide()}else Ge.b.error("\u6dfb\u52a0\u56fe\u5e8a\u4ed3\u5e93\u5931\u8d25\uff0c".concat(e[0].status===r.EInitResultStatusNoBranch?"\u4ed3\u5e93\u8fd8\u672a\u521d\u59cb\u5316\u5206\u652f":"\u8bf7\u68c0\u67e5\u4ed3\u5e93\u662f\u5426\u53ef\u4ee5\u6b63\u5e38\u4f7f\u7528"));else Ge.b.error("\u6dfb\u52a0\u6587\u6863\u4ed3\u5e93\u5931\u8d25\uff0c".concat(e[0].status===r.EInitResultStatusNoBranch?"\u4ed3\u5e93\u8fd8\u672a\u521d\u59cb\u5316\u5206\u652f":"\u8bf7\u68c0\u67e5\u4ed3\u5e93\u662f\u5426\u53ef\u4ee5\u6b63\u5e38\u4f7f\u7528"))})))}catch(i){}},o.onChangeField=function(e){o.form&&o.form.setFieldsValue(e)},o.onConfirmAlert=function(){o.alertModal&&o.alertModal.hideTransition()},o.state={docSelectPlatform:P.EPlatformTypeNone,imageSelectPlatform:P.EPlatformTypeNone,initingRepo:!1},o}return Object(p.a)(n,[{key:"show",value:function(){this.transitionModal&&ft?this.transitionModal.showTransition():this.alertModal&&!ft&&this.alertModal.showTransition()}},{key:"render",value:function(){var e=this,t=this.state,n=t.initingRepo,o=t.docSelectPlatform,a=(t.imageSelectPlatform,Object.keys(ut).map((function(e){var t=ut[parseInt(e)];return Object(s.jsx)(vt,{value:t.type,children:t.name},t.type)}))),i=ut[o]?ut[o].edit:null,r=Object.keys(ht).map((function(e){var t=ht[parseInt(e)];return Object(s.jsx)(vt,{value:t.type,children:t.name},t.type)})),c=ht[this.state.imageSelectPlatform]?ht[this.state.imageSelectPlatform].edit:null;return Object(s.jsxs)("div",{className:"docs-provider-add",children:[Object(s.jsx)(Ue,{ref:function(t){e.transitionModal=t},title:Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(g.a,{}),Object(s.jsx)("span",{style:{marginLeft:"5px"},children:"\u6dfb\u52a0\u4ed3\u5e93"})]}),footer:null,onOk:this.onHide,onCancel:this.onHide,width:500,top:"-500px",maskStyle:{backgroundColor:"transparent"},destroyOnClose:!0,transitionName:"",maskTransitionName:"",wrapClassName:"docs-provider-add-modal",children:Object(s.jsx)("div",{className:"docs-provider-add-modal-body",children:Object(s.jsxs)(Ve.a,Object(O.a)(Object(O.a)({ref:function(t){e.form=t}},mt),{},{name:"docs-provider-add-form",onFinish:this.onPlatformAdd,children:[Object(s.jsx)($e.a,{orientation:"left",children:"\u6587\u6863\u4ed3\u5e93"}),Object(s.jsx)(Ve.a.Item,{name:"doc_platform",label:"\u5b58\u50a8\u5e73\u53f0",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u6587\u6863\u5b58\u50a8\u5e73\u53f0"}],children:Object(s.jsx)(Ke.a,{placeholder:"\u9009\u62e9\u5b58\u50a8\u5e73\u53f0",onSelect:this.onDocSelectPlatform,children:a})}),!!i&&d.a.createElement(i,{type:"doc",setField:this.onChangeField}),Object(s.jsx)($e.a,{orientation:"left",children:"\u56fe\u5e8a\u4ed3\u5e93"}),Object(s.jsx)(Ve.a.Item,{name:"image_platform",label:"\u5b58\u50a8\u5e73\u53f0",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u56fe\u5e8a\u5b58\u50a8\u5e73\u53f0"}],children:Object(s.jsx)(Ke.a,{placeholder:"\u9009\u62e9\u5b58\u50a8\u5e73\u53f0",onSelect:this.onImageSelectPlatform,children:r})}),!!c&&d.a.createElement(c,{type:"image",setField:this.onChangeField}),Object(s.jsxs)(Ve.a.Item,Object(O.a)(Object(O.a)({},bt),{},{children:[Object(s.jsx)(Le.a,{loading:n,disabled:n,type:"primary",htmlType:"submit",icon:Object(s.jsx)(Je.a,{}),children:n?"\u521d\u59cb\u5316...":"\u6dfb\u52a0"}),Object(s.jsx)(Le.a,{style:{marginLeft:"10px",display:"none"},type:"link",htmlType:"button",icon:Object(s.jsx)(Ye.a,{}),children:"\u5e2e\u52a9"})]}))]}))})}),!ft&&Object(s.jsx)(Ue,{ref:function(t){e.alertModal=t},title:null,footer:Object(s.jsx)("div",{className:"alert-modal__footer",children:Object(s.jsx)("div",{className:"alert-modal__footer-right",children:Object(s.jsx)(Le.a,{type:"primary",onClick:this.onConfirmAlert,children:"\u77e5\u9053\u4e86"})})}),closable:!0,onCancel:this.onConfirmAlert,width:400,top:"-300px",maskStyle:{backgroundColor:"transparent"},destroyOnClose:!0,transitionName:"",maskTransitionName:"",wrapClassName:"alert-modal",children:Object(s.jsxs)("div",{className:"alert-modal__content",children:[Object(s.jsxs)("div",{className:"alert-modal__title",children:[Object(s.jsx)(Fe.a,{className:"alert-modal__icon"}),Object(s.jsx)("span",{children:"\u5f53\u524d\u6d4f\u89c8\u5668\u5c1a\u672a\u517c\u5bb9"})]}),Object(s.jsx)("div",{className:"alert-modal__info",children:Object(s.jsxs)("span",{children:["\u5df2\u517c\u5bb9Chrome\u3001Fixfox\u53caSafari\u6d4f\u89c8\u5668\uff0c\u63a8\u8350\u4f7f\u7528",Object(s.jsx)("a",{target:"_blank",href:"https://www.google.cn/chrome/",children:"Chrome\u6d4f\u89c8\u5668"}),"\uff0c\u6216\u8005Chromium\u5185\u6838\u6d4f\u89c8\u5668"]})})]})})]})}}]),n}(c.Component),_t=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var o;return Object(h.a)(this,n),(o=t.call(this,e)).provider=void 0,o.onAddDocRepo=function(){o.provider&&o.provider.show()},o.state={docVisible:!1},o}return Object(p.a)(n,[{key:"render",value:function(){var e=this;return Object(s.jsxs)("div",{className:"docs-empty-repo",children:[Object(s.jsx)(ze.a,{image:ze.a.PRESENTED_IMAGE_SIMPLE,description:Object(s.jsxs)("span",{children:["\u6682\u65e0\u4ed3\u5e93\uff0c",Object(s.jsx)("span",{className:"docs-repo__add",onClick:this.onAddDocRepo,children:"\u7acb\u5373\u6dfb\u52a0"})]})}),Object(s.jsx)(Ot,{ref:function(t){e.provider=t}})]})}}]),n}(c.Component),kt=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var o;return Object(h.a)(this,n),(o=t.call(this,e)).provider=void 0,o.onAddDocRepo=function(){o.provider&&o.provider.show()},o.onExpand=function(){Ne.expand()},o.onCollapse=function(){Ne.collapse()},o.onNodeChanged=function(e){e===i.EDocsNodeChangeTypeChildren&&o.forceUpdate()},o}return Object(p.a)(n,[{key:"componentWillUnmount",value:function(){Ne.offChanged(this.onNodeChanged)}},{key:"componentDidMount",value:function(){Ne.onChanged(this.onNodeChanged),Ne.expand(a.EDocsProviderTypeLocal)}},{key:"render",value:function(){var e=this,t=this.props.onOpen,n=this.props.onActiveNode,o=Ne,a=o.children();return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("div",{className:"docs-bar",children:[Object(s.jsx)("div",{className:"docs-bar-header",children:Object(s.jsxs)("div",{className:"docs-bar-ops",children:[Object(s.jsx)(m.a,{id:"app-guide-collapse",icon:Object(s.jsx)(b.a,{onClick:this.onCollapse})}),Object(s.jsx)(m.a,{id:"app-guide-expand",icon:Object(s.jsx)(j.a,{}),onClick:this.onExpand}),Object(s.jsx)(m.a,{id:"app-guide-repo",icon:Object(s.jsx)(g.a,{}),onClick:this.onAddDocRepo})]})}),!a.length&&Object(s.jsx)(_t,{}),!!a.length&&Object(s.jsx)(qe,{onActiveNode:n,defaultActiveNode:a[0],wrapClassName:"docs-bar-providers",onOpen:t,root:o})]}),Object(s.jsx)(Ot,{ref:function(t){e.provider=t}})]})}}]),n}(c.Component),xt=n(86),Nt=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var o;return Object(h.a)(this,n),(o=t.call(this,e)).onNodeChanged=function(e){e!==i.EDocsNodeChangeTypeTitle&&e!==i.EDocsNodeChangeTypeSaving&&e!==i.EDocsNodeChangeTypeLoading&&e!==i.EDocsNodeChangeTypeRemoving||o.forceUpdate()},o.state={path:[]},o}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.result.node;e.onChanged(this.onNodeChanged),this.setState({path:be(e)})}},{key:"componentWillUnmount",value:function(){this.props.result.node.offChanged(this.onNodeChanged)}},{key:"render",value:function(){var e=this.props.result,t=e.node,n=e.match,a=n?n.map((function(e,t){if(0!=t&&e.length)return t%2==0?Object(s.jsx)("em",{className:"search-mark",children:e},t):Object(s.jsx)("span",{children:e},t)})):t.title()||"Untitled",i=this.props.onOpen,r=t.isSaving()||t.isLoading()||t.isRemoving(),c=this.state.path.map((function(e){return Object(s.jsxs)("span",{children:[e.title(),e.nodeType()===o.EDocsNodeTypeFolder&&Object(s.jsx)(xt.a,{})]},e.tempID())}));return Object(s.jsxs)("div",{className:["docs-search-result-item"].join(" "),onClick:function(e){i(t),e.stopPropagation()},children:[Object(s.jsxs)("div",{className:"docs-search-result-item-info",children:[Object(s.jsx)("span",{className:"docs-search-result-item-icon",children:r?Object(s.jsx)(Se.a,{}):Object(s.jsx)(we.a,{})}),Object(s.jsx)("span",{children:a})]}),Object(s.jsx)("div",{className:"docs-search-result-item-path",children:c})]})}}]),n}(c.Component),St=function(){function e(t){Object(h.a)(this,e),this._searchKey=void 0,this._roots=void 0,this._searchRegex=void 0,this._listeners=void 0,this._cancelled=void 0,this._nodePool=void 0,this.searchDelay=void 0,this._roots=t.roots,this._cancelled=!1,this._nodePool=[],this.searchDelay=Object(ye.b)(this.search,500)}return Object(p.a)(e,[{key:"start",value:function(e,t){this.cancel(),t.onSearchBegin(),e?this.searchDelay(e,t):t.onSearchEnd()}},{key:"cancel",value:function(){this._cancelled=!0,this._listeners&&this._listeners.onSearchCancel(),this._listeners=null}},{key:"search",value:function(e,t){this._searchKey=e,this._searchRegex=Object($.i)(e),this._listeners=t,this._nodePool=Array.from(this._roots),this._cancelled=!1,this.searchIteration()}},{key:"searchIteration",value:function(){if(this._nodePool.length&&!this._cancelled){var e=this._nodePool.pop();e&&this.checkNodeLoaded(e)}else this._listeners&&this._listeners.onSearchEnd()}},{key:"checkNodeLoaded",value:function(e){var t=this;e.isLoaded()?this.searchNodeTraversal(e):e.isLoading()?setTimeout((function(){t.checkNodeLoaded(e)}),200):e.load().then((function(n){n&&t.searchNodeTraversal(e)}))}},{key:"searchNodeTraversal",value:function(e){var t=this;if(!this._cancelled){var n=[];me(e,(function(e){if(e.nodeType()===o.EDocsNodeTypeFile){var a=e.title().match(t._searchRegex);a&&n.push({key:t._searchKey,node:e,match:a})}else e.isLoaded()||t._nodePool.unshift(e)})),n.length&&this._listeners&&this._listeners.onSearchProgress(n),this.searchIteration()}}}]),e}(),Tt=(n(429),Xe.a.Search),Ct=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var o;return Object(h.a)(this,n),(o=t.call(this,e)).searchEngine=void 0,o.onSearchTextChangeProxy=void 0,o.searchResultsCache=void 0,o.onSearch=function(e){o.setState({searchKey:e,searchLoading:!0}),o.searchEngine.start(e,{onSearchBegin:o.onSearchBegin,onSearchProgress:o.onSearchProgress,onSearchEnd:o.onSearchEnd,onSearchCancel:o.onSearchCancel})},o.onSearchBegin=function(){o.searchResultsCache=[],o.setState({searchResults:o.searchResultsCache,searchLoading:!0})},o.onSearchCancel=function(){o.searchResultsCache=[],o.setState({searchLoading:!1,searchResults:o.searchResultsCache,searchKey:""})},o.onSearchProgress=function(e){var t=o.searchResultsCache||[];o.searchResultsCache=t.concat(e),o.setState({searchResults:o.searchResultsCache})},o.onSearchEnd=function(){o.setState({searchLoading:!1})},o.onSearchTextChange=function(e){var t=e.target.value;o.onSearchTextChangeProxy(t)},o.state={searchKey:"",searchLoading:!1,searchResults:[]},o.searchEngine=new St({roots:[Ne]}),o.onSearchTextChangeProxy=Object(ye.b)(o.onSearch,200),o.searchResultsCache=[],o}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props.onOpen,t=this.state,n=t.searchLoading,o=t.searchResults,a=t.searchKey,i=o.map((function(t){return Object(s.jsx)(Nt,{result:t,onOpen:e},t.node.tempID())}));return Object(s.jsxs)("div",{className:"docs-search-bar",children:[Object(s.jsx)("div",{className:"docs-search-bar-header",children:Object(s.jsx)(Tt,{loading:n,onChange:this.onSearchTextChange,placeholder:"\u8f93\u5165\u5173\u952e\u5b57\u641c\u7d22\u6587\u6863",onSearch:this.onSearch,enterButton:!0})}),Object(s.jsxs)("div",{className:"docs-search-bar-body",children:[n||!a.length||o.length?Object(s.jsx)(s.Fragment,{}):Object(s.jsx)(ze.a,{image:ze.a.PRESENTED_IMAGE_SIMPLE,description:Object(s.jsx)("span",{children:"\u641c\u7d22\u65e0\u7ed3\u679c"})}),i]})]})}}]),n}(c.Component),Dt=n(148);n(430);!function(e){e[e.EDocsSelectDocs=0]="EDocsSelectDocs",e[e.EDocsSelectSearch=1]="EDocsSelectSearch"}(yt||(yt={}));Xe.a.Search;var Et,wt=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var o;return Object(h.a)(this,n),(o=t.call(this,e)).onTabSelect=function(e){o.state.tabSelect;o.setState({tabSelect:e},(function(){}))},o.state={tabSelect:yt.EDocsSelectDocs},o}return Object(p.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.onOpen,n=this.state.tabSelect,o=this.props.onActiveNode;return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("div",{className:"docs",children:[Object(s.jsxs)("div",{className:"docs-nav",children:[Object(s.jsx)("div",{className:["docs-nav-before",n===yt.EDocsSelectDocs?" active":""].join(""),children:Object(s.jsx)("div",{className:"docs-nav-item-inner"})}),Object(s.jsxs)("div",{className:"docs-nav-inner",children:[Object(s.jsx)("div",{className:["docs-nav-item",n===yt.EDocsSelectDocs?" active":" before-active"].join(""),onClick:function(){e.onTabSelect(yt.EDocsSelectDocs)},children:Object(s.jsx)("div",{className:"docs-nav-item-inner",children:Object(s.jsx)(De.a,{})})}),Object(s.jsx)("div",{id:"app-guide-search",className:["docs-nav-item",n===yt.EDocsSelectSearch?" active":" after-active"].join(""),onClick:function(){e.onTabSelect(yt.EDocsSelectSearch)},children:Object(s.jsx)("div",{className:"docs-nav-item-inner",children:Object(s.jsx)(Dt.a,{})})})]}),Object(s.jsx)("div",{className:["docs-nav-after",n===yt.EDocsSelectSearch?" active":""].join(""),children:Object(s.jsx)("div",{className:"docs-nav-item-inner"})})]}),Object(s.jsxs)("div",{className:"docs-tab",children:[Object(s.jsx)("div",{className:"docs-tab__docs",style:{display:n!==yt.EDocsSelectDocs?"none":"block"},children:Object(s.jsx)(kt,{onActiveNode:o,onOpen:t})}),Object(s.jsx)("div",{className:"docs-tab__search",style:{display:n!==yt.EDocsSelectSearch?"none":"block"},children:Object(s.jsx)(Ct,{onOpen:t})})]})]})})}}]),n}(c.Component),Pt=(n(431),function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var o;return Object(h.a)(this,n),(o=t.call(this,e)).transitionModal=void 0,o.onHide=function(){o.transitionModal&&o.transitionModal.hideTransition()},o.onOpen=function(e){(0,o.props.onOpen)(e),o.onHide()},o.onNodeChanged=function(e){e===i.EDocsNodeChangeTypeChildren&&o.forceUpdate()},o.state={visible:!1},o}return Object(p.a)(n,[{key:"show",value:function(){this.transitionModal&&this.transitionModal.showTransition()}},{key:"componentWillUnmount",value:function(){Ne.offChanged(this.onNodeChanged)}},{key:"componentDidMount",value:function(){Ne.onChanged(this.onNodeChanged)}},{key:"render",value:function(){var e=this,t=Ne,n=t.children();return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)(Ue,{ref:function(t){e.transitionModal=t},title:Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("span",{children:"\u65b0\u5efa/\u6253\u5f00\u6587\u6863"}),Object(s.jsxs)("span",{className:"docs-new-modal-tip",children:["\u9009\u62e9\u5b58\u50a8\u76ee\u5f55\uff0c\u70b9\u51fb ",Object(s.jsx)(Pe.a,{})," \u521b\u5efa\u6587\u6863"]})]}),onOk:this.onHide,onCancel:this.onHide,footer:null,width:400,top:"-300px",maskStyle:{backgroundColor:"transparent"},transitionName:"",maskTransitionName:"",wrapClassName:"docs-new-modal",children:Object(s.jsx)("div",{className:"docs-new-modal-body",children:Object(s.jsxs)("div",{className:"docs-folder-bar",children:[!n.length&&Object(s.jsx)(_t,{}),Object(s.jsx)(qe,{wrapClassName:"docs-bar-providers",onOpen:this.onOpen,root:t})]})})})})}}]),n}(c.Component)),Rt=n(482),It=n(480),Ft=n(483),At=n(484),Mt=n(485),Lt=(n(432),n(433),n(478)),Bt=n.p+"static/media/qrcode_for_geekeditor.83a2f37b.jpg",Ut=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(h.a)(this,n);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).transitionModal=void 0,e.onHide=function(){e.transitionModal&&e.transitionModal.hideTransition()},e.onShow=function(){e.transitionModal&&e.transitionModal.showTransition()},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this;return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(m.a,{id:"app-guide-qrcode",icon:Object(s.jsx)(Lt.a,{}),wrapClassName:"app-bar-item",onClick:this.onShow}),Object(s.jsx)(Ue,{ref:function(t){e.transitionModal=t},title:null,footer:null,onOk:this.onHide,onCancel:this.onHide,width:260,top:"-350px",maskStyle:{backgroundColor:"transparent"},destroyOnClose:!0,transitionName:"",maskTransitionName:"",closeIcon:null,closable:!1,wrapClassName:"qrcode-modal",children:Object(s.jsxs)("div",{className:"qrcode-main",children:[Object(s.jsx)("div",{className:"qrcode-img",children:Object(s.jsx)("img",{src:Bt})}),Object(s.jsxs)("div",{className:"qrcode-tip",children:[Object(s.jsx)("p",{children:"\u5173\u6ce8\u300c\u6781\u5ba2\u7f16\u8f91\u5668\u300d\u516c\u4f17\u53f7"}),Object(s.jsx)("p",{children:"\u53cd\u9988Bug\u3001\u63d0\u9700\u6c42\u53ca\u4e86\u89e3\u540e\u7eed\u7248\u672c\u66f4\u65b0"})]})]})})]})}}]),n}(c.Component),Ht=(n(434),n(457)),Gt={labelCol:{span:6},wrapperCol:{span:16}},Wt={wrapperCol:{offset:6,span:16}},qt=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var o;return Object(h.a)(this,n),(o=t.call(this,e)).onSaveDocProvider=function(e){var t=xe.a.getSetting("doc_providers")||[],n=o.props.provider;t.forEach((function(o,a){if(o.id===n.id){var i=e.title;t[a]=Object.assign(o,{title:i})}})),xe.a.setSetting("doc_providers",t),o.setState({fieldChanged:!1})},o.onDeleteDocProvider=function(){var e=xe.a.getSetting("doc_providers")||[],t=o.props.provider;e.forEach((function(n,o){n.id===t.id&&e.splice(o,1)})),xe.a.setSetting("doc_providers",e)},o.onFieldsChange=function(){o.setState({fieldChanged:!0})},o.state={fieldChanged:!1},o}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props.provider,t=this.state.fieldChanged,n=ut[e.doc_repo.platform].info,o=ht[e.image_repo.platform].info;return Object(s.jsx)("div",{className:"settings-docs-provider",children:Object(s.jsxs)(Ve.a,Object(O.a)(Object(O.a)({},Gt),{},{name:"docs-provider",preserve:!1,onFieldsChange:this.onFieldsChange,onFinish:this.onSaveDocProvider,children:[Object(s.jsx)($e.a,{orientation:"left",children:"\u6587\u6863\u4ed3\u5e93"}),Object(s.jsx)(Ve.a.Item,{name:"doc_platform",label:"\u5b58\u50a8\u5e73\u53f0",rules:[{required:!0}],initialValue:ut[e.doc_repo.platform].name,children:Object(s.jsx)(Xe.a,{disabled:!0})}),!!n&&d.a.createElement(n,{info:e.doc_repo,type:"doc"}),Object(s.jsx)($e.a,{orientation:"left",children:"\u56fe\u5e8a\u4ed3\u5e93"}),Object(s.jsx)(Ve.a.Item,{name:"image_platform",label:"\u5b58\u50a8\u5e73\u53f0",rules:[{required:!0}],initialValue:ut[e.image_repo.platform].name,children:Object(s.jsx)(Xe.a,{disabled:!0})}),!!o&&d.a.createElement(o,{info:e.image_repo,type:"image"}),Object(s.jsxs)(Ve.a.Item,Object(O.a)(Object(O.a)({},Wt),{},{children:[Object(s.jsx)(Le.a,{disabled:!t,htmlType:"submit",type:"primary",children:"\u4fdd\u5b58"}),Object(s.jsx)(Ht.a,{onConfirm:this.onDeleteDocProvider,destroyTooltipOnHide:{keepParent:!1},placement:"top",title:"\u786e\u5b9a\u5220\u9664\u8be5\u4ed3\u5e93\uff1f",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",children:Object(s.jsx)(Le.a,{style:{marginLeft:"10px"},children:"\u5220\u9664"})})]}))]}))})}}]),n}(c.Component),zt=n(479),Kt=n(245),Vt=n(246),$t=n(481),Jt=Ae.a.SubMenu,Yt=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var o;return Object(h.a)(this,n),(o=t.call(this,e)).transitionModal=void 0,o.provider=void 0,o.onOk=function(){o.hide()},o.onSelect=function(e){o.setState({selectedKey:e.key})},o.onAddDocRepo=function(){o.provider&&o.provider.show()},o.onTriggerBuiltinProvider=function(){console.log(xe.a.getSetting("hide_builtin_provider"));var e=!!xe.a.getSetting("hide_builtin_provider");o.setState({hideBuiltinProvider:!e},(function(){xe.a.setSetting("hide_builtin_provider",!e)}))},o.state={selectedKey:e.key||"docProviders",defaultSelectedKeys:[e.key||"docProviders"],defaultOpenKeys:[],hideBuiltinProvider:!!xe.a.getSetting("hide_builtin_provider")},xe.a.on("doc_providers",(function(){o.forceUpdate()})),o}return Object(p.a)(n,null,[{key:"newInstance",value:function(e){e=e||{};var t=document.createElement("div");document.body.appendChild(t);var o=u.a.render(d.a.createElement(n,e),t);return{open:function(e){o.show(e)},close:function(){o.hide()},destory:function(){u.a.unmountComponentAtNode(t),document.body.removeChild(t)}}}}]),Object(p.a)(n,[{key:"show",value:function(e){var t=(e=e||{}).key,n=this.sortedProviders();t=!t&&n.length?n[0].id:"docProviders",this.setState({selectedKey:t,defaultSelectedKeys:[t],defaultOpenKeys:["docProviders"]}),this.transitionModal&&this.transitionModal.showTransition()}},{key:"hide",value:function(){this.transitionModal&&this.transitionModal.hideTransition()}},{key:"sortedProviders",value:function(){var e=(xe.a.getSetting("doc_providers")||[]).sort((function(e,t){return e.doc_repo.platform-t.doc_repo.platform})).filter((function(e){return!!ut[e.doc_repo.platform]}));return e}},{key:"render",value:function(){var e=this,t=this.state,n=t.selectedKey,o=t.defaultSelectedKeys,a=t.defaultOpenKeys,i=t.hideBuiltinProvider,r=void 0,c=this.sortedProviders().map((function(e,t){e.id===n&&(r=Object(s.jsx)(qt,{provider:e},e.id));var o=ut[e.doc_repo.platform].name.split("\uff08")[0];return Object(s.jsx)(Ae.a.Item,{icon:e.doc_repo.platform===P.EPlatformTypeGithub?Object(s.jsx)(zt.a,{}):e.doc_repo.platform===P.EPlatformTypeGitee?Object(s.jsx)("i",{className:"be-gitee",style:{fontSize:"12px"}}):Object(s.jsx)(De.a,{}),children:e.title||o},e.id)}));return Object(s.jsxs)("div",{className:"settings",children:[Object(s.jsx)(Ue,{ref:function(t){e.transitionModal=t},title:Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)(It.a,{}),Object(s.jsx)("span",{style:{marginLeft:"5px"},children:"\u8bbe\u7f6e"}),Object(s.jsxs)(Le.a,{style:{marginLeft:"20px"},type:"text",icon:i?Object(s.jsx)(Vt.a,{}):Object(s.jsx)(Kt.a,{}),onClick:this.onTriggerBuiltinProvider,children:[i?"\u663e\u793a":"\u9690\u85cf","\u793a\u4f8b\u6587\u6863"]}),Object(s.jsx)(Le.a,{style:{marginLeft:"20px"},type:"text",icon:Object(s.jsx)($t.a,{}),onClick:this.onAddDocRepo,children:"\u6dfb\u52a0\u4ed3\u5e93"})]}),footer:null,onOk:this.onOk,onCancel:this.onOk,width:620,top:"-500px",maskStyle:{backgroundColor:"transparent"},destroyOnClose:!0,transitionName:"",maskTransitionName:"",wrapClassName:"settings-modal",children:Object(s.jsxs)("div",{className:"settings-main",children:[Object(s.jsx)(Ae.a,{mode:"inline",onSelect:this.onSelect,defaultSelectedKeys:o,defaultOpenKeys:a,style:{width:150},children:Object(s.jsx)(Jt,{icon:Object(s.jsx)(g.a,{}),title:Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("span",{children:"\u4ed3\u5e93"})}),children:c},"docProviders")}),Object(s.jsx)("div",{className:"settings-tab",children:r})]})}),Object(s.jsx)(Ot,{ref:function(t){e.provider=t}})]})}}]),n}(c.Component),Xt=function(e){Et||(Et=Yt.newInstance(e)),Et.open(e)},Zt=n(50),Qt="darkmode",en="shown_more_operations_guide",tn=(n(241),n(466),n(232)),nn=n.n(tn),on=(n(435),n(436),{element:"#app-guide-new",popover:{title:"\u65b0\u5efa/\u6253\u5f00\u6587\u6863",description:"\u9009\u62e9\u5b58\u50a8\u76ee\u5f55\u65b0\u5efa\u6587\u6863\uff0c\u6216\u6253\u5f00\u76ee\u5f55\u4e0b\u6587\u6863",position:"right"}}),an={element:"#app-guide-docs",popover:{title:"\u67e5\u770b\u6587\u6863",description:"\u6d4f\u89c8\u6240\u6709\u4ed3\u5e93\u6587\u6863\uff0c\u53ef\u6253\u5f00/\u65b0\u5efa\u6587\u6863\uff0c\u65b0\u5efa\u6587\u6863/\u56fe\u5e8a\u4ed3\u5e93",position:"right"}},rn={element:"#app-guide-collapse",popover:{title:"\u6536\u8d77\u6587\u6863\u5217\u8868",description:"\u4e00\u952e\u6536\u8d77\u5df2\u5c55\u5f00\u6587\u6863\u5217\u8868",position:"bottom"}},sn={element:"#app-guide-expand",popover:{title:"\u5c55\u5f00\u6587\u6863\u5217\u8868",description:"\u4e00\u952e\u5c55\u5f00\u4ed3\u5e93\u6587\u6863\u5217\u8868\uff0c\u8fde\u7eed\u70b9\u51fb\u53ef\u9010\u5c42\u5c55\u5f00",position:"bottom"}},cn={element:"#app-guide-repo",popover:{title:"\u65b0\u5efa\u4ed3\u5e93",description:"\u65b0\u5efa\u6587\u6863/\u56fe\u5e8a\u4ed3\u5e93\uff0c\u5f53\u524d\u652f\u6301Github/Gitee\u4e91\u4ed3\u5e93",position:"bottom"}},dn={element:".app-guide-newfile",popover:{title:"\u65b0\u5efa\u6587\u6863",description:"\u5728\u9009\u4e2d\u76ee\u5f55\u4e0b\u65b0\u5efa\u6587\u6863",position:"bottom"}},ln={element:".app-guide-newfolder",popover:{title:"\u65b0\u5efa\u6587\u4ef6\u5939",description:"\u5728\u9009\u4e2d\u76ee\u5f55\u4e0b\u65b0\u5efa\u6587\u4ef6\u5939",position:"bottom"}},un={element:".app-guide-refresh",popover:{title:"\u5237\u65b0\u76ee\u5f55",description:"\u5237\u65b0\u76ee\u5f55\u4e0b\u6587\u6863\u5217\u8868",position:"bottom"}},hn={element:"#app-guide-search",popover:{title:"\u641c\u7d22\u6587\u6863",description:"\u5339\u914d\u6587\u6863\u6807\u9898\u641c\u7d22\u6587\u6863",position:"right"}},pn={element:"#app-guide-darkmode",popover:{title:"\u5207\u6362\u6697\u9ed1\u6a21\u5f0f",description:"\u4e00\u952e\u5f00\u542f\uff0c\u51cf\u8f7b\u773c\u90e8\u7684\u75b2\u52b3",position:"top"}},fn={element:"#app-guide-qrcode",popover:{title:"\u5173\u6ce8\u516c\u4f17\u53f7",description:"\u53cd\u9988\u5efa\u8bae\u3001\u4e86\u89e3\u540e\u7eed\u7248\u672c\u66f4\u65b0",position:"top"}},vn={element:"#app-guide-setting",popover:{title:"\u6253\u5f00\u8bbe\u7f6e",description:"\u65b0\u5efa/\u5220\u9664\u6587\u6863\u4ed3\u5e93\u3001\u9690\u85cf\u5185\u7f6e\u6587\u6863\u5e93",position:"top"}},mn={element:"#app-guide-zenmode",popover:{title:"\u5207\u6362Zen\u6a21\u5f0f",description:"Zen\u6a21\u5f0f\uff0c\u8ba9\u5199\u4f5c\u66f4\u4e13\u6ce8",position:"top"}},bn={element:"#app-guide-alwaystop",popover:{title:"\u7f6e\u9876\u7a97\u53e3",description:"\u7f6e\u9876\u7a97\u53e3\uff0c\u8ba9\u5199\u4f5c\u66f4\u4fbf\u6377",position:"top"}},jn={element:"#app-guide-more",popover:{title:"\u66f4\u591a\u64cd\u4f5c",description:"\u5feb\u6377\u5207\u6362\u5df2\u6253\u5f00\u6587\u6863\uff0c\u67e5\u770b\u7f16\u8f91\u5668\u5feb\u6377\u952e",position:"left"}},gn={element:".app-guide-fullscreen",popover:{title:"\u7f16\u8f91\u6a21\u5f0f",description:"\u6536\u8d77\u5176\u5b83\u9762\u677f\uff0c\u4ec5\u663e\u793a\u7f16\u8f91\u533a",position:"left"}},yn={element:".app-guide-export",popover:{title:"\u5bfc\u51fa\u6587\u6863",description:"\u590d\u5236\u5230\u5fae\u4fe1\u516c\u4f17\u53f7\u3001\u77e5\u4e4e\u3001\u6398\u91d1\u7b49",position:"left"}},On={element:".app-guide-sync",popover:{title:"\u540c\u6b65\u6587\u7ae0",description:"\u4e00\u952e\u540c\u6b65\u5230\u5fae\u4fe1\u516c\u4f17\u53f7\u3001\u77e5\u4e4e\u3001\u6398\u91d1\u7b49\u591a\u4e2a\u5e73\u53f0",position:"left"}},_n={element:".app-guide-typeset",popover:{title:"\u4e3b\u9898\u6392\u7248",description:"\u4e00\u952e\u4e3b\u9898\u6392\u7248\uff0c\u81ea\u5b9a\u4e49\u6392\u7248CSS",position:"left"}},kn={element:".app-guide-layout",popover:{title:"\u7f16\u8f91\u7248\u5f0f",description:"Web\u7248\u5f0f\u3001\u9875\u9762\u7248\u5f0f\u53ca\u624b\u673a\u7248\u5f0f\u5207\u6362",position:"left"}},xn={element:".app-guide-catalog",popover:{title:"\u76ee\u5f55\u5927\u7eb2",description:"\u5feb\u6377\u521b\u5efa/\u8df3\u8f6c\u5927\u7eb2\u6807\u9898",position:"left"}},Nn={element:".app-guide-searchreplace",popover:{title:"\u641c\u7d22/\u66ff\u6362",description:"\u5feb\u6377\u641c\u7d22/\u66ff\u6362\u6587\u6863\u6587\u5b57",position:"left"}},Sn={element:".app-guide-undo",popover:{title:"\u56de\u64a4",description:"\u56de\u64a4\u4fee\u6539",position:"left"}},Tn={element:".app-guide-redo",popover:{title:"\u91cd\u505a",description:"\u6062\u590d\u4fee\u6539",position:"left"}},Cn={element:".app-guide-wordcount",popover:{title:"\u5b57\u6570\u7edf\u8ba1",description:"\u7edf\u8ba1\u5f53\u524d\u6587\u6863\u5b57\u6570\uff0c\u9884\u4f30\u9605\u8bfb\u65f6\u95f4",position:"left"}},Dn=new nn.a({className:"app-guide-popover",animate:!0,opacity:.75,padding:0,allowClose:!1,overlayClickNext:!1,doneBtnText:"\u77e5\u9053\u4e86",closeBtnText:"\u5173\u95ed",stageBackground:"#ffffff",nextBtnText:"\u4e0b\u4e00\u6b65",prevBtnText:"\u4e0a\u4e00\u6b65",showButtons:!0,keyboardControl:!0,scrollIntoViewOptions:{},onHighlightStarted:function(){},onHighlighted:function(e){},onDeselected:function(){},onReset:function(){},onNext:function(){},onPrevious:function(){}});function En(){Zt.a.trigger("onOpenDocs"),Dn.defineSteps([on,an,hn,rn,sn,cn,dn,ln,un,mn,pn,vn,fn,bn]),Dn.start()}var wn,Pn={onEnterGuide:En,showModeOperationsGuideIfNotShown:function(){xe.a.getSetting(en)||(setTimeout((function(){Dn.defineSteps([jn,gn,xn,Nn,kn,Sn,Tn,Cn,_n,yn,On]),Dn.start()}),0),xe.a.setSetting(en,!0))}};!function(e){e[e.EHomeBarTabSelectNone=0]="EHomeBarTabSelectNone",e[e.EHomeBarTabSelectDocs=1]="EHomeBarTabSelectDocs"}(wn||(wn={}));var Rn,In=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var o;return Object(h.a)(this,n),(o=t.call(this,e)).newBar=void 0,o.onTabSelect=function(e){var t=o.state.tabSelect;o.setState({tabSelect:t===e?wn.EHomeBarTabSelectNone:e},(function(){o.state.tabSelect!==wn.EHomeBarTabSelectNone&&Zt.a.trigger("onAppSideBarTabOpen")}))},o.onOpenSettings=function(){Xt()},o.onAdd=function(){o.newBar&&o.newBar.show()},o.onOpen=function(e){Zt.a.trigger("onOpen",e)},o.onDarkModeToggle=function(){var e=document.documentElement;e.classList.toggle("dark-mode",!e.classList.contains("dark-mode")),o.setState({darkMode:e.classList.contains("dark-mode")}),xe.a.setSetting(Qt,e.classList.contains("dark-mode"))},o.onZenModeToggle=function(){Object($.m)()},o.onAlwaysOnTopToggle=function(){Object($.k)(!o.state.isAlwaysOnTop).then((function(e){o.setState({isAlwaysOnTop:e})}))},o.onOpenGuide=function(){Pn.onEnterGuide()},o.onDownload=function(){window.open("https://github.com/geekeditor/geekeditor-releases/releases","_blank")},o.state={tabSelect:wn.EHomeBarTabSelectNone,darkMode:!!xe.a.getSetting("darkmode"),isAlwaysOnTop:!1},o}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=this;xe.a.ready((function(){var t=!!xe.a.getSetting(Qt);e.setState({darkMode:t}),document.documentElement.classList.toggle("dark-mode",t)})),Zt.a.on("onAdd",(function(){e.onAdd()})),Zt.a.on("onTriggerSideBar onTriggerFullscreen",(function(t){t&&e.setState({tabSelect:wn.EHomeBarTabSelectNone})})),Zt.a.on("onOpenDocs",(function(){e.setState({tabSelect:wn.EHomeBarTabSelectDocs})}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.tabWidth,o=t.sketchBar,a=this.state,i=a.tabSelect,r=a.darkMode,c=a.isAlwaysOnTop,d=this.props.onActiveNode,l=Object(s.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",width:"28",height:"28",fill:"currentColor",children:Object(s.jsx)("path",{d:"M512.001 297.072c-118.511 0-214.929 96.418-214.929 214.93 0 118.509 96.418 214.926 214.929 214.926 118.509 0 214.927-96.416 214.927-214.926 0-118.512-96.418-214.93-214.927-214.93z m0 371.777c-86.485 0-156.85-70.362-156.85-156.847 0-86.49 70.365-156.853 156.85-156.853s156.848 70.363 156.848 156.853c0 86.485-70.363 156.847-156.848 156.847zM512.001 261.715c16.017 0 29.042-13.027 29.042-29.039V93.017c0-16.012-13.026-29.039-29.042-29.039-16.009 0-29.036 13.027-29.036 29.039v139.659c-0.001 16.012 13.027 29.039 29.036 29.039zM512.001 762.282c-16.009 0-29.036 13.027-29.036 29.039v139.665c0 16.011 13.027 29.036 29.036 29.036 16.017 0 29.042-13.026 29.042-29.036V791.321c0-16.012-13.026-29.039-29.042-29.039zM261.716 512.002c0-16.012-13.027-29.038-29.041-29.038H93.014c-16.009 0-29.036 13.026-29.036 29.038s13.027 29.039 29.036 29.039h139.662c16.013 0.001 29.04-13.027 29.04-29.039zM930.986 482.964H791.32c-16.008 0-29.035 13.026-29.035 29.038s13.027 29.039 29.035 29.039h139.666c16.009 0 29.036-13.027 29.036-29.039s-13.027-29.038-29.036-29.038zM258.7 299.807c5.503 5.446 12.78 8.451 20.484 8.463h0.049c7.768-0.012 15.048-3.027 20.502-8.485 5.481-5.479 8.5-12.771 8.5-20.532 0-7.762-3.019-15.054-8.5-20.532l-93.104-93.104c-5.476-5.479-12.769-8.497-20.53-8.497-7.764 0-15.055 3.018-20.532 8.497-11.317 11.325-11.317 29.741 0 41.057l93.131 93.133zM279.206 715.764c-7.761 0-15.052 3.018-20.529 8.497l-93.109 93.109c-11.317 11.319-11.317 29.738 0.023 41.081 5.506 5.448 12.78 8.452 20.487 8.464h0.042c7.771-0.012 15.057-3.025 20.511-8.487l93.104-93.107c5.481-5.476 8.5-12.769 8.5-20.529 0-7.764-3.019-15.055-8.5-20.532-5.477-5.479-12.764-8.496-20.529-8.496zM765.277 724.261c-5.479-5.479-12.772-8.497-20.532-8.497-7.761 0-15.049 3.018-20.526 8.497-5.481 5.478-8.5 12.771-8.5 20.532 0 7.762 3.019 15.052 8.5 20.526l93.128 93.133c5.506 5.446 12.778 8.452 20.487 8.464h0.045c7.765-0.012 15.049-3.025 20.506-8.487 11.317-11.323 11.317-29.741 0-41.059l-93.108-93.109zM744.723 308.269h0.052c7.756-0.012 15.037-3.027 20.502-8.485l93.109-93.11c11.317-11.316 11.317-29.735 0-41.057-5.479-5.479-12.771-8.497-20.531-8.497s-15.052 3.018-20.529 8.497l-93.106 93.104c-5.481 5.479-8.5 12.771-8.5 20.532 0 7.762 3.019 15.055 8.518 20.55 5.496 5.445 12.773 8.454 20.485 8.466z"})}),u=Object(s.jsx)("svg",{viewBox:"0 0 1024 1024",version:"1.1",width:"22",height:"22",fill:"currentColor",children:Object(s.jsx)("path",{d:"M426.666667 85.333333c-77.653333 0-150.613333 21.333333-213.333334 57.6C340.906667 216.746667 426.666667 354.133333 426.666667 512s-85.76 295.253333-213.333334 369.066667C276.053333 917.333333 349.013333 938.666667 426.666667 938.666667c235.52 0 426.666667-191.146667 426.666666-426.666667S662.186667 85.333333 426.666667 85.333333z","p-id":"1968"})}),h=Object(s.jsx)("svg",{viewBox:"0 0 1024 1024",fill:"currentColor",width:"18",height:"18",children:Object(s.jsx)("path",{d:"M102.28 692.465l4.156 0.482a18.07 18.07 0 0 1 13.432 13.432l0.482 4.157-0.06 192.993 192.934 0.06a18.07 18.07 0 0 1 17.588 13.915l0.482 4.216v54.032a18.07 18.07 0 0 1-13.914 17.588l-4.156 0.542H48.188A18.07 18.07 0 0 1 30.6 979.968l-0.482-4.156V710.536a18.07 18.07 0 0 1 13.914-17.59l4.156-0.481h54.092z m873.532 0l4.156 0.482a18.07 18.07 0 0 1 13.432 13.432l0.482 4.157v265.276l-0.482 4.156a18.07 18.07 0 0 1-13.432 13.432l-4.156 0.482H710.776l-4.156-0.482a18.07 18.07 0 0 1-13.432-13.432l-0.482-4.156V921.72l0.482-4.156a18.07 18.07 0 0 1 13.432-13.432l4.156-0.482H903.71V710.536l0.422-4.157a18.07 18.07 0 0 1 9.637-12.047l3.795-1.385 4.217-0.482h54.03zM313.224 30.118a18.07 18.07 0 0 1 18.07 18.07v54.092a18.07 18.07 0 0 1-18.07 18.07H120.29v193.114a18.07 18.07 0 0 1-13.854 17.59l-4.217 0.481H48.19a18.07 18.07 0 0 1-18.071-18.07V48.187a18.07 18.07 0 0 1 18.07-18.07h265.036z m662.588 0A18.07 18.07 0 0 1 993.4 44.032l0.482 4.156v265.276a18.07 18.07 0 0 1-13.914 17.59l-4.156 0.481H921.72l-4.156-0.482a18.07 18.07 0 0 1-13.432-13.432l-0.482-4.157 0.06-192.993-192.934-0.12a18.07 18.07 0 0 1-17.588-13.915l-0.482-4.217V48.19a18.07 18.07 0 0 1 13.914-17.59l4.156-0.481h265.036z","p-id":"5677"})});return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("div",{className:"app-side-bar",children:[Object(s.jsxs)("div",{className:"app-side-bar-nav",children:[Object(s.jsxs)("div",{className:"app-side-bar-nav__top",children:[Object(s.jsx)(m.a,{id:"app-guide-new",icon:Object(s.jsx)(Pe.a,{}),wrapClassName:"app-bar-item",onClick:this.onAdd}),Object(s.jsx)(m.a,{id:"app-guide-docs",icon:Object(s.jsx)(Rt.a,{}),wrapClassName:"app-bar-item",onClick:function(){e.onTabSelect(wn.EHomeBarTabSelectDocs)},selected:i===wn.EHomeBarTabSelectDocs})]}),Object(s.jsxs)("div",{className:"app-side-bar-nav__bottom",children:[$.g?Object(s.jsx)(m.a,{id:"app-guide-zenmode",icon:h,wrapClassName:"app-bar-item",onClick:this.onZenModeToggle}):Object(s.jsx)(Ut,{}),Object(s.jsx)(m.a,{id:"app-guide-darkmode",icon:r?l:u,wrapClassName:"app-bar-item",onClick:this.onDarkModeToggle}),Object(s.jsx)(m.a,{id:"app-guide-setting",icon:Object(s.jsx)(It.a,{}),wrapClassName:"app-bar-item",onClick:this.onOpenSettings}),$.g?Object(s.jsx)(m.a,{id:"app-guide-alwaystop",icon:c?Object(s.jsx)(Ft.a,{}):Object(s.jsx)(At.a,{}),wrapClassName:"app-bar-item",onClick:this.onAlwaysOnTopToggle,selected:c}):Object(s.jsx)(m.a,{icon:Object(s.jsx)(Ye.a,{}),wrapClassName:"app-bar-item",onClick:this.onOpenGuide}),!$.g&&Object(s.jsx)(m.a,{id:"app-guide-desktop",icon:Object(s.jsx)(Mt.a,{}),wrapClassName:"app-bar-item",tip:"\u4e0b\u8f7d\u684c\u9762\u8f6f\u4ef6",placement:"right",onClick:this.onDownload})]})]}),Object(s.jsxs)("div",{className:"app-side-bar-tab",style:{width:i===wn.EHomeBarTabSelectNone?"0px":"".concat(n,"px"),borderWidth:i===wn.EHomeBarTabSelectNone?"0px":"1px",opacity:i===wn.EHomeBarTabSelectNone?"0":"1"},children:[Object(s.jsx)("div",{className:"app-side-bar-tab__docs",style:{display:i!==wn.EHomeBarTabSelectDocs?"none":"block"},children:Object(s.jsx)(wt,{onActiveNode:d,onOpen:this.onOpen})}),i!==wn.EHomeBarTabSelectNone&&o]})]}),Object(s.jsx)(Pt,{onOpen:this.onOpen,ref:function(t){e.newBar=t}})]})}}]),n}(c.Component),Fn=(n(437),Object(re.b)()),An=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return Object(s.jsx)("div",{className:"app-status-bar",children:!Fn&&Object(s.jsxs)(s.Fragment,{children:[Object(s.jsxs)("div",{className:"app-copyright",children:["Copyright \xa9 2021 ",Object(s.jsxs)("strong",{children:[Object(s.jsx)("a",{href:"/",children:"\u6781\u5ba2\u7f16\u8f91\u5668Beta v".concat("0.7.13","\u7248")}),"  "]})," ",Object(s.jsxs)("span",{children:[Object(s.jsx)("a",{className:"theme-color",style:{fontWeight:"bolder",color:"#388ae5 !important"},href:"https://github.com/geekeditor/geekeditor-releases/releases",target:"_blank",children:"\u4e0b\u8f7d\u684c\u9762\u8f6f\u4ef6"})," "]}),Object(s.jsx)("a",{href:"http://beian.miit.gov.cn/",target:"_blank",children:"\u5907\u6848\u53f7: \u6e58ICP\u590718009160\u53f7-4"})]}),Object(s.jsxs)("div",{className:"app-friendly-links",children:[Object(s.jsx)("strong",{children:"\u53cb\u60c5\u94fe\u63a5\uff1a"}),Object(s.jsx)("a",{href:"http://h5.dooring.cn/",target:"_blank",children:"H5-dooring\u7f16\u8f91\u5668"})]})]})})}}]),n}(c.Component),Mn=(n(438),n(85));!function(e){e[e.WinTabHome=1]="WinTabHome",e[e.WinTabDoc=2]="WinTabDoc"}(Rn||(Rn={}));var Ln=n(486),Bn=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props.wrapClassName||"";return Object(s.jsx)("div",{className:["win-tab-header win-tab-header__home",e].join(" "),children:Object(s.jsx)(Ln.a,{})})}}]),n}(c.Component),Un=n(100),Hn=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(h.a)(this,n);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(e=t.call.apply(t,[this].concat(a))).onNodeChanged=function(t){t!==i.EDocsNodeChangeTypeTitle&&t!==i.EDocsNodeChangeTypeSaving&&t!==i.EDocsNodeChangeTypeLoading&&t!==i.EDocsNodeChangeTypeRemoving&&t!==i.EDocsNodeChangeTypeChanging||e.forceUpdate()},e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.props.node.onChanged(this.onNodeChanged)}},{key:"componentWillUnmount",value:function(){this.props.node.offChanged(this.onNodeChanged)}},{key:"render",value:function(){var e=this.props.node,t=e.title()||"Untitled",n=this.props.onRemove,o=this.props.wrapClassName||"",a=e.isChanged(),i=e.isSaving()||e.isLoading()||e.isRemoving();return Object(s.jsxs)("div",{className:["win-tab-header win-tab-header__doc",o].join(" "),children:[Object(s.jsx)("span",{children:t}),Object(s.jsxs)("span",{className:["win-tab-header-op",a?" win-tab-header-op__changed":"",i?" win-tab-header-op__loading":""].join(""),onClick:function(e){n(),e.stopPropagation()},children:[!i&&a&&Object(s.jsx)("span",{className:"win-tab-header-op-changed"}),!i&&Object(s.jsx)("span",{className:"win-tab-header-op-close",children:Object(s.jsx)(Un.a,{})}),i&&Object(s.jsx)("span",{className:"win-tab-header-op-saving",children:Object(s.jsx)(Se.a,{})})]})]})}}]),n}(c.Component),Gn=(n(441),n(442),n(458)),Wn=n(487),qn=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var a;return Object(h.a)(this,n),(a=t.call(this,e)).onEditTitleBegin=function(e){a.setState({titleEditing:!0}),e.stopPropagation()},a.onEditTitleFinish=function(e){var t=a.props.node;e&&t.setTitle(e),a.setState({titleEditing:!1})},a.onNodeChanged=function(e){e===i.EDocsNodeChangeTypeTitle&&a.forceUpdate()},a.onActiveNode=function(e){e.nodeType()===o.EDocsNodeTypeFile&&(a.setState({nodesBarVisible:!1}),(0,a.props.onOpen)(e))},a.onNodesBarVisible=function(e){a.setState({nodesBarVisible:e})},a.state={titleEditing:!1,nodesBarVisible:!1},a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.node;e.onChanged(this.onNodeChanged),e.title()||this.setState({titleEditing:!0})}},{key:"componentWillUnmount",value:function(){this.props.node.offChanged(this.onNodeChanged)}},{key:"render",value:function(){var e=this.props.node,t=this.state,n=t.titleEditing,a=t.nodesBarVisible,i=e.title()||"Untitled",r=e.nodeType()===o.EDocsNodeTypeFile,c=this.props.onOpen,d=e.parentNode()||e,l=Object(s.jsx)("div",{className:"path-docs-nodes",children:Object(s.jsx)(qe,{root:d,onActiveNode:this.onActiveNode,onOpen:c,defaultActiveNode:e})});return Object(s.jsx)("div",{className:"docs-node-path-bar-item",children:Object(s.jsx)(Gn.a,{placement:"bottomLeft",visible:a,onVisibleChange:this.onNodesBarVisible,content:l,trigger:"click",destroyTooltipOnHide:{keepParent:!1},children:Object(s.jsxs)("div",{className:"path-item",children:[!n&&Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("span",{className:"path-item__icon",children:r?Object(s.jsx)(we.a,{}):Object(s.jsx)(Ee.a,{})}),Object(s.jsx)("span",{className:"path-item__title",children:i}),Object(s.jsx)("span",{className:"path-item__icon",children:r?Object(s.jsx)(Wn.a,{onClick:this.onEditTitleBegin}):Object(s.jsx)(xt.a,{})})]}),n&&Object(s.jsx)(He.a,{text:i,onFinishing:this.onEditTitleFinish})]})})})}}]),n}(c.Component),zn=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var o;return Object(h.a)(this,n),(o=t.call(this,e)).onReload=function(){o.props.node.load()},o.onNodeChanged=function(e){e!==i.EDocsNodeChangeTypeTitle&&e!==i.EDocsNodeChangeTypeSaving&&e!==i.EDocsNodeChangeTypeLoading||o.forceUpdate()},o.state={path:[],isLoading:!1},o}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.node;this.setState({path:be(e)}),e.onChanged(this.onNodeChanged)}},{key:"componentWillUnmount",value:function(){this.props.node.offChanged(this.onNodeChanged)}},{key:"render",value:function(){var e=this.props,t=e.onOpen,n=e.node,o=this.state.path.map((function(e){return Object(s.jsx)(qn,{onOpen:t,node:e},e.tempID())})),a=n.isLoading(),i=n.isLoading()||n.isSaving()||n.isChanged();return Object(s.jsxs)("div",{className:"docs-node-path-bar",children:[o,Object(s.jsx)(Le.a,{size:"small",type:"text",className:"docs-node-refresh",disabled:i,onClick:this.onReload,loading:a,icon:Object(s.jsx)(Ie.a,{})})]})}}]),n}(c.Component),Kn=Object(c.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(2)]).then(n.bind(null,1095))})),Vn=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(h.a)(this,n);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a))).onEditable=function(t){e.props.node.setEditable(t),Pn.showModeOperationsGuideIfNotShown()},e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.node,n=e.onOpen,o=this.props.wrapClassName||"";return Object(s.jsxs)("div",{className:["win-tab-content-doc",o].join(" "),children:[Object(s.jsx)(zn,{onOpen:n,node:t}),Object(s.jsx)("div",{className:"content-doc-editor",children:Object(s.jsx)(c.Suspense,{fallback:Object(s.jsxs)("div",{className:"content-doc-editor__loading",children:[Object(s.jsx)("div",{children:"\u521d\u6b21\u52a0\u8f7d\uff0c\u8bf7\u7a0d\u7b49..."}),Object(s.jsx)("div",{children:Object(s.jsx)(Se.a,{})})]}),children:Object(s.jsx)(Kn,{onEditable:this.onEditable})})})]})}}]),n}(c.Component),$n=(n(443),function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var o;return Object(h.a)(this,n),(o=t.call(this,e)).onSearch=function(e){},o.onActiveNode=function(e){o.setState({activeNode:e})},o.state={activeNode:void 0},o}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props,t=(e.onOpen,e.onAdd,this.state.activeNode),n=(t&&(t.nodeType(),o.EDocsNodeTypeFile),this.props.wrapClassName||"");return Object(s.jsx)("div",{className:["win-tab-content-home",n].join(" "),children:Object(s.jsx)("div",{className:"home-main",children:Object(s.jsx)("div",{className:"home-preview"})})})}}]),n}(c.Component)),Jn=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var o;return Object(h.a)(this,n),(o=t.call(this,e)).transitionModal=void 0,o.onNodeChanged=function(e){if(e===i.EDocsNodeChangeTypeRemoved){var t=o.props,n=t.tab;(0,t.onRemove)(n.id)}},o.onRemove=function(){var e=o.props,t=e.tab,n=e.onRemove;t.node.isChanged()?o.onShowConfirmModal():n(t.id)},o.onConfirmSaveAndRemove=function(){var e=o.props,t=e.tab,n=e.onRemove,a=t.node;return o.setState({confirmLoading:!0}),a.save().then((function(e){o.setState({confirmLoading:!1}),e&&(n(t.id),o.onHideConfirmModal())}))},o.onCancelSaveAndRemove=function(){var e=o.props,t=e.tab;(0,e.onRemove)(t.id),o.onHideConfirmModal()},o.onShowConfirmModal=function(){o.transitionModal&&o.transitionModal.showTransition()},o.onHideConfirmModal=function(){o.transitionModal&&o.transitionModal.hideTransition()},o.state={confirmLoading:!1},o}return Object(p.a)(n,[{key:"componentDidMount",value:function(){this.props.tab.type===Rn.WinTabDoc&&this.props.tab.node.onChanged(this.onNodeChanged)}},{key:"componentWillUnmount",value:function(){this.props.tab.type===Rn.WinTabDoc&&this.props.tab.node.offChanged(this.onNodeChanged)}},{key:"render",value:function(){var e=this,t=this.props,n=t.tab,o=t.activeTabID,a=t.live,i=t.onSelect,r=t.onOpen,c=t.onAdd,d=this.state.confirmLoading,l=o===n.id,u=n.node.title(),h=n.type===Rn.WinTabHome?Object(s.jsx)(Bn,{wrapClassName:l?"active":""}):Object(s.jsx)(Hn,{wrapClassName:o===n.id?"active":"",node:n.node,onRemove:this.onRemove}),p=n.type===Rn.WinTabHome?Object(s.jsx)($n,{wrapClassName:l?"active":"",onOpen:r,onAdd:c}):Object(s.jsx)(Vn,{wrapClassName:o===n.id?"active":"",node:n.node,onOpen:r},n.id);return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("div",{onMouseDown:function(){i(n.id)},className:["win-tab-header-wrap",l?" active":""].join(""),children:h}),(a||l)&&Object(s.jsx)("div",{className:["win-tab-content-wrap",o===n.id?" active":""].join(""),children:p}),Object(s.jsx)(Ue,{ref:function(t){e.transitionModal=t},title:null,footer:Object(s.jsxs)("div",{className:"remove-modal__footer",children:[Object(s.jsx)(Le.a,{onMouseDown:this.onCancelSaveAndRemove,children:"\u4e0d\u4fdd\u5b58"}),Object(s.jsxs)("div",{className:"remove-modal__footer-right",children:[Object(s.jsx)(Le.a,{onMouseDown:this.onHideConfirmModal,children:"\u53d6\u6d88"}),Object(s.jsx)(Le.a,{type:"primary",onClick:this.onConfirmSaveAndRemove,loading:d,children:"\u4fdd\u5b58"})]})]}),closable:!1,width:300,top:"-300px",maskStyle:{backgroundColor:"transparent"},destroyOnClose:!0,transitionName:"",maskTransitionName:"",wrapClassName:"remove-modal",children:Object(s.jsxs)("div",{className:"remove-modal__content",children:[Object(s.jsxs)("div",{className:"remove-modal__title",children:[Object(s.jsx)(Fe.a,{className:"remove-modal__icon"}),Object(s.jsxs)("span",{children:["\u662f\u5426\u4fdd\u5b58\u5f53\u524d\u6539\u52a8\u5230 ",u,"? "]})]}),Object(s.jsx)("div",{className:"remove-modal__info",children:Object(s.jsx)("span",{children:"\u5f53\u524d\u5185\u5bb9\u6539\u52a8\u5c1a\u672a\u4fdd\u5b58\uff0c\u4e0d\u4fdd\u5b58\u5c06\u5bfc\u81f4\u4fee\u6539\u4e22\u5931"})})]})})]})}}]),n}(c.Component),Yn=n(170),Xn=n(242),Zn=n(168),Qn=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var o;return Object(h.a)(this,n),(o=t.call(this,e)).swiperDom=void 0,o.resize=void 0,o.alertModal=void 0,o.setStatePromise=function(e){return new Promise((function(t){o.setState(e,(function(){t(!0)}))}))},o.onResize=function(){o.resize&&o.resize()},o.onSelect=function(e){o.onDeactivedTab(),o.updateTabsLiveMap(e,!1),o.setStatePromise({activeTabID:e}).then(o.updateSwiperActivePos).then(o.onActivedTab)},o.onRemove=function(e){o.onDeactivedTab();var t=o.props,n=t.onWinTabRemove,a=t.tabs,i=o.state.activeTabID,r=i;if(e===i){var s=a.findIndex((function(e){return e.id===i}));s>0?r=a[s-1].id:0===s&&a.length>1&&(r=a[s+1].id)}n(e),o.updateTabsLiveMap(e,!0),o.setStatePromise({activeTabID:r}).then((function(){return o.updateSwiperState()})).then(o.updateSwiperActivePos).then(o.onActivedTab)},o.onAdd=function(){Zt.a.trigger("onAdd")},o.onOpen=function(e){if(ft){o.onDeactivedTab();var t=o.props.tabs,n=t.findIndex((function(t){return t.type===Rn.WinTabDoc&&t.node.tempID()===e.tempID()}));if(-1!==n){var a=t[n].id;o.updateTabsLiveMap(a,!1),o.setStatePromise({activeTabID:a}).then((function(){return o.updateSwiperState()})).then(o.updateSwiperActivePos).then(o.onActivedTab)}else{var i=(0,o.props.onWinTabAdd)(e);i&&(o.updateTabsLiveMap(i,!1),!e.isLoaded()&&e.load(),o.setStatePromise({activeTabID:i}).then((function(){return o.updateSwiperState()})).then(o.updateSwiperActivePos))}}else o.alertModal&&o.alertModal.showTransition()},o.swiperReady=function(e){o.swiperDom=e},o.changeSwiperScrollLeft=function(e){var t=o.swiperDom;t&&(t.scrollTo?t.scrollTo({top:0,left:e,behavior:"smooth"}):t.scrollLeft=e,o.updateSwiperState(e))},o.updateSwiperState=function(e){var t=o.swiperDom;if(t){void 0===e&&t.clientWidth>0&&(e=Math.floor(t.scrollLeft/t.clientWidth)*t.clientWidth,t.scrollLeft=e);var n=void 0===e?t.scrollLeft:e;return new Promise((function(e){o.setState({canSwipeLeft:n>0,canSwipeRight:n+t.clientWidth<t.scrollWidth},(function(){e(!0)}))}))}return Promise.resolve(!1)},o.updateSwiperActivePos=function(){var e=document.querySelector(".win-tab-header-wrap.active"),t=e&&e.parentElement;if(e&&t){var n=t.scrollLeft,a=e.offsetLeft-t.offsetLeft,i=e.clientWidth,r=t.clientWidth;a<n?n=a:a+i>n+r&&(n=a+i-r),o.changeSwiperScrollLeft(n)}o.props.onWinTabActive(o.state.activeTabID)},o.onActivedTab=function(){var e=o.state.activeTabID,t=o.props.tabs.find((function(t){return t.id===e}));t&&t.node&&t.node.actived()},o.onDeactivedTab=function(){var e=o.state.activeTabID,t=o.props.tabs.find((function(t){return t.id===e}));t&&t.node&&t.node.deactived()},o.onConfirmAlert=function(){o.alertModal&&o.alertModal.hideTransition()},o.state={activeTabID:-1,canSwipeLeft:!1,canSwipeRight:!1,tabAdding:!1,tabsLiveArr:[],tabsLiveMap:{},sideBarOpened:!1},o.swiperDom=null,o.resize=null,o}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.tabs;t.length?this.setStatePromise({activeTabID:t[0].id}).then((function(){return e.updateSwiperState()})).then(this.updateSwiperActivePos):this.updateSwiperState().then(this.updateSwiperActivePos),this.resize=Object(ye.b)(this.updateSwiperState,200),window.addEventListener("resize",this.onResize),this.props.defaultWin&&Zt.a.on("onOpen",(function(t){e.onOpen(t)})),Zn.a.add({name:"CMD+T",handler:function(t){var n=e.state.activeTabID,o=e.props.tabs;if(o.length>1){var a=o.findIndex((function(e){return e.id===n})),i=o[(a+1)%o.length].id;e.onSelect(i),t.preventDefault(),t.stopPropagation()}},on:document})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.onResize),Zn.a.remove(document,"CMD+T")}},{key:"updateTabsLiveMap",value:function(e,t){var n=this.state,o=n.tabsLiveArr,a=n.tabsLiveMap;if(t){if(a[e]){delete a[e];var i=o.findIndex((function(t){return t===e}));-1!==i&&o.splice(i,1),this.setState({tabsLiveMap:Object(O.a)({},a),tabsLiveArr:o})}}else{var r=o.findIndex((function(t){return t===e}));-1!==r&&o.splice(r,1),o.push(e);var s=!1;if(a[e]||(a[e]=!0,s=!0),o.length>10){var c=o[0];o.splice(0,1),delete a[c],s=!0}this.setState({tabsLiveMap:s?Object(O.a)({},a):a,tabsLiveArr:o})}}},{key:"swipeConent",value:function(e){var t=this.swiperDom;if(t){var n=t.clientWidth,o=t.scrollLeft,a=t.scrollWidth;o="left"===e?Math.max(o-n,0):Math.min(o+n,a-n),this.changeSwiperScrollLeft(o)}}},{key:"render",value:function(){var e=this,t=this.props,n=t.tabs,o=t.sideBarOpened,a=t.onTriggerSideBar,i=this.state,r=i.activeTabID,c=i.canSwipeLeft,d=i.canSwipeRight,l=i.tabAdding,u=i.tabsLiveMap,h=[],p=[];return n.forEach((function(t){t.type===Rn.WinTabHome?h.push(Object(s.jsx)(Jn,{live:!0,tab:t,activeTabID:r,onSelect:e.onSelect,onRemove:e.onRemove,onOpen:e.onOpen,onAdd:e.onAdd},t.id)):p.push(Object(s.jsx)(Jn,{live:u[t.id],tab:t,activeTabID:r,onSelect:e.onSelect,onRemove:e.onRemove,onOpen:e.onOpen,onAdd:e.onAdd},t.id))})),Object(s.jsxs)(s.Fragment,{children:[0!==n.length&&Object(s.jsxs)("div",{className:["win-tab-bar"].join(" "),children:[h,c&&Object(s.jsx)("div",{className:"win-tab-bar-swipe win-tab-bar-swipe__left",onMouseDown:function(){e.swipeConent("left")},children:Object(s.jsx)(Yn.a,{})}),Object(s.jsx)("div",{className:["win-tab-bar__docs",d?" can-swipe-right":"",c?" can-swipe-left":""].join(""),ref:this.swiperReady,children:p}),d&&Object(s.jsx)("div",{className:"win-tab-bar-swipe win-tab-bar-swipe__right",onMouseDown:function(){e.swipeConent("right")},children:Object(s.jsx)(xt.a,{})}),Object(s.jsxs)("div",{className:"win-tab-bar__ops",children:[Object(s.jsx)("span",{className:"win-tab-bar__op",onMouseDown:this.onAdd,children:l?Object(s.jsx)(Se.a,{}):Object(s.jsx)(Je.a,{})}),Object(s.jsx)("span",{id:"app-guide-more",className:["win-tab-bar__op",o?"active":""].join(" "),onMouseDown:a,children:Object(s.jsx)(Xn.a,{})})]})]}),!ft&&Object(s.jsx)(Ue,{ref:function(t){e.alertModal=t},title:null,footer:Object(s.jsx)("div",{className:"alert-modal__footer",children:Object(s.jsx)("div",{className:"alert-modal__footer-right",children:Object(s.jsx)(Le.a,{type:"primary",onMouseDown:this.onConfirmAlert,children:"\u77e5\u9053\u4e86"})})}),closable:!0,onCancel:this.onConfirmAlert,width:400,top:"-300px",maskStyle:{backgroundColor:"transparent"},destroyOnClose:!0,transitionName:"",maskTransitionName:"",wrapClassName:"alert-modal",children:Object(s.jsxs)("div",{className:"alert-modal__content",children:[Object(s.jsxs)("div",{className:"alert-modal__title",children:[Object(s.jsx)(Fe.a,{className:"alert-modal__icon"}),Object(s.jsx)("span",{children:"\u5f53\u524d\u6d4f\u89c8\u5668\u5c1a\u672a\u517c\u5bb9"})]}),Object(s.jsx)("div",{className:"alert-modal__info",children:Object(s.jsxs)("span",{children:["\u5df2\u517c\u5bb9Chrome\u3001Fixfox\u53caSafari\u6d4f\u89c8\u5668\uff0c\u63a8\u8350\u4f7f\u7528",Object(s.jsx)("a",{target:"_blank",href:"https://www.google.cn/chrome/",children:"Chrome\u6d4f\u89c8\u5668"}),"\uff0c\u6216\u8005Chromium\u5185\u6838\u6d4f\u89c8\u5668"]})})]})})]})}}]),n}(c.Component),eo=0;var to=0;function no(){return++to}var oo={},ao={set:function(e,t){oo[e]=t},get:function(e){return oo[e]}},io="ACTION_TYPE_WIN_TAB_ADD",ro="ACITON_TYPE_WIN_TAB_REMOVE",so="ACITON_TYPE_WIN_TAB_EXCHANGE",co="ACTION_TYPE_WIN_TAB_SPLIT",lo="ACTION_TYPE_WIN_TAB_CONCAT";function uo(e,t){var n=t.findIndex((function(t){return t.id===e}));return-1!==n&&(t.splice(n,1),!0)}function ho(e,t,n){var o=n.findIndex((function(t){return t.id===e})),a=n.findIndex((function(e){return e.id===t}));if(-1!==o&&-1!=a){var i=n[o];n.splice(o,1),a>=n.length?n.push(i):a>o?n.splice(a-1,0,i):n.splice(a,0,i)}return n}var po={tabs:[],floating:!0,id:0,tabsLiveMap:{},tabsLiveArr:[]};function fo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:po,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case io:var n=t.payload.tab;return void 0!==n?(e.tabs.push(n),Object(O.a)(Object(O.a)({},e),{},{tabs:Object(y.a)(e.tabs)})):e;case ro:return uo(t.payload.tabID,e.tabs)?Object(O.a)(Object(O.a)({},e),{},{tabs:Object(y.a)(e.tabs)}):e;case so:var o=ho(t.payload.tabID,t.payload.toTabID,e.tabs);return Object(O.a)(Object(O.a)({},e),{},{tabs:Object(y.a)(o)});case co:var a=e.tabs.findIndex((function(e){return e.id===t.payload.tabID}));if(-1!==a){var i=e.tabs[a];e.tabs.splice(a,1);var r=ao.get("ACTION_CREATE_STORE");return r&&r([i],!0),Object(O.a)(Object(O.a)({},e),{},{tabs:Object(y.a)(e.tabs)})}return e;case lo:var s=t.payload.tabs,c=t.payload.index;if(s&&void 0!==c){var d=e.tabs;return c<d.length-1?d.splice.apply(d,[c,0].concat(Object(y.a)(s))):e.tabs=d.concat(s),Object(O.a)(Object(O.a)({},e),{},{tabs:Object(y.a)(e.tabs)})}return e;default:return e}}n(444),n(445);var vo=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){return Object(s.jsx)("div",{className:"win-operations-tip",children:Object(s.jsx)("span",{children:"\u5fc3\u4e2d\u65e0\u5c18\uff0c\u7801\u5b57\u5165\u795e\u3002"})})}}]),n}(c.Component),mo=(n(446),n(447),function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var o;return Object(h.a)(this,n),(o=t.call(this,e)).onNodeChanged=function(e){e!==i.EDocsNodeChangeTypeTitle&&e!==i.EDocsNodeChangeTypeSaving&&e!==i.EDocsNodeChangeTypeLoading&&e!==i.EDocsNodeChangeTypeRemoving||o.forceUpdate()},o.state={path:[]},o}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.node;e.onChanged(this.onNodeChanged),this.setState({path:be(e)})}},{key:"componentWillUnmount",value:function(){this.props.node.offChanged(this.onNodeChanged)}},{key:"render",value:function(){var e=this.props.node,t=this.props.match,n=t?t.map((function(e,t){if(0!==t&&e.length)return t%2===0?Object(s.jsx)("em",{className:"search-mark",children:e},t):Object(s.jsx)("span",{children:e},t)})):e.title()||"Untitled",a=this.props,i=a.onRemove,r=a.onSelect,c=this.props.wrapClassName||"",d=this.props.changed,l=e.isSaving()||e.isLoading()||e.isRemoving(),u=this.state.path.map((function(e){return Object(s.jsxs)("span",{children:[e.title(),e.nodeType()===o.EDocsNodeTypeFolder&&Object(s.jsx)(xt.a,{})]},e.tempID())}));return Object(s.jsxs)("div",{className:["win-opened-bar-item",c].join(" "),onClick:function(e){r(),e.stopPropagation()},children:[Object(s.jsxs)("div",{className:"win-opened-bar-item-info",children:[Object(s.jsx)("span",{className:"win-opened-bar-item-icon",children:l?Object(s.jsx)(Se.a,{}):Object(s.jsx)(we.a,{})}),Object(s.jsx)("span",{children:n}),Object(s.jsxs)("span",{className:["win-opened-bar-item-op",d?" win-opened-bar-item-op__changed":"",l?" win-opened-bar-item-op__loading":""].join(""),children:[d&&Object(s.jsx)("span",{className:"win-opened-bar-item-op-changed"}),Object(s.jsx)("span",{className:"win-opened-bar-item-op-close",onClick:function(e){i(),e.stopPropagation()},children:Object(s.jsx)(Un.a,{})})]})]}),Object(s.jsx)("div",{className:"win-opened-bar-item-path",children:u})]})}}]),n}(c.Component)),bo=Xe.a.Search,jo=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var o;return Object(h.a)(this,n),(o=t.call(this,e)).onSearchTextChangeProxy=void 0,o.bakPosition={x:0,y:0},o.downX=0,o.downY=0,o.onSearch=function(e){o.setState({searchKey:e})},o.onSearchTextChange=function(e){var t=e.target.value;o.onSearchTextChangeProxy(t)},o.onDragStart=function(e,t,n){var a=e.target.closest(".item-wrap");if(a){var i=a.getBoundingClientRect();o.setState({dragIndex:t,dragToIndex:t,dragTab:n,dragPosition:{x:i.x,y:i.y,h:i.height,w:i.width}}),o.downX=e.pageX,o.downY=e.pageY,o.bakPosition.x=i.x,o.bakPosition.y=i.y,document.addEventListener("mousemove",o.drag),document.addEventListener("mouseleave",o.dragEnd),document.addEventListener("mouseup",o.dragEnd)}},o.drag=function(e){o.setState({dragging:!0});var t=e.pageX,n=e.pageY,a=t-o.downX,i=n-o.downY,r=Object(O.a)({},o.state.dragPosition);r.x=o.bakPosition.x+a,r.y=o.bakPosition.y+i,o.setState({dragPosition:r});var s=Math.round(i/r.h);o.setState({dragToIndex:Math.min(Math.max(0,o.state.dragIndex+s),o.props.tabs.length-1)})},o.dragEnd=function(e){if(o.state.dragIndex!==o.state.dragToIndex){var t=o.state.searchKey,n=o.props,a=n.tabs,i=n.onExchange,r=Object($.i)(t),s=a.filter((function(e){return!t.length||e.node.title().match(r)||e.type===Rn.WinTabHome})),c=s[o.state.dragIndex],d=s[o.state.dragToIndex];c&&d&&i(c.id,d.id)}o.setState({dragging:!1,dragIndex:-1,dragToIndex:-1}),document.removeEventListener("mousemove",o.drag),document.removeEventListener("mouseleave",o.dragEnd),document.removeEventListener("mouseup",o.dragEnd)},o.state={searchKey:"",dragIndex:-1,dragToIndex:-1,dragging:!1,dragTab:null,dragPosition:{x:0,y:0,h:0,w:0}},o.onSearchTextChangeProxy=Object(ye.b)(o.onSearch,200),o}return Object(p.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.searchKey,o=t.dragIndex,a=t.dragToIndex,i=t.dragging,r=t.dragTab,c=t.dragPosition,d=Object($.i)(n),l=this.props,u=l.tabs,h=l.activeTabID,p=l.onRemove,f=l.onSelect,v=[],m=[];return u.forEach((function(t,r){var l;t.type===Rn.WinTabHome?v.push(Object(s.jsx)("div",{className:["win-opened-bar-item",h===t.id?"active":""].join(" "),onClick:function(e){f(t.id),e.stopPropagation()},children:Object(s.jsxs)("div",{className:"win-opened-bar-item-info",children:[Object(s.jsx)("span",{className:"win-opened-bar-item-icon",children:Object(s.jsx)(Ln.a,{})}),Object(s.jsx)("span",{children:"\u9996\u9875"})]})},t.id)):n.length&&!(l=t.node.title().match(d))||m.push(Object(s.jsx)("div",{style:{transform:a>=r&&o<r?"translate(0px, -".concat(c.h,"px)"):a<=r&&o>r?"translate(0px, ".concat(c.h,"px)"):""},className:["item-wrap",i?" item-wrap--dragging":"",i&&o===r?" item-wrap--dragging-target":""].join(""),onMouseDown:function(n){return e.onDragStart(n,r,t)},children:Object(s.jsx)(mo,{match:l,node:t.node,wrapClassName:h===t.id?"active":"",onRemove:function(){p(t.id)},onSelect:function(){f(t.id)}})},t.id))})),Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("div",{className:["win-opened-bar"].join(""),children:[Object(s.jsx)("div",{className:"win-opened-bar-header",children:Object(s.jsx)(bo,{placeholder:"\u8f93\u5165\u5173\u952e\u5b57\u641c\u7d22\u5df2\u6253\u5f00\u6587\u6863",onSearch:this.onSearch,onChange:this.onSearchTextChange,enterButton:!0})}),Object(s.jsxs)("div",{className:"win-opened-bar-body",children:[v,!m.length&&Object(s.jsx)(ze.a,{image:ze.a.PRESENTED_IMAGE_SIMPLE,description:Object(s.jsx)("span",{children:n.length?"\u641c\u7d22\u65e0\u7ed3\u679c":"\u6682\u672a\u6253\u5f00\u6587\u6863"})}),m,i&&!!r&&Object(s.jsx)("div",{style:{width:"".concat(c.w,"px"),left:"".concat(c.x,"px"),top:"".concat(c.y,"px")},className:["item-wrap--drag"].join(" "),children:Object(s.jsx)(mo,{match:r.node.title().match(d)||void 0,node:r.node,wrapClassName:h===r.id?"active":"",onRemove:function(){p(r.id)},onSelect:function(){f(r.id)}})},r.id+"_")]})]})})}}]),n}(c.Component);function go(e){var t=e.kbd,n=e.index;return Object(s.jsxs)(s.Fragment,{children:[0!==n&&Object(s.jsx)("span",{children:"+"}),Object(s.jsx)("kbd",{children:t})]})}var yo,Oo=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(){return Object(h.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props,t=e.icon,n=e.name,o=e.keys.map((function(e,t){return Object(s.jsx)(go,{kbd:e,index:t},t)}));return Object(s.jsxs)("div",{className:"win-hotkey-item",children:[Object(s.jsxs)("div",{className:"win-hotkey-item__info",children:[Object(s.jsx)("span",{className:"win-hotkey-item__icon",children:t}),Object(s.jsx)("div",{className:"win-hotkey-item__name",children:n})]}),Object(s.jsx)("div",{className:"win-hotkey-item__keys",children:o})]})}}]),n}(c.Component),_o=(n(448),n(464)),ko=n(115),xo=(_o.a.Panel,ko.a.getLang("label")),No=ko.a.getLang("toolbar.inline"),So=ko.a.getLang("toolbar.toolbox"),To=ko.a.getLang("toolbar.edit"),Co=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var o;Object(h.a)(this,n);var a="Ctrl";return(o=t.call(this,e)).state={groups:[{title:xo.format,items:[{icon:Object(s.jsx)("i",{className:"bei-bold"}),name:Object(s.jsx)("span",{style:{fontWeight:"bold"},children:No.bold}),keys:[a,"B"]},{icon:Object(s.jsx)("i",{className:"bei-italic"}),name:Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("span",{style:{fontStyle:"italic"},children:No.italic})}),keys:[a,"I"]},{icon:Object(s.jsx)("i",{className:"bei-underline"}),name:Object(s.jsx)("span",{style:{textDecoration:"underline"},children:No.underline}),keys:[a,"U"]},{icon:Object(s.jsx)("i",{className:"bei-strikethrough"}),name:Object(s.jsx)("span",{style:{textDecoration:"line-through"},children:No.strikethrough}),keys:[a,"S"]},{icon:Object(s.jsx)("i",{className:"bei-mark"}),name:Object(s.jsx)("mark",{children:No.mark}),keys:[a,"M"]},{icon:Object(s.jsx)("i",{className:"bei-inlinecode"}),name:Object(s.jsx)("code",{children:No.inlinecode}),keys:[a,"E"]},{icon:Object(s.jsx)("i",{className:"bei-superscript"}),name:Object(s.jsxs)("span",{children:[No.superscript,Object(s.jsx)("sup",{children:"2"})]}),keys:[a,"Shift","."]},{icon:Object(s.jsx)("i",{className:"bei-subscript"}),name:Object(s.jsxs)("span",{children:[No.subscript,Object(s.jsx)("sub",{children:"2"})]}),keys:[a,"Shift",","]}],expand:!1},{title:xo.insert,items:[{icon:Object(s.jsx)("i",{className:"bei-plus"}),name:Object(s.jsx)(s.Fragment,{children:So.insert}),keys:["Tab"]}],expand:!1},{title:xo.edit,items:[{icon:Object(s.jsx)("i",{className:"bei-undo"}),name:Object(s.jsx)(s.Fragment,{children:To.undo}),keys:[a,"Z"]},{icon:Object(s.jsx)("i",{className:"bei-redo"}),name:Object(s.jsx)(s.Fragment,{children:To.redo}),keys:[a,"Shift","Z"]},{icon:Object(s.jsx)("i",{className:"bei-search"}),name:Object(s.jsx)(s.Fragment,{children:To.search}),keys:[a,"F"]},{icon:Object(s.jsx)("i",{className:"bei-screen"}),name:Object(s.jsx)(s.Fragment,{children:To.layout}),keys:[a,"L"]}],expand:!1}]},o}return Object(p.a)(n,[{key:"render",value:function(){var e=this.state.groups.map((function(e,t){var n=e.items.map((function(e,n){return Object(s.jsx)(Oo,{icon:e.icon,name:e.name,keys:e.keys},t+n)}));return Object(s.jsxs)("div",{className:"win-hotkeys__group",children:[Object(s.jsx)("div",{className:"win-hotkeys__groupName",children:e.title}),Object(s.jsx)("div",{className:"win-hotkeys__groupContent",children:n})]},t)}));return Object(s.jsxs)("div",{className:"win-hotkeys-bar",children:[Object(s.jsx)("div",{className:"win-hotkeys-bar__title",children:Object(s.jsx)("span",{children:"\u5feb\u6377\u952e"})}),Object(s.jsx)("div",{className:"win-hotkeys-bar__body",children:e})]})}}]),n}(c.Component);Xe.a.Search;!function(e){e[e.ESideBarTabSelectOpenedDocs=0]="ESideBarTabSelectOpenedDocs",e[e.ESideBarTabSelectHotkeys=1]="ESideBarTabSelectHotkeys"}(yo||(yo={}));var Do=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var o;return Object(h.a)(this,n),(o=t.call(this,e)).onSearchTextChangeProxy=void 0,o.onTabSelect=function(e){o.setState({tabSelect:e},(function(){}))},o.state={tabSelect:yo.ESideBarTabSelectOpenedDocs},o}return Object(p.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.tabs,o=t.activeTabID,a=t.sideBarOpened,i=t.sideBarWidth,r=t.sketchBar,c=t.onRemove,d=t.onSelect,l=t.onExchange,u=this.state.tabSelect;return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("div",{className:["win-side-bar"].join(""),style:{width:a?"".concat(i,"px"):"0px",borderWidth:a?"1px":"0px",opacity:a?"1":"0"},children:[Object(s.jsxs)("div",{className:"win-side-bar-header",children:[Object(s.jsx)(m.a,{icon:Object(s.jsx)(Rt.a,{}),wrapClassName:"side-bar-item",onClick:function(){e.onTabSelect(yo.ESideBarTabSelectOpenedDocs)},selected:u===yo.ESideBarTabSelectOpenedDocs}),Object(s.jsx)(m.a,{icon:Object(s.jsx)("i",{className:"bei-hotkeys",style:{fontSize:"18px"}}),wrapClassName:"side-bar-item",onClick:function(){e.onTabSelect(yo.ESideBarTabSelectHotkeys)},selected:u===yo.ESideBarTabSelectHotkeys})]}),Object(s.jsxs)("div",{className:"win-side-bar-tabs",children:[Object(s.jsx)("div",{className:"win-side-bar-tab__docs",style:{display:u!==yo.ESideBarTabSelectOpenedDocs?"none":"block"},children:Object(s.jsx)(jo,{tabs:n,activeTabID:o,onRemove:c,onSelect:d,onExchange:l})}),Object(s.jsx)("div",{className:"win-side-bar-tab__hotkeys",style:{display:u!==yo.ESideBarTabSelectHotkeys?"none":"block"},children:Object(s.jsx)(Co,{})})]}),a&&r]})})}}]),n}(c.Component),Eo=(n(449),function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var o;return Object(h.a)(this,n),(o=t.call(this,e)).stretchStartX=void 0,o.onSketchStart=function(e){o.stretchStartX=e.pageX,o.setState({sketching:!0});var t=o.props.onStart;Object($.b)(document,"mousemove",o.onSketchMove),Object($.b)(document,"mouseup",o.onSketchEnd),t()},o.onSketchMove=function(e){var t=e.pageX,n=o.props.placementLeft?o.stretchStartX-t:t-o.stretchStartX,a=o.props,i=a.width;(0,a.onChange)(i+n)},o.onSketchEnd=function(e){var t=o.props.onEnd;o.setState({sketching:!1}),Object($.n)(document,"mousemove",o.onSketchMove),Object($.n)(document,"mouseup",o.onSketchEnd),t&&t()},o.state={sketching:!1},o}return Object(p.a)(n,[{key:"render",value:function(){var e=this.state.sketching,t=this.props.placementLeft?{width:e?"60px":"10px",left:e?"-30px":"-5px"}:{width:e?"60px":"10px",right:e?"-30px":"-5px"};return Object(s.jsx)("div",{className:"sketch-bar",style:t,onMouseDown:this.onSketchStart})}}]),n}(c.Component)),wo=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var o;return Object(h.a)(this,n),(o=t.call(this,e)).tabBar=void 0,o.onSelect=function(e){o.tabBar&&o.tabBar.onSelect(e)},o.onRemove=function(e){o.tabBar&&o.tabBar.onRemove(e)},o.onWinTabActive=function(e){o.setState({activeTabID:e})},o.onTriggerSideBar=function(){o.setState({sideBarOpened:!o.state.sideBarOpened}),Zt.a.trigger("onTriggerSideBar",!o.state.sideBarOpened)},o.onSketchStart=function(){o.setState({lastSideBarWidth:o.state.sideBarWidth})},o.onSketchChange=function(e){var t=Math.min(Math.max(e,200),500);o.setState({sideBarWidth:t})},o.state={activeTabID:-1,sideBarOpened:!1,sideBarWidth:300,lastSideBarWidth:300},o}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=this;Zt.a.on("onTriggerFullscreen",(function(t){t&&e.setState({sideBarOpened:!1})}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.tabs,o=t.onWinTabAdd,a=t.onWinTabRemove,i=t.onWinTabExchange,r=this.state,c=r.activeTabID,d=r.sideBarOpened,l=r.sideBarWidth,u=r.lastSideBarWidth,h=this.props.defaultWin,p=Object(s.jsx)(Eo,{placementLeft:!0,width:u,onStart:this.onSketchStart,onChange:this.onSketchChange});return Object(s.jsxs)("div",{className:"win",children:[Object(s.jsxs)("div",{className:"win-inner",style:{width:d?"calc(100% - ".concat(l,"px)"):"100%"},children:[Object(s.jsx)(Qn,{ref:function(t){e.tabBar=t},defaultWin:h,tabs:n,sideBarOpened:d,onWinTabAdd:o,onWinTabRemove:a,onWinTabActive:this.onWinTabActive,onTriggerSideBar:this.onTriggerSideBar}),h&&0===n.length&&Object(s.jsx)(vo,{})]}),Object(s.jsx)(Do,{sketchBar:p,sideBarWidth:l,tabs:n,activeTabID:c,sideBarOpened:d,onSelect:this.onSelect,onRemove:this.onRemove,onExchange:i})]})}}]),n}(c.Component),Po=Object(Mn.b)((function(e){return{tabs:e.tabs}}),(function(e){return{onWinTabAdd:function(t){var n=function(e,t){var n={id:++eo,type:e,floatable:e===Rn.WinTabDoc,removable:e===Rn.WinTabDoc,node:t};return{type:io,payload:{tab:n}}}(Rn.WinTabDoc,t);return e(n),n.payload.tab&&n.payload.tab.id},onWinTabRemove:function(t){e(function(e){return{type:ro,payload:{tabID:e}}}(t))},onWinTabExchange:function(t,n){e(function(e,t){return{type:so,payload:{tabID:e,toTabID:t}}}(t,n))}}}))(wo),Ro="ACTION_TYPE_WIN_ADD",Io="ACTION_TYPE_WIN_REMOVE",Fo="ACTION_TYPE_WIN_CONCAT",Ao=function(e,t){var n=function(e){e=e||{tabs:[],floating:!0,id:no()};var t=Object(O.a)({},e);return Object(T.d)(fo,t,Object(T.a)(C.a))}({tabs:e,floating:t,id:no()});return{type:Ro,payload:{add:n}}},Mo={stores:[]};var Lo=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(){var e;Object(h.a)(this,n);for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];return(e=t.call.apply(t,[this].concat(a)))._tabBar=void 0,e}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.onWinAdd;e.stores.length||t([],!1)}},{key:"render",value:function(){var e=this.props.stores.map((function(e,t){return Object(s.jsx)(Mn.a,{store:e,children:Object(s.jsx)(Po,{defaultWin:0===t})},e.getState().id)}));return Object(s.jsx)("div",{className:"win-bar",children:e})}}]),n}(d.a.Component),Bo=Object(Mn.b)((function(e){return{stores:e.win.stores}}),(function(e){return{onWinAdd:function(t,n){e(Ao(t,n))}}}))(Lo),Uo=function(e){var t=d.a.lazy(e);return t.preload=e,t}((function(){return Promise.all([n.e(0),n.e(1),n.e(2)]).then(n.bind(null,1095))})),Ho=$.g&&$.h?70:35,Go=function(e){Object(f.a)(n,e);var t=Object(v.a)(n);function n(e){var o;return Object(h.a)(this,n),(o=t.call(this,e)).onSearch=function(e){},o.onActiveNode=function(e){o.setState({activeNode:e})},o.onSketchStart=function(){o.setState({lastTabWidth:o.state.tabWidth})},o.onSketchChange=function(e){var t=Math.min(Math.max(e,200),500);o.setState({tabWidth:t})},o.onPreload=function(){Uo.preload()},o.state={activeNode:void 0,tabWidth:250,lastTabWidth:250},o}return Object(p.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.state,t=e.activeNode,n=e.lastTabWidth,a=e.tabWidth,i=(t&&(t.nodeType(),o.EDocsNodeTypeFile),Object(s.jsx)(Eo,{width:n,onStart:this.onSketchStart,onChange:this.onSketchChange}));return Object(s.jsxs)("div",{className:["app",$.g?" app--electron":"",$.h?" app--mac":""].join(""),onMouseMove:this.onPreload,children:[Object(s.jsxs)("div",{className:"app-main",children:[Object(s.jsx)(In,{tabWidth:a,sketchBar:i,onActiveNode:this.onActiveNode}),Object(s.jsx)("div",{className:"app-wins",style:{width:"calc(100% - ".concat(a+Ho,"px)")},children:Object(s.jsx)(Bo,{})})]}),!$.g&&Object(s.jsx)(An,{})]})}}]),n}(c.Component),Wo=function(e){e&&e instanceof Function&&n.e(9).then(n.bind(null,1094)).then((function(t){var n=t.getCLS,o=t.getFID,a=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),o(e),a(e),i(e),r(e)}))},qo=Object(T.c)({win:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Mo,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ro:return e.stores.push(t.payload.add),{stores:Object(y.a)(e.stores)};case Io:var n=e.stores.findIndex((function(e){return e===t.payload.del}));return-1!==n&&e.stores.splice(n,1),Object(O.a)({},e);case Fo:t.payload.dest;return e;default:return e}}}),zo=Object(T.d)(qo,Object(T.a)(C.a));ao.set("ACTION_CREATE_STORE",(function(e,t){zo.dispatch(Ao(e,t))}));var Ko=zo;n(450);u.a.render(Object(s.jsx)(Mn.a,{store:Ko,children:Object(s.jsx)(Go,{})}),document.getElementById("root")),Wo()},50:function(e,t,n){"use strict";var o=new(n(72).a);t.a=o},58:function(e,t,n){"use strict";function o(e,t){var n=0,o=null;return function(){for(var a=this,i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];var c=+new Date;clearTimeout(o),c-n<t?o=setTimeout((function(){n=c,e.apply(a,r)}),t):(n=c,e.apply(this,r))}}function a(e,t){var n=null;return function(){var o=this,a=arguments;n&&clearTimeout(n),n=setTimeout((function(){e.apply(o,a)}),t)}}n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return a}))},72:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(119),a=n(8),i=n(7),r=function(){function e(){Object(a.a)(this,e),this._listeners=void 0,this._listeners={}}return Object(i.a)(e,[{key:"getListener",value:function(e){return this._listeners[e]||(this._listeners[e]=[])}},{key:"on",value:function(e,t){"string"===typeof e&&(e=e.trim().split(/\s+/));var n,a=Object(o.a)(e);try{for(a.s();!(n=a.n()).done;){var i=n.value;this.getListener(i).push(t)}}catch(r){a.e(r)}finally{a.f()}}},{key:"off",value:function(e,t){"string"===typeof e&&(e=e.trim().split(/\s+/));var n,a=Object(o.a)(e);try{for(a.s();!(n=a.n()).done;){var i=n.value,r=this.getListener(i),s=r.findIndex((function(e){return e===t}));-1!==s&&r.splice(s,1)}}catch(c){a.e(c)}finally{a.f()}}},{key:"trigger",value:function(e){var t=this;"string"===typeof e&&(e=e.trim().split(/\s+/));for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];var r,s=Object(o.a)(e);try{var c=function(){var e=r.value,n=t.getListener(e),o=[].concat(a);n.forEach((function(e){e.apply(t,o)}))};for(s.s();!(r=s.n()).done;)c()}catch(d){s.e(d)}finally{s.f()}}}]),e}()}},[[454,7,3,8]]]);